/* ND.JS v1.4.0
 *
 * ND.JS is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * ND.JS is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.
 */
 (function(){'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(q){var r=0;return function(){return r<q.length?{done:!1,value:q[r++]}:{done:!0}}};$jscomp.arrayIterator=function(q){return{next:$jscomp.arrayIteratorImpl(q)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(q,r,d){if(q==Array.prototype||q==Object.prototype)return q;q[r]=d.value;return q};$jscomp.getGlobal=function(q){q=["object"==typeof globalThis&&globalThis,q,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var r=0;r<q.length;++r){var d=q[r];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(q,r){var d=$jscomp.propertyToPolyfillSymbol[r];if(null==d)return q[r];d=q[d];return void 0!==d?d:q[r]};
$jscomp.polyfill=function(q,r,d,A){r&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(q,r,d,A):$jscomp.polyfillUnisolated(q,r,d,A))};$jscomp.polyfillUnisolated=function(q,r,d,A){d=$jscomp.global;q=q.split(".");for(A=0;A<q.length-1;A++){var C=q[A];if(!(C in d))return;d=d[C]}q=q[q.length-1];A=d[q];r=r(A);r!=A&&null!=r&&$jscomp.defineProperty(d,q,{configurable:!0,writable:!0,value:r})};
$jscomp.polyfillIsolated=function(q,r,d,A){var C=q.split(".");q=1===C.length;A=C[0];A=!q&&A in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var F=0;F<C.length-1;F++){var H=C[F];if(!(H in A))return;A=A[H]}C=C[C.length-1];d=$jscomp.IS_SYMBOL_NATIVE&&"es6"===d?A[C]:null;r=r(d);null!=r&&(q?$jscomp.defineProperty($jscomp.polyfills,C,{configurable:!0,writable:!0,value:r}):r!==d&&(void 0===$jscomp.propertyToPolyfillSymbol[C]&&(d=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[C]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(C):$jscomp.POLYFILL_PREFIX+d+"$"+C),$jscomp.defineProperty(A,$jscomp.propertyToPolyfillSymbol[C],{configurable:!0,writable:!0,value:r})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(q){if(q)return q;var r=function(F,H){this.$jscomp$symbol$id_=F;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:H})};r.prototype.toString=function(){return this.$jscomp$symbol$id_};var d="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",A=0,C=function(F){if(this instanceof C)throw new TypeError("Symbol is not a constructor");return new r(d+(F||"")+"_"+A++,F)};return C},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(q){if(q)return q;q=Symbol("Symbol.iterator");for(var r="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),d=0;d<r.length;d++){var A=$jscomp.global[r[d]];"function"===typeof A&&"function"!=typeof A.prototype[q]&&$jscomp.defineProperty(A.prototype,q,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return q},"es6",
"es3");$jscomp.polyfill("Symbol.asyncIterator",function(q){return q?q:Symbol("Symbol.asyncIterator")},"es9","es3");$jscomp.iteratorPrototype=function(q){q={next:q};q[Symbol.iterator]=function(){return this};return q};$jscomp.iteratorFromArray=function(q,r){q instanceof String&&(q+="");var d=0,A=!1,C={next:function(){if(!A&&d<q.length){var F=d++;return{value:r(F,q[F]),done:!1}}A=!0;return{done:!0,value:void 0}}};C[Symbol.iterator]=function(){return C};return C};
$jscomp.polyfill("Array.prototype.keys",function(q){return q?q:function(){return $jscomp.iteratorFromArray(this,function(r){return r})}},"es6","es3");$jscomp.polyfill("Object.getOwnPropertySymbols",function(q){return q?q:function(){return[]}},"es6","es5");$jscomp.polyfill("Array.prototype.entries",function(q){return q?q:function(){return $jscomp.iteratorFromArray(this,function(r,d){return[r,d]})}},"es6","es3");
$jscomp.polyfill("Math.sign",function(q){return q?q:function(r){r=Number(r);return 0===r||isNaN(r)?r:0<r?1:-1}},"es6","es3");$jscomp.underscoreProtoCanBeSet=function(){var q={a:!0},r={};try{return r.__proto__=q,r.a}catch(d){}return!1};$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(q,r){q.__proto__=r;if(q.__proto__!==r)throw new TypeError(q+" is not extensible");return q}:null;
$jscomp.polyfill("Object.setPrototypeOf",function(q){return q||$jscomp.setPrototypeOf},"es6","es5");$jscomp.polyfill("Math.fround",function(q){if(q)return q;if($jscomp.SIMPLE_FROUND_POLYFILL||"function"!==typeof Float32Array)return function(d){return d};var r=new Float32Array(1);return function(d){r[0]=d;return r[0]}},"es6","es3");
$jscomp.polyfill("Math.hypot",function(q){return q?q:function(r){if(2>arguments.length)return arguments.length?Math.abs(arguments[0]):0;var d,A,C;for(d=C=0;d<arguments.length;d++)C=Math.max(C,Math.abs(arguments[d]));if(1E100<C||1E-100>C){if(!C)return C;for(d=A=0;d<arguments.length;d++){var F=Number(arguments[d])/C;A+=F*F}return Math.sqrt(A)*C}for(d=A=0;d<arguments.length;d++)F=Number(arguments[d]),A+=F*F;return Math.sqrt(A)}},"es6","es3");
$jscomp.polyfill("Array.from",function(q){return q?q:function(r,d,A){d=null!=d?d:function(J){return J};var C=[],F="undefined"!=typeof Symbol&&Symbol.iterator&&r[Symbol.iterator];if("function"==typeof F){r=F.call(r);for(var H=0;!(F=r.next()).done;)C.push(d.call(A,F.value,H++))}else for(F=r.length,H=0;H<F;H++)C.push(d.call(A,r[H],H));return C}},"es6","es3");$jscomp.makeIterator=function(q){var r="undefined"!=typeof Symbol&&Symbol.iterator&&q[Symbol.iterator];return r?r.call(q):$jscomp.arrayIterator(q)};
$jscomp.polyfill("Promise",function(q){function r(){this.batch_=null}function d(H){return H instanceof C?H:new C(function(J,L){J(H)})}if(q&&(!($jscomp.FORCE_POLYFILL_PROMISE||$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&"undefined"===typeof $jscomp.global.PromiseRejectionEvent)||!$jscomp.global.Promise||-1===$jscomp.global.Promise.toString().indexOf("[native code]")))return q;r.prototype.asyncExecute=function(H){if(null==this.batch_){this.batch_=[];var J=this;this.asyncExecuteFunction(function(){J.executeBatch_()})}this.batch_.push(H)};
var A=$jscomp.global.setTimeout;r.prototype.asyncExecuteFunction=function(H){A(H,0)};r.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var H=this.batch_;this.batch_=[];for(var J=0;J<H.length;++J){var L=H[J];H[J]=null;try{L()}catch(O){this.asyncThrow_(O)}}}this.batch_=null};r.prototype.asyncThrow_=function(H){this.asyncExecuteFunction(function(){throw H;})};var C=function(H){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];this.isRejectionHandled_=!1;var J=this.createResolveAndReject_();
try{H(J.resolve,J.reject)}catch(L){J.reject(L)}};C.prototype.createResolveAndReject_=function(){function H(O){return function(da){L||(L=!0,O.call(J,da))}}var J=this,L=!1;return{resolve:H(this.resolveTo_),reject:H(this.reject_)}};C.prototype.resolveTo_=function(H){if(H===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(H instanceof C)this.settleSameAsPromise_(H);else{a:switch(typeof H){case "object":var J=null!=H;break a;case "function":J=!0;break a;default:J=!1}J?this.resolveToNonPromiseObj_(H):
this.fulfill_(H)}};C.prototype.resolveToNonPromiseObj_=function(H){var J=void 0;try{J=H.then}catch(L){this.reject_(L);return}"function"==typeof J?this.settleSameAsThenable_(J,H):this.fulfill_(H)};C.prototype.reject_=function(H){this.settle_(2,H)};C.prototype.fulfill_=function(H){this.settle_(1,H)};C.prototype.settle_=function(H,J){if(0!=this.state_)throw Error("Cannot settle("+H+", "+J+"): Promise already settled in state"+this.state_);this.state_=H;this.result_=J;2===this.state_&&this.scheduleUnhandledRejectionCheck_();
this.executeOnSettledCallbacks_()};C.prototype.scheduleUnhandledRejectionCheck_=function(){var H=this;A(function(){if(H.notifyUnhandledRejection_()){var J=$jscomp.global.console;"undefined"!==typeof J&&J.error(H.result_)}},1)};C.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var H=$jscomp.global.CustomEvent,J=$jscomp.global.Event,L=$jscomp.global.dispatchEvent;if("undefined"===typeof L)return!0;"function"===typeof H?H=new H("unhandledrejection",{cancelable:!0}):
"function"===typeof J?H=new J("unhandledrejection",{cancelable:!0}):(H=$jscomp.global.document.createEvent("CustomEvent"),H.initCustomEvent("unhandledrejection",!1,!0,H));H.promise=this;H.reason=this.result_;return L(H)};C.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var H=0;H<this.onSettledCallbacks_.length;++H)F.asyncExecute(this.onSettledCallbacks_[H]);this.onSettledCallbacks_=null}};var F=new r;C.prototype.settleSameAsPromise_=function(H){var J=this.createResolveAndReject_();
H.callWhenSettled_(J.resolve,J.reject)};C.prototype.settleSameAsThenable_=function(H,J){var L=this.createResolveAndReject_();try{H.call(J,L.resolve,L.reject)}catch(O){L.reject(O)}};C.prototype.then=function(H,J){function L(ka,ha){return"function"==typeof ka?function(ua){try{O(ka(ua))}catch(xa){da(xa)}}:ha}var O,da,Z=new C(function(ka,ha){O=ka;da=ha});this.callWhenSettled_(L(H,O),L(J,da));return Z};C.prototype.catch=function(H){return this.then(void 0,H)};C.prototype.callWhenSettled_=function(H,J){function L(){switch(O.state_){case 1:H(O.result_);
break;case 2:J(O.result_);break;default:throw Error("Unexpected state: "+O.state_);}}var O=this;null==this.onSettledCallbacks_?F.asyncExecute(L):this.onSettledCallbacks_.push(L);this.isRejectionHandled_=!0};C.resolve=d;C.reject=function(H){return new C(function(J,L){L(H)})};C.race=function(H){return new C(function(J,L){for(var O=$jscomp.makeIterator(H),da=O.next();!da.done;da=O.next())d(da.value).callWhenSettled_(J,L)})};C.all=function(H){var J=$jscomp.makeIterator(H),L=J.next();return L.done?d([]):
new C(function(O,da){function Z(ua){return function(xa){ka[ua]=xa;ha--;0==ha&&O(ka)}}var ka=[],ha=0;do ka.push(void 0),ha++,d(L.value).callWhenSettled_(Z(ka.length-1),da),L=J.next();while(!L.done)})};return C},"es6","es3");$jscomp.polyfill("Reflect",function(q){return q?q:{}},"es6","es3");
$jscomp.polyfill("Reflect.ownKeys",function(q){return q?q:function(r){var d=[],A=Object.getOwnPropertyNames(r);r=Object.getOwnPropertySymbols(r);for(var C=0;C<A.length;C++)("jscomp_symbol_"==A[C].substring(0,14)?r:d).push(A[C]);return d.concat(r)}},"es6","es5");$jscomp.polyfill("Object.getOwnPropertyDescriptors",function(q){return q?q:function(r){for(var d={},A=Reflect.ownKeys(r),C=0;C<A.length;C++)d[A[C]]=Object.getOwnPropertyDescriptor(r,A[C]);return d}},"es8","es5");
$jscomp.checkStringArgs=function(q,r,d){if(null==q)throw new TypeError("The 'this' value for String.prototype."+d+" must not be null or undefined");if(r instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");return q+""};
$jscomp.polyfill("String.prototype.startsWith",function(q){return q?q:function(r,d){var A=$jscomp.checkStringArgs(this,r,"startsWith");r+="";var C=A.length,F=r.length;d=Math.max(0,Math.min(d|0,A.length));for(var H=0;H<F&&d<C;)if(A[d++]!=r[H++])return!1;return H>=F}},"es6","es3");
$jscomp.polyfill("String.prototype.repeat",function(q){return q?q:function(r){var d=$jscomp.checkStringArgs(this,null,"repeat");if(0>r||1342177279<r)throw new RangeError("Invalid count value");r|=0;for(var A="";r;)if(r&1&&(A+=d),r>>>=1)d+=d;return A}},"es6","es3");$jscomp.stringPadding=function(q,r){q=void 0!==q?String(q):" ";return 0<r&&q?q.repeat(Math.ceil(r/q.length)).substring(0,r):""};
$jscomp.polyfill("String.prototype.padStart",function(q){return q?q:function(r,d){var A=$jscomp.checkStringArgs(this,null,"padStart");return $jscomp.stringPadding(d,r-A.length)+A}},"es8","es3");$jscomp.polyfill("Array.prototype.fill",function(q){return q?q:function(r,d,A){var C=this.length||0;0>d&&(d=Math.max(0,C+d));if(null==A||A>C)A=C;A=Number(A);0>A&&(A=Math.max(0,C+A));for(d=Number(d||0);d<A;d++)this[d]=r;return this}},"es6","es3");$jscomp.typedArrayFill=function(q){return q?q:Array.prototype.fill};
$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("String.prototype.codePointAt",function(q){return q?q:function(r){var d=$jscomp.checkStringArgs(this,null,"codePointAt"),A=d.length;r=Number(r)||0;if(0<=r&&r<A){r|=0;var C=d.charCodeAt(r);if(55296>C||56319<C||r+1===A)return C;r=d.charCodeAt(r+1);return 56320>r||57343<r?C:1024*(C-55296)+r+9216}}},"es6","es3");
$jscomp.polyfill("String.fromCodePoint",function(q){return q?q:function(r){for(var d="",A=0;A<arguments.length;A++){var C=Number(arguments[A]);if(0>C||1114111<C||C!==Math.floor(C))throw new RangeError("invalid_code_point "+C);65535>=C?d+=String.fromCharCode(C):(C-=65536,d+=String.fromCharCode(C>>>10&1023|55296),d+=String.fromCharCode(C&1023|56320))}return d}},"es6","es3");$jscomp.owns=function(q,r){return Object.prototype.hasOwnProperty.call(q,r)};
$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(q,r){for(var d=1;d<arguments.length;d++){var A=arguments[d];if(A)for(var C in A)$jscomp.owns(A,C)&&(q[C]=A[C])}return q};$jscomp.polyfill("Object.assign",function(q){return q||$jscomp.assign},"es6","es3");$jscomp.polyfill("Object.is",function(q){return q?q:function(r,d){return r===d?0!==r||1/r===1/d:r!==r&&d!==d}},"es6","es3");
$jscomp.polyfill("Math.expm1",function(q){return q?q:function(r){r=Number(r);if(.25>r&&-.25<r){for(var d=r,A=1,C=r,F=0;F!=C;)d*=r/++A,C=(F=C)+d;return C}return Math.exp(r)-1}},"es6","es3");$jscomp.polyfill("Math.imul",function(q){return q?q:function(r,d){r=Number(r);d=Number(d);var A=r&65535,C=d&65535;return A*C+((r>>>16&65535)*C+A*(d>>>16&65535)<<16>>>0)|0}},"es6","es3");
(function(q,r){"object"===typeof exports&&"object"===typeof module?module.exports=r():"function"===typeof define&&define.amd?define([],r):"object"===typeof exports?exports.nd=r():q.nd=r()})(this,function(){return function(q){function r(A){if(d[A])return d[A].exports;var C=d[A]={i:A,l:!1,exports:{}};q[A].call(C.exports,C,C.exports,r);C.l=!0;return C.exports}var d={};r.m=q;r.c=d;r.d=function(A,C,F){r.o(A,C)||Object.defineProperty(A,C,{enumerable:!0,get:F})};r.r=function(A){"undefined"!==typeof Symbol&&
Symbol.toStringTag&&Object.defineProperty(A,Symbol.toStringTag,{value:"Module"});Object.defineProperty(A,"__esModule",{value:!0})};r.t=function(A,C){C&1&&(A=r(A));if(C&8||C&4&&"object"===typeof A&&A&&A.__esModule)return A;var F=Object.create(null);r.r(F);Object.defineProperty(F,"default",{enumerable:!0,value:A});if(C&2&&"string"!=typeof A)for(var H in A)r.d(F,H,function(J){return A[J]}.bind(null,H));return F};r.n=function(A){var C=A&&A.__esModule?function(){return A["default"]}:function(){return A};
r.d(C,"a",C);return C};r.o=function(A,C){return Object.prototype.hasOwnProperty.call(A,C)};r.p="";return r(r.s=466)}([function(q,r,d){var A=d(299),C=d(300),F=d(163),H=d(301);q.exports=function(J,L){return A(J)||C(J,L)||F(J,L)||H()};q.exports["default"]=q.exports;q.exports.__esModule=!0},function(q,r,d){q.exports=d(164)},function(q,r,d){q.exports=d(276)},function(q,r,d){q.exports=d(398)},function(q,r,d){q.exports=d(205)},function(q,r,d){q.exports=d(220)},function(q,r,d){var A=d(229),C=d(233),F=d(163),
H=d(272);q.exports=function(J){return A(J)||C(J)||F(J)||H()};q.exports["default"]=q.exports;q.exports.__esModule=!0},function(q,r,d){var A=d(42),C=d(33),F=d(76).f,H=d(197),J=d(13),L=d(45),O=d(62),da=d(50),Z=function(ka){var ha=function(ua,xa,ya){if(this instanceof ka){switch(arguments.length){case 0:return new ka;case 1:return new ka(ua);case 2:return new ka(ua,xa)}return new ka(ua,xa,ya)}return ka.apply(this,arguments)};ha.prototype=ka.prototype;return ha};q.exports=function(ka,ha){var ua=ka.target,
xa=ka.global,ya=ka.stat,ia=ka.proto,V=xa?A:ya?A[ua]:(A[ua]||{}).prototype,Fa=xa?J:J[ua]||O(J,ua,{})[ua],Ca=Fa.prototype,Ea;for(Ea in ha){var Ia=H(xa?Ea:ua+(ya?".":"#")+Ea,ka.forced);var wa=!Ia&&V&&da(V,Ea);var Qa=Fa[Ea];if(wa)var bb=ka.noTargetGet?(bb=F(V,Ea))&&bb.value:V[Ea];Ia=wa&&bb?bb:ha[Ea];wa&&typeof Qa===typeof Ia||(wa=ka.bind&&wa?L(Ia,A):ka.wrap&&wa?Z(Ia):ia&&C(Ia)?L(Function.call,Ia):Ia,(ka.sham||Ia&&Ia.sham||Qa&&Qa.sham)&&O(wa,"sham",!0),O(Fa,Ea,wa),ia&&(Qa=ua+"Prototype",da(J,Qa)||O(J,
Qa,{}),O(J[Qa],Ea,Ia),ka.real&&Ca&&!Ca[Ea]&&O(Ca,Ea,Ia)))}}},function(q,r,d){q.exports=d(214)},function(q,r){q.exports=function(d,A){if(!(d instanceof A))throw new TypeError("Cannot call a class as a function");};q.exports["default"]=q.exports;q.exports.__esModule=!0},function(q,r,d){q.exports=d(160)},function(q,r,d){q.exports=d(166)},function(q,r,d){function A(F,H){for(var J=0;J<H.length;J++){var L=H[J];L.enumerable=L.enumerable||!1;L.configurable=!0;"value"in L&&(L.writable=!0);C(F,L.key,L)}}var C=
d(138);q.exports=function(F,H,J){H&&A(F.prototype,H);J&&A(F,J);return F};q.exports["default"]=q.exports;q.exports.__esModule=!0},function(q,r){q.exports={}},function(q,r,d){q.exports=d(391)},function(q,r,d){q.exports=d(359)},function(q,r,d){q.exports=d(258)},function(q,r,d){q.exports=d(293)},function(q,r,d){function A(H){q.exports=A=C?F:function(J){return J.__proto__||F(J)};q.exports["default"]=q.exports;q.exports.__esModule=!0;return A(H)}var C=d(169),F=d(309);q.exports=A;q.exports["default"]=q.exports;
q.exports.__esModule=!0},function(q,r,d){var A=d(36);q.exports=function(C){if(A(C))return C;throw TypeError(String(C)+" is not an object");}},function(q,r){q.exports=function(d){try{return!!d()}catch(A){return!0}}},function(q,r,d){q.exports=d(147)},function(q,r,d){q.exports=d(145)},function(q,r,d){q.exports=d(420)},function(q,r,d){q.exports=d(289)},function(q,r,d){var A=d(168),C=d(125);q.exports=function(F,H){if("function"!==typeof H&&null!==H)throw new TypeError("Super expression must either be null or a function");
F.prototype=A(H&&H.prototype,{constructor:{value:F,writable:!0,configurable:!0}});H&&C(F,H)};q.exports["default"]=q.exports;q.exports.__esModule=!0},function(q,r,d){var A=d(68)["default"],C=d(56);q.exports=function(F,H){if(H&&("object"===A(H)||"function"===typeof H))return H;if(void 0!==H)throw new TypeError("Derived constructors may only return object or undefined");return C(F)};q.exports["default"]=q.exports;q.exports.__esModule=!0},function(q,r,d){r=d(42);var A=d(112),C=d(50),F=d(94),H=d(110);
d=d(131);var J=A("wks"),L=r.Symbol,O=d?L:L&&L.withoutSetter||F;q.exports=function(da){if(!C(J,da)||!H&&"string"!=typeof J[da])H&&C(L,da)?J[da]=L[da]:J[da]=O("Symbol."+da);return J[da]}},function(q,r){q.exports=!0},function(q,r,d){var A=d(13),C=d(50),F=d(104),H=d(51).f;q.exports=function(J){var L=A.Symbol||(A.Symbol={});C(L,J)||H(L,J,{value:F.f(J)})}},function(q,r,d){q.exports=d(277)},function(q,r,d){q.exports=d(366)},function(q,r,d){q.exports=d(217)},function(q,r){q.exports=function(d){return"function"===
typeof d}},function(q,r,d){r=d(20);q.exports=!r(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},function(q,r,d){var A=d(13);q.exports=function(C){return A[C+"Prototype"]}},function(q,r,d){var A=d(33);q.exports=function(C){return"object"===typeof C?null!==C:A(C)}},function(q,r,d){var A=d(33),C=d(132);q.exports=function(F){if(A(F))return F;throw TypeError(C(F)+" is not a function");}},function(q,r,d){var A=d(19),C=d(162),F=d(55),H=d(45),J=d(86),L=d(105),O=d(161),da=
function(Z,ka){this.stopped=Z;this.result=ka};q.exports=function(Z,ka,ha){var ua=!(!ha||!ha.AS_ENTRIES),xa=!(!ha||!ha.IS_ITERATOR),ya=!(!ha||!ha.INTERRUPTED),ia=H(ka,ha&&ha.that,1+ua+ya),V,Fa=function(Ea){Ca&&O(Ca,"normal",Ea);return new da(!0,Ea)};ka=function(Ea){return ua?(A(Ea),ya?ia(Ea[0],Ea[1],Fa):ia(Ea[0],Ea[1])):ya?ia(Ea,Fa):ia(Ea)};if(xa)var Ca=Z;else{xa=L(Z);if(!xa)throw TypeError(String(Z)+" is not iterable");if(C(xa)){xa=0;for(ha=F(Z);ha>xa;xa++)if((V=ka(Z[xa]))&&V instanceof da)return V;
return new da(!1)}Ca=J(Z,xa)}for(Z=Ca.next;!(xa=Z.call(Ca)).done;){try{V=ka(xa.value)}catch(Ea){O(Ca,"throw",Ea)}if("object"==typeof V&&V&&V instanceof da)return V}return new da(!1)}},function(q,r,d){q.exports=d(139)},function(q,r,d){q.exports=d(280)},function(q,r,d){q.exports=d(171)},function(q,r,d){(function(A){var C=function(F){return F&&F.Math==Math&&F};q.exports=C("object"==typeof globalThis&&globalThis)||C("object"==typeof window&&window)||C("object"==typeof self&&self)||C("object"==typeof A&&
A)||function(){return this}()||Function("return this")()}).call(this,d(193))},function(q,r,d){function A(da){var Z="function"===typeof C?new C:void 0;q.exports=A=function(ka){function ha(){return O(ka,arguments,H(this).constructor)}if(null===ka||!L(ka))return ka;if("function"!==typeof ka)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof Z){if(Z.has(ka))return Z.get(ka);Z.set(ka,ha)}ha.prototype=F(ka.prototype,{constructor:{value:ha,enumerable:!1,writable:!0,
configurable:!0}});return J(ha,ka)};q.exports["default"]=q.exports;q.exports.__esModule=!0;return A(da)}var C=d(313),F=d(168),H=d(18),J=d(125),L=d(344),O=d(351);q.exports=A;q.exports["default"]=q.exports;q.exports.__esModule=!0},function(q,r,d){q.exports=d(170)},function(q,r,d){var A=d(37);q.exports=function(C,F,H){A(C);if(void 0===F)return C;switch(H){case 0:return function(){return C.call(F)};case 1:return function(J){return C.call(F,J)};case 2:return function(J,L){return C.call(F,J,L)};case 3:return function(J,
L,O){return C.call(F,J,L,O)}}return function(){return C.apply(F,arguments)}}},function(q,r,d){var A=d(13),C=d(42),F=d(33),H=function(J){return F(J)?J:void 0};q.exports=function(J,L){return 2>arguments.length?H(A[J])||H(C[J]):A[J]&&A[J][L]||C[J]&&C[J][L]}},function(q,r,d){var A=d(61);q.exports=function(C){return Object(A(C))}},function(q,r,d){q.exports=d(436)},function(q,r,d){q.exports=d(190)},function(q,r,d){var A=d(47),C={}.hasOwnProperty;q.exports=Object.hasOwn||function(F,H){return C.call(A(F),
H)}},function(q,r,d){q=d(34);var A=d(133),C=d(19),F=d(93),H=Object.defineProperty;r.f=q?H:function(J,L,O){C(J);L=F(L);C(O);if(A)try{return H(J,L,O)}catch(da){}if("get"in O||"set"in O)throw TypeError("Accessors not supported");"value"in O&&(J[L]=O.value);return J}},function(q,r,d){q.exports=d(424)},function(q,r,d){var A=d(92),C=d(61);q.exports=function(F){return A(C(F))}},function(q,r,d){r=d(86);q.exports=r},function(q,r,d){var A=d(115);q.exports=function(C){return A(C.length)}},function(q,r){q.exports=
function(d){if(void 0===d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d};q.exports["default"]=q.exports;q.exports.__esModule=!0},function(q,r,d){q.exports=d(432)},function(q,r,d){var A=d(63);q.exports=function(C){if("Symbol"===A(C))throw TypeError("Cannot convert a Symbol value to a string");return String(C)}},function(q,r,d){d(65);var A=d(250);q=d(42);r=d(63);var C=d(62),F=d(66);d=d(27)("toStringTag");for(var H in A)(A=(A=q[H])&&A.prototype)&&r(A)!==
d&&C(A,d,H),F[H]=F.Array},function(q,r,d){q.exports=d(224)},function(q,r){q.exports=function(d){if(void 0==d)throw TypeError("Can't call method on "+d);return d}},function(q,r,d){r=d(34);var A=d(51),C=d(77);q.exports=r?function(F,H,J){return A.f(F,H,C(1,J))}:function(F,H,J){F[H]=J;return F}},function(q,r,d){r=d(118);var A=d(33),C=d(78),F=d(27)("toStringTag"),H="Arguments"==C(function(){return arguments}());q.exports=r?C:function(J){var L;if(void 0===J)var O="Undefined";else{if(null===J)var da="Null";
else{a:{var Z=J=Object(J);try{da=Z[F];break a}catch(ka){}da=void 0}da="string"==typeof(O=da)?O:H?C(J):"Object"==(L=C(J))&&A(J.callee)?"Arguments":L}O=da}return O}},function(q,r,d){var A=d(45),C=d(92),F=d(47),H=d(55),J=d(141),L=[].push;r=function(O){var da=1==O,Z=2==O,ka=3==O,ha=4==O,ua=6==O,xa=7==O,ya=5==O||ua;return function(ia,V,Fa,Ca){var Ea=F(ia),Ia=C(Ea);V=A(V,Fa,3);Fa=H(Ia);var wa=0;Ca=Ca||J;ia=da?Ca(ia,Fa):Z||xa?Ca(ia,0):void 0;for(var Qa;Fa>wa;wa++)if(ya||wa in Ia)if(Ca=Ia[wa],Qa=V(Ca,wa,
Ea),O)if(da)ia[wa]=Qa;else if(Qa)switch(O){case 3:return!0;case 5:return Ca;case 6:return wa;case 2:L.call(ia,Ca)}else switch(O){case 4:return!1;case 7:L.call(ia,Ca)}return ua?-1:ka||ha?ha:ia}};q.exports={forEach:r(0),map:r(1),filter:r(2),some:r(3),every:r(4),find:r(5),findIndex:r(6),filterReject:r(7)}},function(q,r,d){var A=d(53);r=d(153);var C=d(66),F=d(84);d=d(122);var H=F.set,J=F.getterFor("Array Iterator");q.exports=d(Array,"Array",function(L,O){H(this,{type:"Array Iterator",target:A(L),index:0,
kind:O})},function(){var L=J(this),O=L.target,da=L.kind,Z=L.index++;return!O||Z>=O.length?(L.target=void 0,{value:void 0,done:!0}):"keys"==da?{value:Z,done:!1}:"values"==da?{value:O[Z],done:!1}:{value:[Z,O[Z]],done:!1}},"values");C.Arguments=C.Array;r("keys");r("values");r("entries")},function(q,r){q.exports={}},function(q,r,d){var A=d(158).charAt,C=d(58);q=d(84);d=d(122);var F=q.set,H=q.getterFor("String Iterator");d(String,"String",function(J){F(this,{type:"String Iterator",string:C(J),index:0})},
function(){var J=H(this),L=J.string,O=J.index;if(O>=L.length)return{value:void 0,done:!0};L=A(L,O);J.index+=L.length;return{value:L,done:!1}})},function(q,r,d){function A(H){"@babel/helpers - typeof";q.exports="function"===typeof C&&"symbol"===typeof F?A=function(J){return typeof J}:A=function(J){return J&&"function"===typeof C&&J.constructor===C&&J!==C.prototype?"symbol":typeof J};q.exports["default"]=q.exports;q.exports.__esModule=!0;return A(H)}var C=d(121),F=d(273);q.exports=A;q.exports["default"]=
q.exports;q.exports.__esModule=!0},function(q,r,d){var A=d(20);q.exports=function(C,F){var H=[][C];return!!H&&A(function(){H.call(null,F||function(){throw 1;},1)})}},function(q,r,d){var A=d(78);q.exports=Array.isArray||function(C){return"Array"==A(C)}},function(q,r,d){var A=d(19),C=d(143),F=d(116);r=d(81);var H=d(226),J=d(134),L=d(102)("IE_PROTO"),O=function(){},da=function(ha){ha.write("<script>\x3c/script>");ha.close();return ha.parentWindow.Object},Z,ka=function(){try{Z=new ActiveXObject("htmlfile")}catch(ua){}if("undefined"!=
typeof document)if(document.domain&&Z)var ha=da(Z);else ha=J("iframe"),ha.style.display="none",H.appendChild(ha),ha.src="javascript:",ha=ha.contentWindow.document,ha.open(),ha.write("<script>document.F=Object\x3c/script>"),ha.close(),ha=ha.F;else ha=da(Z);ka=ha;for(ha=F.length;ha--;)delete ka.prototype[F[ha]];return ka()};r[L]=!0;q.exports=Object.create||function(ha,ua){if(null!==ha){O.prototype=A(ha);var xa=new O;O.prototype=null;xa[L]=ha}else xa=ka();return void 0===ua?xa:C(xa,ua)}},function(q,
r,d){q.exports=d(165)},function(q,r,d){q.exports=d(394)},function(q,r,d){q.exports=d(439)},function(q,r,d){q.exports=d(463)},function(q,r,d){q=d(34);var A=d(91),C=d(77),F=d(53),H=d(93),J=d(50),L=d(133),O=Object.getOwnPropertyDescriptor;r.f=q?O:function(da,Z){da=F(da);Z=H(Z);if(L)try{return O(da,Z)}catch(ka){}if(J(da,Z))return C(!A.f.call(da,Z),da[Z])}},function(q,r){q.exports=function(d,A){return{enumerable:!(d&1),configurable:!(d&2),writable:!(d&4),value:A}}},function(q,r){var d={}.toString;q.exports=
function(A){return d.call(A).slice(8,-1)}},function(q,r,d){r=d(42);d=d(80);var A=r.process;r=r.Deno;r=(r=A&&A.versions||r&&r.version)&&r.v8;if(r){r=r.split(".");var C=4>r[0]?1:r[0]+r[1]}else d&&(r=d.match(/Edge\/(\d+)/),(!r||74<=r[1])&&(r=d.match(/Chrome\/(\d+)/))&&(C=r[1]));q.exports=C&&+C},function(q,r,d){r=d(46);q.exports=r("navigator","userAgent")||""},function(q,r){q.exports={}},function(q,r,d){var A=d(136),C=d(116);q.exports=Object.keys||function(F){return A(F,C)}},function(q,r,d){var A=d(118),
C=d(51).f,F=d(62),H=d(50),J=d(227),L=d(27)("toStringTag");q.exports=function(O,da,Z,ka){O&&(O=Z?O:O.prototype,H(O,L)||C(O,L,{configurable:!0,value:da}),ka&&!A&&F(O,"toString",J))}},function(q,r,d){r=d(228);var A=d(42),C=d(36),F=d(62),H=d(50),J=d(113),L=d(102);d=d(81);A=A.WeakMap;if(r||J.state){var O=J.state||(J.state=new A),da=O.get,Z=O.has,ka=O.set;var ha=function(ia,V){if(Z.call(O,ia))throw new TypeError("Object already initialized");V.facade=ia;ka.call(O,ia,V);return V};var ua=function(ia){return da.call(O,
ia)||{}};var xa=function(ia){return Z.call(O,ia)}}else{var ya=L("state");d[ya]=!0;ha=function(ia,V){if(H(ia,ya))throw new TypeError("Object already initialized");V.facade=ia;F(ia,ya,V);return V};ua=function(ia){return H(ia,ya)?ia[ya]:{}};xa=function(ia){return H(ia,ya)}}q.exports={set:ha,get:ua,has:xa,enforce:function(ia){return xa(ia)?ua(ia):ha(ia,{})},getterFor:function(ia){return function(V){var Fa;if(!C(V)||(Fa=ua(V)).type!==ia)throw TypeError("Incompatible receiver, "+ia+" required");return Fa}}}},
function(q,r){},function(q,r,d){var A=d(37),C=d(19),F=d(105);q.exports=function(H,J){var L=2>arguments.length?F(H):J;if(A(L))return C(L.call(H));throw TypeError(String(H)+" is not iterable");}},function(q,r,d){q.exports=d(381)},function(q,r,d){q.exports=d(413)},function(q,r,d){q.exports=d(447)},function(q,r,d){q.exports=d(409)},function(q,r,d){q={}.propertyIsEnumerable;var A=Object.getOwnPropertyDescriptor;d=A&&!q.call({1:2},1);r.f=d?function(C){C=A(this,C);return!!C&&C.enumerable}:q},function(q,
r,d){r=d(20);var A=d(78),C="".split;q.exports=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(F){return"String"==A(F)?C.call(F,""):Object(F)}:Object},function(q,r,d){var A=d(194),C=d(109);q.exports=function(F){F=A(F,"string");return C(F)?F:String(F)}},function(q,r){var d=0,A=Math.random();q.exports=function(C){return"Symbol("+String(void 0===C?"":C)+")_"+(++d+A).toString(36)}},function(q,r,d){var A=d(136),C=d(116).concat("length","prototype");r.f=Object.getOwnPropertyNames||function(F){return A(F,
C)}},function(q,r,d){var A=d(97),C=Math.max,F=Math.min;q.exports=function(H,J){H=A(H);return 0>H?C(H+J,0):F(H,J)}},function(q,r){var d=Math.ceil,A=Math.floor;q.exports=function(C){C=+C;return C!==C||0===C?0:(0<C?A:d)(C)}},function(q,r,d){var A=d(7);r=d(81);var C=d(36),F=d(50),H=d(51).f,J=d(95),L=d(114),O=d(94),da=d(117),Z=!1,ka=O("meta"),ha=0,ua=Object.isExtensible||function(){return!0},xa=function(ia){H(ia,ka,{value:{objectID:"O"+ha++,weakData:{}}})},ya=q.exports={enable:function(){ya.enable=function(){};
Z=!0;var ia=J.f,V=[].splice,Fa={};Fa[ka]=1;ia(Fa).length&&(J.f=function(Ca){Ca=ia(Ca);for(var Ea=0,Ia=Ca.length;Ea<Ia;Ea++)if(Ca[Ea]===ka){V.call(Ca,Ea,1);break}return Ca},A({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:L.f}))},fastKey:function(ia,V){if(!C(ia))return"symbol"==typeof ia?ia:("string"==typeof ia?"S":"P")+ia;if(!F(ia,ka)){if(!ua(ia))return"F";if(!V)return"E";xa(ia)}return ia[ka].objectID},getWeakData:function(ia,V){if(!F(ia,ka)){if(!ua(ia))return!0;if(!V)return!1;xa(ia)}return ia[ka].weakData},
onFreeze:function(ia){da&&Z&&ua(ia)&&!F(ia,ka)&&xa(ia);return ia}};r[ka]=!0},function(q,r,d){var A=d(93),C=d(51),F=d(77);q.exports=function(H,J,L){J=A(J);J in H?C.f(H,J,F(0,L)):H[J]=L}},function(q,r,d){r=d(20);var A=d(33),C=d(63),F=d(46),H=d(142),J=[],L=F("Reflect","construct"),O=/^\s*(?:class|function)\b/,da=O.exec,Z=!O.exec(function(){}),ka=function(ha){if(!A(ha))return!1;try{return L(Object,J,ha),!0}catch(ua){return!1}};d=function(ha){if(!A(ha))return!1;switch(C(ha)){case "AsyncFunction":case "GeneratorFunction":case "AsyncGeneratorFunction":return!1}return Z||
!!da.call(O,H(ha))};q.exports=!L||r(function(){var ha;return ka(ka.call)||!ka(Object)||!ka(function(){ha=!0})||ha})?d:ka},function(q,r,d){var A=d(20);r=d(27);var C=d(79),F=r("species");q.exports=function(H){return 51<=C||!A(function(){var J=[];(J.constructor={})[F]=function(){return{foo:1}};return 1!==J[H](Boolean).foo})}},function(q,r,d){r=d(112);var A=d(94),C=r("keys");q.exports=function(F){return C[F]||(C[F]=A(F))}},function(q,r,d){var A=d(62);q.exports=function(C,F,H,J){J&&J.enumerable?C[F]=H:
A(C,F,H)}},function(q,r,d){q=d(27);r.f=q},function(q,r,d){var A=d(63),C=d(111),F=d(66),H=d(27)("iterator");q.exports=function(J){if(void 0!=J)return C(J,H)||C(J,"@@iterator")||F[A(J)]}},function(q,r,d){q.exports=d(198)},function(q,r,d){q.exports=d(384)},function(q,r,d){var A=d(138);q.exports=function(C,F,H){F in C?A(C,F,{value:H,enumerable:!0,configurable:!0,writable:!0}):C[F]=H;return C};q.exports["default"]=q.exports;q.exports.__esModule=!0},function(q,r,d){var A=d(33),C=d(46);r=d(131);q.exports=
r?function(F){return"symbol"==typeof F}:function(F){var H=C("Symbol");return A(H)&&Object(F)instanceof H}},function(q,r,d){var A=d(79);r=d(20);q.exports=!!Object.getOwnPropertySymbols&&!r(function(){var C=Symbol();return!String(C)||!(Object(C)instanceof Symbol)||!Symbol.sham&&A&&41>A})},function(q,r,d){var A=d(37);q.exports=function(C,F){C=C[F];return null==C?void 0:A(C)}},function(q,r,d){r=d(28);var A=d(113);(q.exports=function(C,F){return A[C]||(A[C]=void 0!==F?F:{})})("versions",[]).push({version:"3.18.3",
mode:r?"pure":"global",copyright:"\u00a9 2021 Denis Pushkarev (zloirock.ru)"})},function(q,r,d){r=d(42);d=d(196);d=r["__core-js_shared__"]||d("__core-js_shared__",{});q.exports=d},function(q,r,d){var A=d(53),C=d(95).f,F={}.toString,H="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];q.exports.f=function(J){if(H&&"[object Window]"==F.call(J))try{var L=C(J)}catch(O){L=H.slice()}else L=C(A(J));return L}},function(q,r,d){var A=d(97),C=Math.min;q.exports=
function(F){return 0<F?C(A(F),9007199254740991):0}},function(q,r){q.exports="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ")},function(q,r,d){r=d(20);q.exports=!r(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(q,r,d){r=d(27)("toStringTag");d={};d[r]="z";q.exports="[object z]"===String(d)},function(q,r,d){q=d(7);var A=d(42),C=d(46),F=d(28),H=d(34),J=d(110),L=d(20),O=d(50),da=d(70),Z=d(33),ka=d(36),ha=d(109),
ua=d(19),xa=d(47),ya=d(53),ia=d(93),V=d(58),Fa=d(77),Ca=d(71),Ea=d(82),Ia=d(95),wa=d(114),Qa=d(120),bb=d(76),db=d(51),vb=d(91);r=d(103);var ob=d(112),cb=d(102),kb=d(81),lb=d(94),oa=d(27),ca=d(104),la=d(29),ra=d(83),Na=d(84),za=d(64).forEach,Ma=cb("hidden");d=oa("toPrimitive");var Xa=Na.set,wb=Na.getterFor("Symbol"),yb=Object.prototype,tb=A.Symbol,Ac=C("JSON","stringify"),Uc=bb.f,kc=db.f,Vc=wa.f,Ad=vb.f,Zb=ob("symbols"),Bc=ob("op-symbols"),Jc=ob("string-to-symbol-registry"),Kc=ob("symbol-to-string-registry");
C=ob("wks");A=A.QObject;var Lc=!A||!A.prototype||!A.prototype.findChild,Cc=H&&L(function(){return 7!=Ca(kc({},"a",{get:function(){return kc(this,"a",{value:7}).a}})).a})?function(Ha,Ra,hb){var zb=Uc(yb,Ra);zb&&delete yb[Ra];kc(Ha,Ra,hb);zb&&Ha!==yb&&kc(yb,Ra,zb)}:kc,Mc=function(Ha,Ra){var hb=Zb[Ha]=Ca(tb.prototype);Xa(hb,{type:"Symbol",tag:Ha,description:Ra});H||(hb.description=Ra);return hb},Dc=function(Ha,Ra,hb){Ha===yb&&Dc(Bc,Ra,hb);ua(Ha);Ra=ia(Ra);ua(hb);return O(Zb,Ra)?(hb.enumerable?(O(Ha,
Ma)&&Ha[Ma][Ra]&&(Ha[Ma][Ra]=!1),hb=Ca(hb,{enumerable:Fa(0,!1)})):(O(Ha,Ma)||kc(Ha,Ma,Fa(1,{})),Ha[Ma][Ra]=!0),Cc(Ha,Ra,hb)):kc(Ha,Ra,hb)},Wc=function(Ha,Ra){ua(Ha);var hb=ya(Ra);Ra=Ea(hb).concat(uc(hb));za(Ra,function(zb){H&&!Nc.call(hb,zb)||Dc(Ha,zb,hb[zb])});return Ha},Nc=function(Ha){Ha=ia(Ha);var Ra=Ad.call(this,Ha);return this===yb&&O(Zb,Ha)&&!O(Bc,Ha)?!1:Ra||!O(this,Ha)||!O(Zb,Ha)||O(this,Ma)&&this[Ma][Ha]?Ra:!0};A=function(Ha,Ra){Ha=ya(Ha);Ra=ia(Ra);if(Ha!==yb||!O(Zb,Ra)||O(Bc,Ra)){var hb=
Uc(Ha,Ra);!hb||!O(Zb,Ra)||O(Ha,Ma)&&Ha[Ma][Ra]||(hb.enumerable=!0);return hb}};ob=function(Ha){Ha=Vc(ya(Ha));var Ra=[];za(Ha,function(hb){O(Zb,hb)||O(kb,hb)||Ra.push(hb)});return Ra};var uc=function(Ha){var Ra=Ha===yb;Ha=Vc(Ra?Bc:ya(Ha));var hb=[];za(Ha,function(zb){!O(Zb,zb)||Ra&&!O(yb,zb)||hb.push(Zb[zb])});return hb};J||(tb=function(){if(this instanceof tb)throw TypeError("Symbol is not a constructor");var Ha=arguments.length&&void 0!==arguments[0]?V(arguments[0]):void 0,Ra=lb(Ha),hb=function(zb){this===
yb&&hb.call(Bc,zb);O(this,Ma)&&O(this[Ma],Ra)&&(this[Ma][Ra]=!1);Cc(this,Ra,Fa(1,zb))};H&&Lc&&Cc(yb,Ra,{configurable:!0,set:hb});return Mc(Ra,Ha)},r(tb.prototype,"toString",function(){return wb(this).tag}),r(tb,"withoutSetter",function(Ha){return Mc(lb(Ha),Ha)}),vb.f=Nc,db.f=Dc,bb.f=A,Ia.f=wa.f=ob,Qa.f=uc,ca.f=function(Ha){return Mc(oa(Ha),Ha)},H&&(kc(tb.prototype,"description",{configurable:!0,get:function(){return wb(this).description}}),F||r(yb,"propertyIsEnumerable",Nc,{unsafe:!0})));q({global:!0,
wrap:!0,forced:!J,sham:!J},{Symbol:tb});za(Ea(C),function(Ha){la(Ha)});q({target:"Symbol",stat:!0,forced:!J},{"for":function(Ha){Ha=V(Ha);if(O(Jc,Ha))return Jc[Ha];var Ra=tb(Ha);Jc[Ha]=Ra;Kc[Ra]=Ha;return Ra},keyFor:function(Ha){if(!ha(Ha))throw TypeError(Ha+" is not a symbol");if(O(Kc,Ha))return Kc[Ha]},useSetter:function(){Lc=!0},useSimple:function(){Lc=!1}});q({target:"Object",stat:!0,forced:!J,sham:!H},{create:function(Ha,Ra){return void 0===Ra?Ca(Ha):Wc(Ca(Ha),Ra)},defineProperty:Dc,defineProperties:Wc,
getOwnPropertyDescriptor:A});q({target:"Object",stat:!0,forced:!J},{getOwnPropertyNames:ob,getOwnPropertySymbols:uc});q({target:"Object",stat:!0,forced:L(function(){Qa.f(1)})},{getOwnPropertySymbols:function(Ha){return Qa.f(xa(Ha))}});Ac&&(F=!J||L(function(){var Ha=tb();return"[null]"!=Ac([Ha])||"{}"!=Ac({a:Ha})||"{}"!=Ac(Object(Ha))}),q({target:"JSON",stat:!0,forced:F},{stringify:function(Ha,Ra,hb){for(var zb=[Ha],vc=1,Xc;arguments.length>vc;)zb.push(arguments[vc++]);Xc=Ra;if((ka(Ra)||void 0!==Ha)&&
!ha(Ha))return da(Ra)||(Ra=function(hd,ib){Z(Xc)&&(ib=Xc.call(this,hd,ib));if(!ha(ib))return ib}),zb[1]=Ra,Ac.apply(null,zb)}}));if(!tb.prototype[d]){var Bd=tb.prototype.valueOf;r(tb.prototype,d,function(){return Bd.apply(this,arguments)})}ra(tb,"Symbol");kb[Ma]=!0},function(q,r){r.f=Object.getOwnPropertySymbols},function(q,r,d){q.exports=d(234)},function(q,r,d){var A=d(7),C=d(28);r=d(154);var F=d(33),H=d(248),J=d(123),L=d(157),O=d(83),da=d(62),Z=d(103),ka=d(27),ha=d(66);d=d(155);var ua=r.PROPER,
xa=r.CONFIGURABLE,ya=d.IteratorPrototype,ia=d.BUGGY_SAFARI_ITERATORS,V=ka("iterator"),Fa=function(){return this};q.exports=function(Ca,Ea,Ia,wa,Qa,bb,db){H(Ia,Ea,wa);wa=function(ra){if(ra===Qa&&lb)return lb;if(!ia&&ra in cb)return cb[ra];switch(ra){case "keys":return function(){return new Ia(this,ra)};case "values":return function(){return new Ia(this,ra)};case "entries":return function(){return new Ia(this,ra)}}return function(){return new Ia(this)}};var vb=Ea+" Iterator",ob=!1,cb=Ca.prototype,kb=
cb[V]||cb["@@iterator"]||Qa&&cb[Qa],lb=!ia&&kb||wa(Qa),oa="Array"==Ea?cb.entries||kb:kb,ca;oa&&(Ca=J(oa.call(new Ca)),Ca!==Object.prototype&&Ca.next&&(C||J(Ca)===ya||(L?L(Ca,ya):F(Ca[V])||Z(Ca,V,Fa)),O(Ca,vb,!0,!0),C&&(ha[vb]=Fa)));ua&&"values"==Qa&&kb&&"values"!==kb.name&&(!C&&xa?da(cb,"name","values"):(ob=!0,lb=function(){return kb.call(this)}));if(Qa){var la={values:wa("values"),keys:bb?lb:wa("keys"),entries:wa("entries")};if(db)for(ca in la)!ia&&!ob&&ca in cb||Z(cb,ca,la[ca]);else A({target:Ea,
proto:!0,forced:ia||ob},la)}C&&!db||cb[V]===lb||Z(cb,V,lb,{name:Qa});ha[Ea]=lb;return la}},function(q,r,d){var A=d(50),C=d(33),F=d(47);r=d(102);d=d(156);var H=r("IE_PROTO"),J=Object.prototype;q.exports=d?Object.getPrototypeOf:function(L){L=F(L);if(A(L,H))return L[H];var O=L.constructor;return C(O)&&L instanceof O?O.prototype:L instanceof Object?J:null}},function(q,r,d){var A=d(100),C=d(132);q.exports=function(F){if(A(F))return F;throw TypeError(C(F)+" is not a constructor");}},function(q,r,d){function A(F,
H){q.exports=A=C||function(J,L){J.__proto__=L;return J};q.exports["default"]=q.exports;q.exports.__esModule=!0;return A(F,H)}var C=d(169);q.exports=A;q.exports["default"]=q.exports;q.exports.__esModule=!0},function(q,r,d){var A=d(19),C=d(124),F=d(27)("species");q.exports=function(H,J){H=A(H).constructor;var L;return void 0===H||void 0==(L=A(H)[F])?J:C(L)}},function(q,r,d){q.exports=d(416)},function(q,r,d){q.exports=d(442)},function(q,r,d){q.exports=d(444)},function(q,r,d){q.exports=d(452)},function(q,
r,d){r=d(110);q.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(q,r){q.exports=function(d){try{return String(d)}catch(A){return"Object"}}},function(q,r,d){r=d(34);var A=d(20),C=d(134);q.exports=!r&&!A(function(){return 7!=Object.defineProperty(C("div"),"a",{get:function(){return 7}}).a})},function(q,r,d){r=d(42);d=d(36);var A=r.document,C=d(A)&&d(A.createElement);q.exports=function(F){return C?A.createElement(F):{}}},function(q,r){q.exports=Math.sign||function(d){return 0==(d=
+d)||d!=d?d:0>d?-1:1}},function(q,r,d){var A=d(50),C=d(53),F=d(137).indexOf,H=d(81);q.exports=function(J,L){J=C(J);var O=0,da=[],Z;for(Z in J)!A(H,Z)&&A(J,Z)&&da.push(Z);for(;L.length>O;)A(J,Z=L[O++])&&(~F(da,Z)||da.push(Z));return da}},function(q,r,d){var A=d(53),C=d(96),F=d(55);r=function(H){return function(J,L,O){J=A(J);var da=F(J);O=C(O,da);if(H&&L!=L)for(;da>O;){if(L=J[O++],L!=L)return!0}else for(;da>O;O++)if((H||O in J)&&J[O]===L)return H||O||0;return!H&&-1}};q.exports={includes:r(!0),indexOf:r(!1)}},
function(q,r,d){q.exports=d(211)},function(q,r,d){r=d(212);q.exports=r},function(q,r,d){q=d(7);var A=d(20),C=d(70),F=d(36),H=d(47),J=d(55),L=d(99),O=d(141);r=d(101);var da=d(27);d=d(79);var Z=da("isConcatSpreadable");d=51<=d||!A(function(){var ka=[];ka[Z]=!1;return ka.concat()[0]!==ka});r=r("concat");q({target:"Array",proto:!0,forced:!d||!r},{concat:function(ka){var ha=H(this),ua=O(ha,0),xa=0,ya;var ia=-1;for(ya=arguments.length;ia<ya;ia++){var V=-1===ia?ha:arguments[ia];var Fa=V;if(F(Fa)){var Ca=
Fa[Z];Fa=void 0!==Ca?!!Ca:C(Fa)}else Fa=!1;if(Fa){Ca=J(V);if(9007199254740991<xa+Ca)throw TypeError("Maximum allowed index exceeded");for(Fa=0;Fa<Ca;Fa++,xa++)Fa in V&&L(ua,xa,V[Fa])}else{if(9007199254740991<=xa)throw TypeError("Maximum allowed index exceeded");L(ua,xa++,V)}}ua.length=xa;return ua}})},function(q,r,d){var A=d(223);q.exports=function(C,F){return new (A(C))(0===F?0:F)}},function(q,r,d){r=d(33);d=d(113);var A=Function.toString;r(d.inspectSource)||(d.inspectSource=function(C){return A.call(C)});
q.exports=d.inspectSource},function(q,r,d){r=d(34);var A=d(51),C=d(19),F=d(82);q.exports=r?Object.defineProperties:function(H,J){C(H);for(var L=F(J),O=L.length,da=0,Z;O>da;)A.f(H,Z=L[da++],J[Z]);return H}},function(q,r,d){q.exports=d(230)},function(q,r,d){r=d(231);q.exports=r},function(q,r){q.exports=function(d,A){if(null==A||A>d.length)A=d.length;for(var C=0,F=Array(A);C<A;C++)F[C]=d[C];return F};q.exports["default"]=q.exports;q.exports.__esModule=!0},function(q,r,d){r=d(235);d(59);q.exports=r},
function(q,r,d){d(29)("iterator")},function(q,r,d){d(29)("toStringTag")},function(q,r,d){q=d(42);d(83)(q.JSON,"JSON",!0)},function(q,r){},function(q,r){},function(q,r){q.exports=function(){}},function(q,r,d){r=d(34);var A=d(50);d=Function.prototype;var C=r&&Object.getOwnPropertyDescriptor,F=(A=A(d,"name"))&&"something"===function(){}.name;r=A&&(!r||r&&C(d,"name").configurable);q.exports={EXISTS:A,PROPER:F,CONFIGURABLE:r}},function(q,r,d){r=d(20);var A=d(33),C=d(71),F=d(123),H=d(103),J=d(27);d=d(28);
var L=J("iterator");J=!1;var O;if([].keys){var da=[].keys();"next"in da?(F=F(F(da)),F!==Object.prototype&&(O=F)):J=!0}void 0==O||r(function(){var Z={};return O[L].call(Z)!==Z})?O={}:d&&(O=C(O));A(O[L])||H(O,L,function(){return this});q.exports={IteratorPrototype:O,BUGGY_SAFARI_ITERATORS:J}},function(q,r,d){r=d(20);q.exports=!r(function(){function A(){}A.prototype.constructor=null;return Object.getPrototypeOf(new A)!==A.prototype})},function(q,r,d){var A=d(19),C=d(249);q.exports=Object.setPrototypeOf||
("__proto__"in{}?function(){var F=!1,H={};try{var J=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set;J.call(H,[]);F=H instanceof Array}catch(L){}return function(L,O){A(L);C(O);F?J.call(L,O):L.__proto__=O;return L}}():void 0)},function(q,r,d){var A=d(97),C=d(58),F=d(61);r=function(H){return function(J,L){J=C(F(J));L=A(L);var O=J.length,da;if(0>L||L>=O)return H?"":void 0;var Z=J.charCodeAt(L);return 55296>Z||56319<Z||L+1===O||56320>(da=J.charCodeAt(L+1))||57343<da?H?J.charAt(L):Z:H?
J.slice(L,L+2):(Z-55296<<10)+(da-56320)+65536}};q.exports={codeAt:r(!1),charAt:r(!0)}},function(q,r,d){q.exports=d(261)},function(q,r,d){r=d(262);q.exports=r},function(q,r,d){var A=d(19),C=d(111);q.exports=function(F,H,J){A(F);try{var L=C(F,"return");if(!L){if("throw"===H)throw J;return J}L=L.call(F)}catch(da){var O=!0;L=da}if("throw"===H)throw J;if(O)throw L;A(L);return J}},function(q,r,d){r=d(27);var A=d(66),C=r("iterator"),F=Array.prototype;q.exports=function(H){return void 0!==H&&(A.Array===H||
F[C]===H)}},function(q,r,d){var A=d(267),C=d(159),F=d(146);q.exports=function(H,J){var L;if(H){if("string"===typeof H)return F(H,J);var O=A(L=Object.prototype.toString.call(H)).call(L,8,-1);"Object"===O&&H.constructor&&(O=H.constructor.name);if("Map"===O||"Set"===O)return C(H);if("Arguments"===O||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return F(H,J)}};q.exports["default"]=q.exports;q.exports.__esModule=!0},function(q,r,d){r=d(269);q.exports=r},function(q,r,d){r=d(275);d(59);q.exports=r},
function(q,r,d){r=d(297);q.exports=r},function(q,r,d){var A=d(37),C=d(36),F=[].slice,H={};q.exports=Function.bind||function(J){var L=A(this),O=F.call(arguments,1),da=function(){var Z=O.concat(F.call(arguments));if(this instanceof da){var ka=Z.length;if(!(ka in H)){for(var ha=[],ua=0;ua<ka;ua++)ha[ua]="a["+ua+"]";H[ka]=Function("C,a","return new C("+ha.join(",")+")")}Z=H[ka](L,Z)}else Z=L.apply(J,Z);return Z};C(L.prototype)&&(da.prototype=L.prototype);return da}},function(q,r,d){q.exports=d(302)},
function(q,r,d){q.exports=d(306)},function(q,r,d){r=d(307);q.exports=r},function(q,r,d){r=d(311);q.exports=r},function(q,r,d){r=d(315);d(59);q.exports=r},function(q,r,d){var A=d(7),C=d(42),F=d(98),H=d(20),J=d(62),L=d(38),O=d(174),da=d(33),Z=d(36),ka=d(83),ha=d(51).f,ua=d(64).forEach,xa=d(34);r=d(84);var ya=r.set,ia=r.getterFor;q.exports=function(V,Fa,Ca){var Ea=-1!==V.indexOf("Map"),Ia=-1!==V.indexOf("Weak"),wa=Ea?"set":"add",Qa=C[V],bb=Qa&&Qa.prototype,db={};if(xa&&da(Qa)&&(Ia||bb.forEach&&!H(function(){(new Qa).entries().next()}))){var vb=
Fa(function(cb,kb){ya(O(cb,vb,V),{type:V,collection:new Qa});void 0!=kb&&L(kb,cb[wa],{that:cb,AS_ENTRIES:Ea})});var ob=ia(V);ua("add clear delete forEach get has set keys values entries".split(" "),function(cb){var kb="add"==cb||"set"==cb;cb in bb&&(!Ia||"clear"!=cb)&&J(vb.prototype,cb,function(lb,oa){var ca=ob(this).collection;if(!kb&&Ia&&!Z(lb))return"get"==cb?void 0:!1;lb=ca[cb](0===lb?0:lb,oa);return kb?this:lb})});Ia||ha(vb.prototype,"size",{configurable:!0,get:function(){return ob(this).collection.size}})}else vb=
Ca.getConstructor(Fa,V,Ea,wa),F.enable();ka(vb,V,!1,!0);db[V]=vb;A({global:!0,forced:!0},db);Ia||Ca.setStrong(vb,V,Ea);return vb}},function(q,r){q.exports=function(d,A,C){if(d instanceof A)return d;throw TypeError("Incorrect "+(C?C+" ":"")+"invocation");}},function(q,r,d){var A=d(51).f,C=d(71),F=d(317),H=d(45),J=d(174),L=d(38),O=d(122),da=d(318),Z=d(34),ka=d(98).fastKey;r=d(84);var ha=r.set,ua=r.getterFor;q.exports={getConstructor:function(xa,ya,ia,V){var Fa=xa(function(wa,Qa){J(wa,Fa,ya);ha(wa,{type:ya,
index:C(null),first:void 0,last:void 0,size:0});Z||(wa.size=0);void 0!=Qa&&L(Qa,wa[V],{that:wa,AS_ENTRIES:ia})}),Ca=ua(ya),Ea=function(wa,Qa,bb){var db=Ca(wa),vb=Ia(wa,Qa),ob,cb;vb?vb.value=bb:(db.last=vb={index:cb=ka(Qa,!0),key:Qa,value:bb,previous:ob=db.last,next:void 0,removed:!1},db.first||(db.first=vb),ob&&(ob.next=vb),Z?db.size++:wa.size++,"F"!==cb&&(db.index[cb]=vb));return wa},Ia=function(wa,Qa){wa=Ca(wa);var bb=ka(Qa);if("F"!==bb)return wa.index[bb];for(wa=wa.first;wa;wa=wa.next)if(wa.key==
Qa)return wa};F(Fa.prototype,{clear:function(){for(var wa=Ca(this),Qa=wa.index,bb=wa.first;bb;)bb.removed=!0,bb.previous&&(bb.previous=bb.previous.next=void 0),delete Qa[bb.index],bb=bb.next;wa.first=wa.last=void 0;Z?wa.size=0:this.size=0},"delete":function(wa){var Qa=Ca(this);if(wa=Ia(this,wa)){var bb=wa.next,db=wa.previous;delete Qa.index[wa.index];wa.removed=!0;db&&(db.next=bb);bb&&(bb.previous=db);Qa.first==wa&&(Qa.first=bb);Qa.last==wa&&(Qa.last=db);Z?Qa.size--:this.size--}return!!wa},forEach:function(wa){for(var Qa=
Ca(this),bb=H(wa,1<arguments.length?arguments[1]:void 0,3),db;db=db?db.next:Qa.first;)for(bb(db.value,db.key,this);db&&db.removed;)db=db.previous},has:function(wa){return!!Ia(this,wa)}});F(Fa.prototype,ia?{get:function(wa){return(wa=Ia(this,wa))&&wa.value},set:function(wa,Qa){return Ea(this,0===wa?0:wa,Qa)}}:{add:function(wa){return Ea(this,wa=0===wa?0:wa,wa)}});Z&&A(Fa.prototype,"size",{get:function(){return Ca(this).size}});return Fa},setStrong:function(xa,ya,ia){var V=ya+" Iterator",Fa=ua(ya),
Ca=ua(V);O(xa,ya,function(Ea,Ia){ha(this,{type:V,target:Ea,state:Fa(Ea),kind:Ia,last:void 0})},function(){for(var Ea=Ca(this),Ia=Ea.kind,wa=Ea.last;wa&&wa.removed;)wa=wa.previous;return Ea.target&&(Ea.last=wa=wa?wa.next:Ea.state.first)?"keys"==Ia?{value:wa.key,done:!1}:"values"==Ia?{value:wa.value,done:!1}:{value:[wa.key,wa.value],done:!1}:(Ea.target=void 0,{value:void 0,done:!0})},ia?"entries":"values",!ia,!0);da(ya)}}},function(q,r,d){var A=d(33),C=d(19);q.exports=function(F,H){var J=C(this),L=
2<arguments.length?arguments[2]:void 0;if(!A(H)&&!A(L))throw TypeError("At least one callback required");if(J.has(F)){var O=J.get(F);A(H)&&(O=H(O),J.set(F,O))}else A(L)&&(O=L(),J.set(F,O));return O}},function(q,r,d){q.exports=d(352)},function(q,r,d){r=d(355);q.exports=r},function(q,r){q.exports="\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},function(q,r,d){q.exports=d(202)},function(q,r,d){q.exports=d(283)},function(q,
r,d){q.exports=d(370)},function(q,r,d){q.exports=d(374)},function(q,r,d){q.exports=d(388)},function(q,r,d){q.exports=d(403)},function(q,r,d){q.exports=d(172)},function(q,r,d){q.exports=d(178)},function(q,r,d){q.exports=d(456)},function(q,r,d){q.exports=d(459)},function(q,r,d){r=d(191);q.exports=r},function(q,r,d){d(192);q.exports=Math.pow(2,-52)},function(q,r,d){d(7)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},function(q,r){r=function(){return this}();try{r=r||(new Function("return this"))()}catch(d){"object"===
typeof window&&(r=window)}q.exports=r},function(q,r,d){var A=d(36),C=d(109),F=d(111),H=d(195),J=d(27)("toPrimitive");q.exports=function(L,O){if(!A(L)||C(L))return L;var da=F(L,J);if(da){void 0===O&&(O="default");L=da.call(L,O);if(!A(L)||C(L))return L;throw TypeError("Can't convert object to primitive value");}void 0===O&&(O="number");return H(L,O)}},function(q,r,d){var A=d(33),C=d(36);q.exports=function(F,H){var J,L;if("string"===H&&A(J=F.toString)&&!C(L=J.call(F))||A(J=F.valueOf)&&!C(L=J.call(F))||
"string"!==H&&A(J=F.toString)&&!C(L=J.call(F)))return L;throw TypeError("Can't convert object to primitive value");}},function(q,r,d){var A=d(42);q.exports=function(C,F){try{Object.defineProperty(A,C,{value:F,configurable:!0,writable:!0})}catch(H){A[C]=F}return F}},function(q,r,d){var A=d(20),C=d(33),F=/#|\.prototype\./;r=function(da,Z){da=J[H(da)];return da==O?!0:da==L?!1:C(Z)?A(Z):!!Z};var H=r.normalize=function(da){return String(da).replace(F,".").toLowerCase()},J=r.data={},L=r.NATIVE="N",O=r.POLYFILL=
"P";q.exports=r},function(q,r,d){r=d(199);q.exports=r},function(q,r,d){d(200);r=d(13);q.exports=r.Math.fround},function(q,r,d){q=d(7);d=d(201);q({target:"Math",stat:!0},{fround:d})},function(q,r,d){var A=d(135),C=Math.abs;r=Math.pow;var F=r(2,-52),H=r(2,-23),J=r(2,127)*(2-H),L=r(2,-126);q.exports=Math.fround||function(O){var da=C(O);O=A(O);if(da<L)return O*(da/L/H+1/F-1/F)*L*H;var Z=(1+H/F)*da;da=Z-(Z-da);return da>J||da!=da?Infinity*O:O*da}},function(q,r,d){r=d(203);q.exports=r},function(q,r,d){d(204);
var A=d(13).Object;q.exports=function(C){return A.getOwnPropertyNames(C)}},function(q,r,d){q=d(7);r=d(20);d=d(114).f;r=r(function(){return!Object.getOwnPropertyNames(1)});q({target:"Object",stat:!0,forced:r},{getOwnPropertyNames:d})},function(q,r,d){r=d(206);q.exports=r},function(q,r,d){var A=d(207),C=Array.prototype;q.exports=function(F){var H=F.reduce;return F===C||F instanceof Array&&H===C.reduce?A:H}},function(q,r,d){d(208);r=d(35);q.exports=r("Array").reduce},function(q,r,d){q=d(7);var A=d(209).left,
C=d(69);r=d(79);d=d(210);C=C("reduce");q({target:"Array",proto:!0,forced:!C||!d&&79<r&&83>r},{reduce:function(F){return A(this,F,arguments.length,1<arguments.length?arguments[1]:void 0)}})},function(q,r,d){var A=d(37),C=d(47),F=d(92),H=d(55);r=function(J){return function(L,O,da,Z){A(O);L=C(L);var ka=F(L),ha=H(L),ua=J?ha-1:0,xa=J?-1:1;if(2>da)for(;;){if(ua in ka){Z=ka[ua];ua+=xa;break}ua+=xa;if(J?0>ua:ha<=ua)throw TypeError("Reduce of empty array with no initial value");}for(;J?0<=ua:ha>ua;ua+=xa)ua in
ka&&(Z=O(Z,ka[ua],ua,L));return Z}};q.exports={left:r(!1),right:r(!0)}},function(q,r,d){r=d(78);d=d(42);q.exports="process"==r(d.process)},function(q,r,d){r=d(139);q.exports=r},function(q,r,d){d(213);var A=d(13).Object;q=q.exports=function(C,F,H){return A.defineProperty(C,F,H)};A.defineProperty.sham&&(q.sham=!0)},function(q,r,d){q=d(7);r=d(34);d=d(51);q({target:"Object",stat:!0,forced:!r,sham:!r},{defineProperty:d.f})},function(q,r,d){r=d(215);q.exports=r},function(q,r,d){d(216);r=d(13);q.exports=
r.Object.freeze},function(q,r,d){q=d(7);r=d(117);var A=d(20),C=d(36),F=d(98).onFreeze,H=Object.freeze;d=A(function(){H(1)});q({target:"Object",stat:!0,forced:d,sham:!r},{freeze:function(J){return H&&C(J)?H(F(J)):J}})},function(q,r,d){r=d(218);q.exports=r},function(q,r,d){d(219);r=d(13);q.exports=r.Math.hypot},function(q,r,d){q=d(7);r=Math.hypot;var A=Math.abs,C=Math.sqrt;r=!!r&&Infinity!==r(Infinity,NaN);q({target:"Math",stat:!0,forced:r},{hypot:function(F,H){for(var J=0,L=0,O=arguments.length,da=
0,Z,ka;L<O;)Z=A(arguments[L++]),da<Z?(ka=da/Z,J=J*ka*ka+1,da=Z):0<Z?(ka=Z/da,J+=ka*ka):J+=Z;return Infinity===da?Infinity:da*C(J)}})},function(q,r,d){r=d(221);q.exports=r},function(q,r,d){var A=d(222),C=Array.prototype;q.exports=function(F){var H=F.concat;return F===C||F instanceof Array&&H===C.concat?A:H}},function(q,r,d){d(140);r=d(35);q.exports=r("Array").concat},function(q,r,d){var A=d(70),C=d(100),F=d(36),H=d(27)("species");q.exports=function(J){if(A(J)){var L=J.constructor;C(L)&&(L===Array||
A(L.prototype))?L=void 0:F(L)&&(L=L[H],null===L&&(L=void 0))}return void 0===L?Array:L}},function(q,r,d){r=d(225);q.exports=r},function(q,r,d){d(119);r=d(13);q.exports=r.Symbol["for"]},function(q,r,d){r=d(46);q.exports=r("document","documentElement")},function(q,r,d){r=d(118);var A=d(63);q.exports=r?{}.toString:function(){return"[object "+A(this)+"]"}},function(q,r,d){var A=d(42);r=d(33);d=d(142);A=A.WeakMap;q.exports=r(A)&&/native code/.test(d(A))},function(q,r,d){var A=d(144),C=d(146);q.exports=
function(F){if(A(F))return C(F)};q.exports["default"]=q.exports;q.exports.__esModule=!0},function(q,r,d){r=d(145);q.exports=r},function(q,r,d){d(232);r=d(13);q.exports=r.Array.isArray},function(q,r,d){q=d(7);d=d(70);q({target:"Array",stat:!0},{isArray:d})},function(q,r,d){var A=d(121),C=d(16),F=d(159);q.exports=function(H){if("undefined"!==typeof A&&null!=C(H)||null!=H["@@iterator"])return F(H)};q.exports["default"]=q.exports;q.exports.__esModule=!0},function(q,r,d){r=d(147);d(251);d(252);d(253);
d(254);d(255);d(256);d(257);q.exports=r},function(q,r,d){d(140);d(85);d(119);d(236);d(237);d(238);d(239);d(148);d(240);d(241);d(242);d(243);d(244);d(245);d(246);d(149);d(247);d(150);d(151);d(152);r=d(13);q.exports=r.Symbol},function(q,r,d){d(29)("asyncIterator")},function(q,r){},function(q,r,d){d(29)("hasInstance")},function(q,r,d){d(29)("isConcatSpreadable")},function(q,r,d){d(29)("match")},function(q,r,d){d(29)("matchAll")},function(q,r,d){d(29)("replace")},function(q,r,d){d(29)("search")},function(q,
r,d){d(29)("species")},function(q,r,d){d(29)("split")},function(q,r,d){d(29)("toPrimitive")},function(q,r,d){d(29)("unscopables")},function(q,r,d){var A=d(155).IteratorPrototype,C=d(71),F=d(77),H=d(83),J=d(66),L=function(){return this};q.exports=function(O,da,Z){da+=" Iterator";O.prototype=C(A,{next:F(1,Z)});H(O,da,!1,!0);J[da]=L;return O}},function(q,r,d){var A=d(33);q.exports=function(C){if("object"===typeof C||A(C))return C;throw TypeError("Can't set "+String(C)+" as a prototype");}},function(q,
r){q.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,
TouchList:0}},function(q,r,d){d(29)("asyncDispose")},function(q,r,d){d(29)("dispose")},function(q,r,d){d(29)("matcher")},function(q,r,d){d(29)("metadata")},function(q,r,d){d(29)("observable")},function(q,r,d){d(29)("patternMatch")},function(q,r,d){d(29)("replaceAll")},function(q,r,d){r=d(259);q.exports=r},function(q,r,d){r=d(260);d(59);q.exports=r},function(q,r,d){d(65);d(67);r=d(105);q.exports=r},function(q,r,d){r=d(160);q.exports=r},function(q,r,d){d(67);d(263);r=d(13);q.exports=r.Array.from},function(q,
r,d){q=d(7);r=d(264);d=!d(266)(function(A){Array.from(A)});q({target:"Array",stat:!0,forced:d},{from:r})},function(q,r,d){var A=d(45),C=d(47),F=d(265),H=d(162),J=d(100),L=d(55),O=d(99),da=d(86),Z=d(105);q.exports=function(ka){var ha=C(ka),ua=J(this),xa=arguments.length,ya=1<xa?arguments[1]:void 0,ia=void 0!==ya;ia&&(ya=A(ya,2<xa?arguments[2]:void 0,2));var V=Z(ha);xa=0;if(!V||this==Array&&H(V))for(V=L(ha),ua=ua?new this(V):Array(V);V>xa;xa++){var Fa=ia?ya(ha[xa],xa):ha[xa];O(ua,xa,Fa)}else for(ha=
da(ha,V),V=ha.next,ua=ua?new this:[];!(Fa=V.call(ha)).done;xa++)Fa=ia?F(ha,ya,[Fa.value,xa],!0):Fa.value,O(ua,xa,Fa);ua.length=xa;return ua}},function(q,r,d){var A=d(19),C=d(161);q.exports=function(F,H,J,L){try{return L?H(A(J)[0],J[1]):H(J)}catch(O){C(F,"throw",O)}}},function(q,r,d){var A=d(27)("iterator"),C=!1;try{var F=0;r={next:function(){return{done:!!F++}},"return":function(){C=!0}};r[A]=function(){return this};Array.from(r,function(){throw 2;})}catch(H){}q.exports=function(H,J){if(!J&&!C)return!1;
var L=!1;try{J={},J[A]=function(){return{next:function(){return{done:L=!0}}}},H(J)}catch(O){}return L}},function(q,r,d){q.exports=d(268)},function(q,r,d){r=d(164);q.exports=r},function(q,r,d){var A=d(270),C=Array.prototype;q.exports=function(F){var H=F.slice;return F===C||F instanceof Array&&H===C.slice?A:H}},function(q,r,d){d(271);r=d(35);q.exports=r("Array").slice},function(q,r,d){q=d(7);var A=d(70),C=d(100),F=d(36),H=d(96),J=d(55),L=d(53),O=d(99);r=d(27);d=d(101)("slice");var da=r("species"),Z=
[].slice,ka=Math.max;q({target:"Array",proto:!0,forced:!d},{slice:function(ha,ua){var xa=L(this),ya=J(xa);ha=H(ha,ya);ua=H(void 0===ua?ya:ua,ya);if(A(xa)){var ia=xa.constructor;C(ia)&&(ia===Array||A(ia.prototype))?ia=void 0:F(ia)&&(ia=ia[da],null===ia&&(ia=void 0));if(ia===Array||void 0===ia)return Z.call(xa,ha,ua)}ia=new (void 0===ia?Array:ia)(ka(ua-ha,0));for(ya=0;ha<ua;ha++,ya++)ha in xa&&O(ia,ya,xa[ha]);ia.length=ya;return ia}})},function(q,r){q.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
};q.exports["default"]=q.exports;q.exports.__esModule=!0},function(q,r,d){q.exports=d(274)},function(q,r,d){r=d(165);q.exports=r},function(q,r,d){d(65);d(85);d(67);d(148);r=d(104);q.exports=r.f("iterator")},function(q,r,d){q=function(A){function C(ca,la,ra){Object.defineProperty(ca,la,{value:ra,enumerable:!0,configurable:!0,writable:!0});return ca[la]}function F(ca,la,ra,Na){la=Object.create((la&&la.prototype instanceof J?la:J).prototype);Na=new ya(Na||[]);la._invoke=ka(ca,ra,Na);return la}function H(ca,
la,ra){try{return{type:"normal",arg:ca.call(la,ra)}}catch(Na){return{type:"throw",arg:Na}}}function J(){}function L(){}function O(){}function da(ca){["next","throw","return"].forEach(function(la){C(ca,la,function(ra){return this._invoke(la,ra)})})}function Z(ca,la){function ra(za,Ma,Xa,wb){za=H(ca[za],ca,Ma);if("throw"===za.type)wb(za.arg);else{var yb=za.arg;return(za=yb.value)&&"object"===typeof za&&Ca.call(za,"__await")?la.resolve(za.__await).then(function(tb){ra("next",tb,Xa,wb)},function(tb){ra("throw",
tb,Xa,wb)}):la.resolve(za).then(function(tb){yb.value=tb;Xa(yb)},function(tb){return ra("throw",tb,Xa,wb)})}}var Na;this._invoke=function(za,Ma){function Xa(){return new la(function(wb,yb){ra(za,Ma,wb,yb)})}return Na=Na?Na.then(Xa,Xa):Xa()}}function ka(ca,la,ra){var Na=db;return function(za,Ma){if(Na===ob)throw Error("Generator is already running");if(Na===cb){if("throw"===za)throw Ma;return V()}ra.method=za;for(ra.arg=Ma;;){if(za=ra.delegate)if(za=ha(za,ra)){if(za===kb)continue;return za}if("next"===
ra.method)ra.sent=ra._sent=ra.arg;else if("throw"===ra.method){if(Na===db)throw Na=cb,ra.arg;ra.dispatchException(ra.arg)}else"return"===ra.method&&ra.abrupt("return",ra.arg);Na=ob;za=H(ca,la,ra);if("normal"===za.type){Na=ra.done?cb:vb;if(za.arg===kb)continue;return{value:za.arg,done:ra.done}}"throw"===za.type&&(Na=cb,ra.method="throw",ra.arg=za.arg)}}}function ha(ca,la){var ra=ca.iterator[la.method];if(ra===Ea){la.delegate=null;if("throw"===la.method){if(ca.iterator["return"]&&(la.method="return",
la.arg=Ea,ha(ca,la),"throw"===la.method))return kb;la.method="throw";la.arg=new TypeError("The iterator does not provide a 'throw' method")}return kb}ra=H(ra,ca.iterator,la.arg);if("throw"===ra.type)return la.method="throw",la.arg=ra.arg,la.delegate=null,kb;ra=ra.arg;if(!ra)return la.method="throw",la.arg=new TypeError("iterator result is not an object"),la.delegate=null,kb;if(ra.done)la[ca.resultName]=ra.value,la.next=ca.nextLoc,"return"!==la.method&&(la.method="next",la.arg=Ea);else return ra;la.delegate=
null;return kb}function ua(ca){var la={tryLoc:ca[0]};1 in ca&&(la.catchLoc=ca[1]);2 in ca&&(la.finallyLoc=ca[2],la.afterLoc=ca[3]);this.tryEntries.push(la)}function xa(ca){var la=ca.completion||{};la.type="normal";delete la.arg;ca.completion=la}function ya(ca){this.tryEntries=[{tryLoc:"root"}];ca.forEach(ua,this);this.reset(!0)}function ia(ca){if(ca){var la=ca[wa];if(la)return la.call(ca);if("function"===typeof ca.next)return ca;if(!isNaN(ca.length)){var ra=-1;la=function za(){for(;++ra<ca.length;)if(Ca.call(ca,
ra))return za.value=ca[ra],za.done=!1,za;za.value=Ea;za.done=!0;return za};return la.next=la}}return{next:V}}function V(){return{value:Ea,done:!0}}var Fa=Object.prototype,Ca=Fa.hasOwnProperty,Ea,Ia="function"===typeof Symbol?Symbol:{},wa=Ia.iterator||"@@iterator",Qa=Ia.asyncIterator||"@@asyncIterator",bb=Ia.toStringTag||"@@toStringTag";try{C({},"")}catch(ca){C=function(la,ra,Na){return la[ra]=Na}}A.wrap=F;var db="suspendedStart",vb="suspendedYield",ob="executing",cb="completed",kb={};Ia={};C(Ia,wa,
function(){return this});var lb=Object.getPrototypeOf;(lb=lb&&lb(lb(ia([]))))&&lb!==Fa&&Ca.call(lb,wa)&&(Ia=lb);var oa=O.prototype=J.prototype=Object.create(Ia);L.prototype=O;C(oa,"constructor",O);C(O,"constructor",L);L.displayName=C(O,bb,"GeneratorFunction");A.isGeneratorFunction=function(ca){return(ca="function"===typeof ca&&ca.constructor)?ca===L||"GeneratorFunction"===(ca.displayName||ca.name):!1};A.mark=function(ca){Object.setPrototypeOf?Object.setPrototypeOf(ca,O):(ca.__proto__=O,C(ca,bb,"GeneratorFunction"));
ca.prototype=Object.create(oa);return ca};A.awrap=function(ca){return{__await:ca}};da(Z.prototype);C(Z.prototype,Qa,function(){return this});A.AsyncIterator=Z;A.async=function(ca,la,ra,Na,za){void 0===za&&(za=Promise);var Ma=new Z(F(ca,la,ra,Na),za);return A.isGeneratorFunction(la)?Ma:Ma.next().then(function(Xa){return Xa.done?Xa.value:Ma.next()})};da(oa);C(oa,bb,"Generator");C(oa,wa,function(){return this});C(oa,"toString",function(){return"[object Generator]"});A.keys=function(ca){var la=[],ra;
for(ra in ca)la.push(ra);la.reverse();return function za(){for(;la.length;){var Ma=la.pop();if(Ma in ca)return za.value=Ma,za.done=!1,za}za.done=!0;return za}};A.values=ia;ya.prototype={constructor:ya,reset:function(ca){this.next=this.prev=0;this.sent=this._sent=Ea;this.done=!1;this.delegate=null;this.method="next";this.arg=Ea;this.tryEntries.forEach(xa);if(!ca)for(var la in this)"t"===la.charAt(0)&&Ca.call(this,la)&&!isNaN(+la.slice(1))&&(this[la]=Ea)},stop:function(){this.done=!0;var ca=this.tryEntries[0].completion;
if("throw"===ca.type)throw ca.arg;return this.rval},dispatchException:function(ca){function la(yb,tb){Ma.type="throw";Ma.arg=ca;ra.next=yb;tb&&(ra.method="next",ra.arg=Ea);return!!tb}if(this.done)throw ca;for(var ra=this,Na=this.tryEntries.length-1;0<=Na;--Na){var za=this.tryEntries[Na],Ma=za.completion;if("root"===za.tryLoc)return la("end");if(za.tryLoc<=this.prev){var Xa=Ca.call(za,"catchLoc"),wb=Ca.call(za,"finallyLoc");if(Xa&&wb){if(this.prev<za.catchLoc)return la(za.catchLoc,!0);if(this.prev<
za.finallyLoc)return la(za.finallyLoc)}else if(Xa){if(this.prev<za.catchLoc)return la(za.catchLoc,!0)}else if(wb){if(this.prev<za.finallyLoc)return la(za.finallyLoc)}else throw Error("try statement without catch or finally");}}},abrupt:function(ca,la){for(var ra=this.tryEntries.length-1;0<=ra;--ra){var Na=this.tryEntries[ra];if(Na.tryLoc<=this.prev&&Ca.call(Na,"finallyLoc")&&this.prev<Na.finallyLoc){var za=Na;break}}za&&("break"===ca||"continue"===ca)&&za.tryLoc<=la&&la<=za.finallyLoc&&(za=null);
ra=za?za.completion:{};ra.type=ca;ra.arg=la;return za?(this.method="next",this.next=za.finallyLoc,kb):this.complete(ra)},complete:function(ca,la){if("throw"===ca.type)throw ca.arg;"break"===ca.type||"continue"===ca.type?this.next=ca.arg:"return"===ca.type?(this.rval=this.arg=ca.arg,this.method="return",this.next="end"):"normal"===ca.type&&la&&(this.next=la);return kb},finish:function(ca){for(var la=this.tryEntries.length-1;0<=la;--la){var ra=this.tryEntries[la];if(ra.finallyLoc===ca)return this.complete(ra.completion,
ra.afterLoc),xa(ra),kb}},"catch":function(ca){for(var la=this.tryEntries.length-1;0<=la;--la){var ra=this.tryEntries[la];if(ra.tryLoc===ca){ca=ra.completion;if("throw"===ca.type){var Na=ca.arg;xa(ra)}return Na}}throw Error("illegal catch attempt");},delegateYield:function(ca,la,ra){this.delegate={iterator:ia(ca),resultName:la,nextLoc:ra};"next"===this.method&&(this.arg=Ea);return kb}};return A}(q.exports);try{regeneratorRuntime=q}catch(A){"object"===typeof globalThis?globalThis.regeneratorRuntime=
q:Function("r","regeneratorRuntime = r")(q)}},function(q,r,d){r=d(278);q.exports=r},function(q,r,d){d(279);r=d(13);q.exports=r.Object.seal},function(q,r,d){q=d(7);var A=d(36),C=d(98).onFreeze;r=d(117);d=d(20);var F=Object.seal;d=d(function(){F(1)});q({target:"Object",stat:!0,forced:d,sham:!r},{seal:function(H){return F&&A(H)?F(C(H)):H}})},function(q,r,d){r=d(281);q.exports=r},function(q,r,d){r=d(282);d(59);q.exports=r},function(q,r,d){d(65);d(67);r=d(86);q.exports=r},function(q,r,d){r=d(284);q.exports=
r},function(q,r,d){d(150);d(151);d(85);d(152);d(149);r=d(104);q.exports=r.f("toStringTag")},function(q,r,d){(function(A){function C(oa,ca){var la={seen:[],stylize:H};3<=arguments.length&&(la.depth=arguments[2]);4<=arguments.length&&(la.colors=arguments[3]);xa(ca)?la.showHidden=ca:ca&&r._extend(la,ca);V(la.showHidden)&&(la.showHidden=!1);V(la.depth)&&(la.depth=2);V(la.colors)&&(la.colors=!1);V(la.customInspect)&&(la.customInspect=!0);la.colors&&(la.stylize=F);return L(la,oa,la.depth)}function F(oa,
ca){return(ca=C.styles[ca])?"\u001b["+C.colors[ca][0]+"m"+oa+"\u001b["+C.colors[ca][1]+"m":oa}function H(oa,ca){return oa}function J(oa){var ca={};oa.forEach(function(la,ra){ca[la]=!0});return ca}function L(oa,ca,la){if(oa.customInspect&&ca&&wa(ca.inspect)&&ca.inspect!==r.inspect&&(!ca.constructor||ca.constructor.prototype!==ca)){var ra=ca.inspect(la,oa);ia(ra)||(ra=L(oa,ra,la));return ra}if(ra=O(oa,ca))return ra;var Na=Object.keys(ca),za=J(Na);oa.showHidden&&(Na=Object.getOwnPropertyNames(ca));if(Ia(ca)&&
(0<=Na.indexOf("message")||0<=Na.indexOf("description")))return da(ca);if(0===Na.length){if(wa(ca))return oa.stylize("[Function"+(ca.name?": "+ca.name:"")+"]","special");if(Fa(ca))return oa.stylize(RegExp.prototype.toString.call(ca),"regexp");if(Ea(ca))return oa.stylize(Date.prototype.toString.call(ca),"date");if(Ia(ca))return da(ca)}ra="";var Ma=!1,Xa=["{","}"];ua(ca)&&(Ma=!0,Xa=["[","]"]);wa(ca)&&(ra=" [Function"+(ca.name?": "+ca.name:"")+"]");Fa(ca)&&(ra=" "+RegExp.prototype.toString.call(ca));
Ea(ca)&&(ra=" "+Date.prototype.toUTCString.call(ca));Ia(ca)&&(ra=" "+da(ca));if(0===Na.length&&(!Ma||0==ca.length))return Xa[0]+ra+Xa[1];if(0>la)return Fa(ca)?oa.stylize(RegExp.prototype.toString.call(ca),"regexp"):oa.stylize("[Object]","special");oa.seen.push(ca);Na=Ma?Z(oa,ca,la,za,Na):Na.map(function(wb){return ka(oa,ca,la,za,wb,Ma)});oa.seen.pop();return ha(Na,ra,Xa)}function O(oa,ca){if(V(ca))return oa.stylize("undefined","undefined");if(ia(ca))return ca="'"+JSON.stringify(ca).replace(/^"|"$/g,
"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",oa.stylize(ca,"string");if(ya(ca))return oa.stylize(""+ca,"number");if(xa(ca))return oa.stylize(""+ca,"boolean");if(null===ca)return oa.stylize("null","null")}function da(oa){return"["+Error.prototype.toString.call(oa)+"]"}function Z(oa,ca,la,ra,Na){for(var za=[],Ma=0,Xa=ca.length;Ma<Xa;++Ma)Object.prototype.hasOwnProperty.call(ca,String(Ma))?za.push(ka(oa,ca,la,ra,String(Ma),!0)):za.push("");Na.forEach(function(wb){wb.match(/^\d+$/)||za.push(ka(oa,
ca,la,ra,wb,!0))});return za}function ka(oa,ca,la,ra,Na,za){var Ma,Xa;ca=Object.getOwnPropertyDescriptor(ca,Na)||{value:ca[Na]};ca.get?Xa=ca.set?oa.stylize("[Getter/Setter]","special"):oa.stylize("[Getter]","special"):ca.set&&(Xa=oa.stylize("[Setter]","special"));Object.prototype.hasOwnProperty.call(ra,Na)||(Ma="["+Na+"]");Xa||(0>oa.seen.indexOf(ca.value)?(Xa=null===la?L(oa,ca.value,null):L(oa,ca.value,la-1),-1<Xa.indexOf("\n")&&(Xa=za?Xa.split("\n").map(function(wb){return"  "+wb}).join("\n").substr(2):
"\n"+Xa.split("\n").map(function(wb){return"   "+wb}).join("\n"))):Xa=oa.stylize("[Circular]","special"));if(V(Ma)){if(za&&Na.match(/^\d+$/))return Xa;Ma=JSON.stringify(""+Na);Ma.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Ma=Ma.substr(1,Ma.length-2),Ma=oa.stylize(Ma,"name")):(Ma=Ma.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Ma=oa.stylize(Ma,"string"))}return Ma+": "+Xa}function ha(oa,ca,la){var ra=0;return 60<oa.reduce(function(Na,za){ra++;0<=za.indexOf("\n")&&ra++;return Na+za.replace(/\u001b\[\d\d?m/g,
"").length+1},0)?la[0]+(""===ca?"":ca+"\n ")+" "+oa.join(",\n  ")+" "+la[1]:la[0]+ca+" "+oa.join(", ")+" "+la[1]}function ua(oa){return Array.isArray(oa)}function xa(oa){return"boolean"===typeof oa}function ya(oa){return"number"===typeof oa}function ia(oa){return"string"===typeof oa}function V(oa){return void 0===oa}function Fa(oa){return Ca(oa)&&"[object RegExp]"===Object.prototype.toString.call(oa)}function Ca(oa){return"object"===typeof oa&&null!==oa}function Ea(oa){return Ca(oa)&&"[object Date]"===
Object.prototype.toString.call(oa)}function Ia(oa){return Ca(oa)&&("[object Error]"===Object.prototype.toString.call(oa)||oa instanceof Error)}function wa(oa){return"function"===typeof oa}function Qa(oa){return 10>oa?"0"+oa.toString(10):oa.toString(10)}function bb(oa,ca){if(!oa){var la=Error("Promise was rejected with a falsy value");la.reason=oa;oa=la}return ca(oa)}var db=Object.getOwnPropertyDescriptors||function(oa){for(var ca=Object.keys(oa),la={},ra=0;ra<ca.length;ra++)la[ca[ra]]=Object.getOwnPropertyDescriptor(oa,
ca[ra]);return la},vb=/%[sdj%]/g;r.format=function(oa){if(!ia(oa)){for(var ca=[],la=0;la<arguments.length;la++)ca.push(C(arguments[la]));return ca.join(" ")}la=1;var ra=arguments,Na=ra.length;ca=String(oa).replace(vb,function(Ma){if("%%"===Ma)return"%";if(la>=Na)return Ma;switch(Ma){case "%s":return String(ra[la++]);case "%d":return Number(ra[la++]);case "%j":try{return JSON.stringify(ra[la++])}catch(Xa){return"[Circular]"}default:return Ma}});for(var za=ra[la];la<Na;za=ra[++la])ca=null!==za&&Ca(za)?
ca+(" "+C(za)):ca+(" "+za);return ca};r.deprecate=function(oa,ca){if("undefined"!==typeof A&&!0===A.noDeprecation)return oa;if("undefined"===typeof A)return function(){return r.deprecate(oa,ca).apply(this,arguments)};var la=!1;return function(){if(!la){if(A.throwDeprecation)throw Error(ca);A.traceDeprecation?console.trace(ca):console.error(ca);la=!0}return oa.apply(this,arguments)}};var ob={},cb;r.debuglog=function(oa){V(cb)&&(cb=A.env.NODE_DEBUG||"");oa=oa.toUpperCase();if(!ob[oa])if((new RegExp("\\b"+
oa+"\\b","i")).test(cb)){var ca=A.pid;ob[oa]=function(){var la=r.format.apply(r,arguments);console.error("%s %d: %s",oa,ca,la)}}else ob[oa]=function(){};return ob[oa]};r.inspect=C;C.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};C.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};
r.isArray=ua;r.isBoolean=xa;r.isNull=function(oa){return null===oa};r.isNullOrUndefined=function(oa){return null==oa};r.isNumber=ya;r.isString=ia;r.isSymbol=function(oa){return"symbol"===typeof oa};r.isUndefined=V;r.isRegExp=Fa;r.isObject=Ca;r.isDate=Ea;r.isError=Ia;r.isFunction=wa;r.isPrimitive=function(oa){return null===oa||"boolean"===typeof oa||"number"===typeof oa||"string"===typeof oa||"symbol"===typeof oa||"undefined"===typeof oa};r.isBuffer=d(287);var kb="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");
r.log=function(){var oa=console,ca=oa.log;var la=new Date;var ra=[Qa(la.getHours()),Qa(la.getMinutes()),Qa(la.getSeconds())].join(":");la=[la.getDate(),kb[la.getMonth()],ra].join(" ");ca.call(oa,"%s - %s",la,r.format.apply(r,arguments))};r.inherits=d(288);r._extend=function(oa,ca){if(!ca||!Ca(ca))return oa;for(var la=Object.keys(ca),ra=la.length;ra--;)oa[la[ra]]=ca[la[ra]];return oa};var lb="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;r.promisify=function(oa){function ca(){for(var la,
ra,Na=new Promise(function(Xa,wb){la=Xa;ra=wb}),za=[],Ma=0;Ma<arguments.length;Ma++)za.push(arguments[Ma]);za.push(function(Xa,wb){Xa?ra(Xa):la(wb)});try{oa.apply(this,za)}catch(Xa){ra(Xa)}return Na}if("function"!==typeof oa)throw new TypeError('The "original" argument must be of type Function');if(lb&&oa[lb]){ca=oa[lb];if("function"!==typeof ca)throw new TypeError('The "util.promisify.custom" argument must be of type Function');Object.defineProperty(ca,lb,{value:ca,enumerable:!1,writable:!1,configurable:!0});
return ca}Object.setPrototypeOf(ca,Object.getPrototypeOf(oa));lb&&Object.defineProperty(ca,lb,{value:ca,enumerable:!1,writable:!1,configurable:!0});return Object.defineProperties(ca,db(oa))};r.promisify.custom=lb;r.callbackify=function(oa){function ca(){for(var la=[],ra=0;ra<arguments.length;ra++)la.push(arguments[ra]);var Na=la.pop();if("function"!==typeof Na)throw new TypeError("The last argument must be of type Function");var za=this,Ma=function(){return Na.apply(za,arguments)};oa.apply(this,la).then(function(Xa){A.nextTick(Ma,
null,Xa)},function(Xa){A.nextTick(bb,Xa,Ma)})}if("function"!==typeof oa)throw new TypeError('The "original" argument must be of type Function');Object.setPrototypeOf(ca,Object.getPrototypeOf(oa));Object.defineProperties(ca,db(oa));return ca}}).call(this,d(286))},function(q,r){function d(){throw Error("setTimeout has not been defined");}function A(){throw Error("clearTimeout has not been defined");}function C(ya){if(da===setTimeout)return setTimeout(ya,0);if((da===d||!da)&&setTimeout)return da=setTimeout,
setTimeout(ya,0);try{return da(ya,0)}catch(ia){try{return da.call(null,ya,0)}catch(V){return da.call(this,ya,0)}}}function F(ya){if(Z===clearTimeout)return clearTimeout(ya);if((Z===A||!Z)&&clearTimeout)return Z=clearTimeout,clearTimeout(ya);try{return Z(ya)}catch(ia){try{return Z.call(null,ya)}catch(V){return Z.call(this,ya)}}}function H(){ha&&ua&&(ha=!1,ua.length?ka=ua.concat(ka):xa=-1,ka.length&&J())}function J(){if(!ha){var ya=C(H);ha=!0;for(var ia=ka.length;ia;){ua=ka;for(ka=[];++xa<ia;)ua&&ua[xa].run();
xa=-1;ia=ka.length}ua=null;ha=!1;F(ya)}}function L(ya,ia){this.fun=ya;this.array=ia}function O(){}q=q.exports={};try{var da="function"===typeof setTimeout?setTimeout:d}catch(ya){da=d}try{var Z="function"===typeof clearTimeout?clearTimeout:A}catch(ya){Z=A}var ka=[],ha=!1,ua,xa=-1;q.nextTick=function(ya){var ia=Array(arguments.length-1);if(1<arguments.length)for(var V=1;V<arguments.length;V++)ia[V-1]=arguments[V];ka.push(new L(ya,ia));1!==ka.length||ha||C(J)};L.prototype.run=function(){this.fun.apply(null,
this.array)};q.title="browser";q.browser=!0;q.env={};q.argv=[];q.version="";q.versions={};q.on=O;q.addListener=O;q.once=O;q.off=O;q.removeListener=O;q.removeAllListeners=O;q.emit=O;q.prependListener=O;q.prependOnceListener=O;q.listeners=function(ya){return[]};q.binding=function(ya){throw Error("process.binding is not supported");};q.cwd=function(){return"/"};q.chdir=function(ya){throw Error("process.chdir is not supported");};q.umask=function(){return 0}},function(q,r){q.exports=function(d){return d&&
"object"===typeof d&&"function"===typeof d.copy&&"function"===typeof d.fill&&"function"===typeof d.readUInt8}},function(q,r){q.exports="function"===typeof Object.create?function(d,A){d.super_=A;d.prototype=Object.create(A.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}})}:function(d,A){d.super_=A;var C=function(){};C.prototype=A.prototype;d.prototype=new C;d.prototype.constructor=d}},function(q,r,d){r=d(290);q.exports=r},function(q,r,d){var A=d(291),C=Array.prototype;q.exports=
function(F){var H=F.map;return F===C||F instanceof Array&&H===C.map?A:H}},function(q,r,d){d(292);r=d(35);q.exports=r("Array").map},function(q,r,d){q=d(7);var A=d(64).map;d=d(101)("map");q({target:"Array",proto:!0,forced:!d},{map:function(C){return A(this,C,1<arguments.length?arguments[1]:void 0)}})},function(q,r,d){r=d(294);q.exports=r},function(q,r,d){var A=d(295),C=Array.prototype;q.exports=function(F){var H=F.every;return F===C||F instanceof Array&&H===C.every?A:H}},function(q,r,d){d(296);r=d(35);
q.exports=r("Array").every},function(q,r,d){q=d(7);var A=d(64).every;d=d(69)("every");q({target:"Array",proto:!0,forced:!d},{every:function(C){return A(this,C,1<arguments.length?arguments[1]:void 0)}})},function(q,r,d){d(298);r=d(13);q.exports=r.Reflect.construct},function(q,r,d){q=d(7);r=d(46);var A=d(124),C=d(19),F=d(36),H=d(71),J=d(167);d=d(20);var L=r("Reflect","construct"),O=d(function(){function Z(){}return!(L(function(){},[],Z)instanceof Z)}),da=!d(function(){L(function(){})});d=O||da;q({target:"Reflect",
stat:!0,forced:d,sham:d},{construct:function(Z,ka){A(Z);C(ka);var ha=3>arguments.length?Z:A(arguments[2]);if(da&&!O)return L(Z,ka,ha);if(Z==ha){switch(ka.length){case 0:return new Z;case 1:return new Z(ka[0]);case 2:return new Z(ka[0],ka[1]);case 3:return new Z(ka[0],ka[1],ka[2]);case 4:return new Z(ka[0],ka[1],ka[2],ka[3])}ha=[null];ha.push.apply(ha,ka);return new (J.apply(Z,ha))}ha=ha.prototype;ha=H(F(ha)?ha:Object.prototype);var ua=Function.apply.call(Z,ha,ka);return F(ua)?ua:ha}})},function(q,
r,d){var A=d(144);q.exports=function(C){if(A(C))return C};q.exports["default"]=q.exports;q.exports.__esModule=!0},function(q,r,d){var A=d(121),C=d(16);q.exports=function(F,H){var J=null==F?null:"undefined"!==typeof A&&C(F)||F["@@iterator"];if(null!=J){var L=[],O=!0,da=!1,Z;try{for(J=J.call(F);!(O=(Z=J.next()).done)&&(L.push(Z.value),!H||L.length!==H);O=!0);}catch(ha){da=!0;var ka=ha}finally{try{if(!O&&null!=J["return"])J["return"]()}finally{if(da)throw ka;}}return L}};q.exports["default"]=q.exports;
q.exports.__esModule=!0},function(q,r){q.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");};q.exports["default"]=q.exports;q.exports.__esModule=!0},function(q,r,d){r=d(303);q.exports=r},function(q,r,d){r=d(304);q.exports=r},function(q,r,d){d(305);var A=d(13).Object;q.exports=function(C,F){return A.create(C,F)}},function(q,r,d){q=d(7);r=d(34);d=d(71);q({target:"Object",
stat:!0,sham:!r},{create:d})},function(q,r,d){r=d(170);q.exports=r},function(q,r,d){d(308);r=d(13);q.exports=r.Object.setPrototypeOf},function(q,r,d){q=d(7);d=d(157);q({target:"Object",stat:!0},{setPrototypeOf:d})},function(q,r,d){q.exports=d(310)},function(q,r,d){r=d(171);q.exports=r},function(q,r,d){d(312);r=d(13);q.exports=r.Object.getPrototypeOf},function(q,r,d){q=d(7);r=d(20);var A=d(47),C=d(123);d=d(156);r=r(function(){C(1)});q({target:"Object",stat:!0,forced:r,sham:!d},{getPrototypeOf:function(F){return C(A(F))}})},
function(q,r,d){q.exports=d(314)},function(q,r,d){r=d(172);d(319);d(321);d(323);d(325);d(327);d(328);d(329);d(330);d(331);d(332);d(334);d(335);d(336);d(337);d(338);d(339);d(340);d(341);d(342);d(343);q.exports=r},function(q,r,d){d(65);d(316);d(85);d(67);r=d(13);q.exports=r.Map},function(q,r,d){r=d(173);d=d(175);q.exports=r("Map",function(A){return function(){return A(this,arguments.length?arguments[0]:void 0)}},d)},function(q,r,d){var A=d(103);q.exports=function(C,F,H){for(var J in F)H&&H.unsafe&&
C[J]?C[J]=F[J]:A(C,J,F[J],H);return C}},function(q,r,d){var A=d(46),C=d(51);r=d(27);var F=d(34),H=r("species");q.exports=function(J){J=A(J);var L=C.f;F&&J&&!J[H]&&L(J,H,{configurable:!0,get:function(){return this}})}},function(q,r,d){q=d(7);d=d(320);q({target:"Map",stat:!0},{from:d})},function(q,r,d){var A=d(37),C=d(124),F=d(45),H=d(38);q.exports=function(J){var L=arguments.length,O=1<L?arguments[1]:void 0,da;C(this);(da=void 0!==O)&&A(O);if(void 0==J)return new this;var Z=[];if(da){var ka=0;var ha=
F(O,2<L?arguments[2]:void 0,2);H(J,function(ua){Z.push(ha(ua,ka++))})}else H(J,Z.push,{that:Z});return new this(Z)}},function(q,r,d){q=d(7);d=d(322);q({target:"Map",stat:!0},{of:d})},function(q,r,d){q.exports=function(){for(var A=arguments.length,C=Array(A);A--;)C[A]=arguments[A];return new this(C)}},function(q,r,d){q=d(7);r=d(28);var A=d(324);q({target:"Map",proto:!0,real:!0,forced:r},{deleteAll:function(){return A.apply(this,arguments)}})},function(q,r,d){var A=d(37),C=d(19);q.exports=function(){for(var F=
C(this),H=A(F["delete"]),J=!0,L,O=0,da=arguments.length;O<da;O++)L=H.call(F,arguments[O]),J=J&&L;return!!J}},function(q,r,d){q=d(7);r=d(28);d=d(326);q({target:"Map",proto:!0,real:!0,forced:r},{emplace:d})},function(q,r,d){var A=d(19);q.exports=function(C,F){var H=A(this);F=H.has(C)&&"update"in F?F.update(H.get(C),C,H):F.insert(C,H);H.set(C,F);return F}},function(q,r,d){q=d(7);r=d(28);var A=d(19),C=d(45),F=d(54),H=d(38);q({target:"Map",proto:!0,real:!0,forced:r},{every:function(J){var L=A(this),O=
F(L),da=C(J,1<arguments.length?arguments[1]:void 0,3);return!H(O,function(Z,ka,ha){if(!da(ka,Z,L))return ha()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},function(q,r,d){q=d(7);r=d(28);var A=d(46),C=d(37),F=d(19),H=d(45),J=d(126),L=d(54),O=d(38);q({target:"Map",proto:!0,real:!0,forced:r},{filter:function(da){var Z=F(this),ka=L(Z),ha=H(da,1<arguments.length?arguments[1]:void 0,3),ua=new (J(Z,A("Map"))),xa=C(ua.set);O(ka,function(ya,ia){ha(ia,ya,Z)&&xa.call(ua,ya,ia)},{AS_ENTRIES:!0,
IS_ITERATOR:!0});return ua}})},function(q,r,d){q=d(7);r=d(28);var A=d(19),C=d(45),F=d(54),H=d(38);q({target:"Map",proto:!0,real:!0,forced:r},{find:function(J){var L=A(this),O=F(L),da=C(J,1<arguments.length?arguments[1]:void 0,3);return H(O,function(Z,ka,ha){if(da(ka,Z,L))return ha(ka)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},function(q,r,d){q=d(7);r=d(28);var A=d(19),C=d(45),F=d(54),H=d(38);q({target:"Map",proto:!0,real:!0,forced:r},{findKey:function(J){var L=A(this),O=F(L),da=C(J,
1<arguments.length?arguments[1]:void 0,3);return H(O,function(Z,ka,ha){if(da(ka,Z,L))return ha(Z)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},function(q,r,d){q=d(7);var A=d(37),C=d(86),F=d(38);q({target:"Map",stat:!0},{groupBy:function(H,J){A(J);H=C(H);var L=new this,O=A(L.has),da=A(L.get),Z=A(L.set);F(H,function(ka){var ha=J(ka);O.call(L,ha)?da.call(L,ha).push(ka):Z.call(L,ha,[ka])},{IS_ITERATOR:!0});return L}})},function(q,r,d){q=d(7);r=d(28);var A=d(19),C=d(54),F=d(333),H=d(38);
q({target:"Map",proto:!0,real:!0,forced:r},{includes:function(J){return H(C(A(this)),function(L,O,da){if(F(O,J))return da()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},function(q,r){q.exports=function(d,A){return d===A||d!=d&&A!=A}},function(q,r,d){q=d(7);var A=d(38),C=d(37);q({target:"Map",stat:!0},{keyBy:function(F,H){var J=new this;C(H);var L=C(J.set);A(F,function(O){L.call(J,H(O),O)});return J}})},function(q,r,d){q=d(7);r=d(28);var A=d(19),C=d(54),F=d(38);q({target:"Map",proto:!0,
real:!0,forced:r},{keyOf:function(H){return F(C(A(this)),function(J,L,O){if(L===H)return O(J)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},function(q,r,d){q=d(7);r=d(28);var A=d(46),C=d(37),F=d(19),H=d(45),J=d(126),L=d(54),O=d(38);q({target:"Map",proto:!0,real:!0,forced:r},{mapKeys:function(da){var Z=F(this),ka=L(Z),ha=H(da,1<arguments.length?arguments[1]:void 0,3),ua=new (J(Z,A("Map"))),xa=C(ua.set);O(ka,function(ya,ia){xa.call(ua,ha(ia,ya,Z),ia)},{AS_ENTRIES:!0,IS_ITERATOR:!0});return ua}})},
function(q,r,d){q=d(7);r=d(28);var A=d(46),C=d(37),F=d(19),H=d(45),J=d(126),L=d(54),O=d(38);q({target:"Map",proto:!0,real:!0,forced:r},{mapValues:function(da){var Z=F(this),ka=L(Z),ha=H(da,1<arguments.length?arguments[1]:void 0,3),ua=new (J(Z,A("Map"))),xa=C(ua.set);O(ka,function(ya,ia){xa.call(ua,ya,ha(ia,ya,Z))},{AS_ENTRIES:!0,IS_ITERATOR:!0});return ua}})},function(q,r,d){q=d(7);r=d(28);var A=d(37),C=d(19),F=d(38);q({target:"Map",proto:!0,real:!0,forced:r},{merge:function(H){for(var J=C(this),
L=A(J.set),O=arguments.length,da=0;da<O;)F(arguments[da++],L,{that:J,AS_ENTRIES:!0});return J}})},function(q,r,d){q=d(7);r=d(28);var A=d(19),C=d(37),F=d(54),H=d(38);q({target:"Map",proto:!0,real:!0,forced:r},{reduce:function(J){var L=A(this),O=F(L),da=2>arguments.length,Z=da?void 0:arguments[1];C(J);H(O,function(ka,ha){da?(da=!1,Z=ha):Z=J(Z,ha,ka,L)},{AS_ENTRIES:!0,IS_ITERATOR:!0});if(da)throw TypeError("Reduce of empty map with no initial value");return Z}})},function(q,r,d){q=d(7);r=d(28);var A=
d(19),C=d(45),F=d(54),H=d(38);q({target:"Map",proto:!0,real:!0,forced:r},{some:function(J){var L=A(this),O=F(L),da=C(J,1<arguments.length?arguments[1]:void 0,3);return H(O,function(Z,ka,ha){if(da(ka,Z,L))return ha()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},function(q,r,d){q=d(7);r=d(28);var A=d(19),C=d(37);q({target:"Map",proto:!0,real:!0,forced:r},{update:function(F,H){var J=A(this),L=arguments.length;C(H);var O=J.has(F);if(!O&&3>L)throw TypeError("Updating absent value");L=O?
J.get(F):C(2<L?arguments[2]:void 0)(F,J);J.set(F,H(L,F,J));return J}})},function(q,r,d){q=d(7);r=d(28);d=d(176);q({target:"Map",proto:!0,real:!0,forced:r},{upsert:d})},function(q,r,d){q=d(7);r=d(28);d=d(176);q({target:"Map",proto:!0,real:!0,name:"upsert",forced:r},{updateOrInsert:d})},function(q,r,d){var A=d(345);q.exports=function(C){var F;return-1!==A(F=Function.toString.call(C)).call(F,"[native code]")};q.exports["default"]=q.exports;q.exports.__esModule=!0},function(q,r,d){q.exports=d(346)},function(q,
r,d){r=d(347);q.exports=r},function(q,r,d){r=d(348);q.exports=r},function(q,r,d){var A=d(349),C=Array.prototype;q.exports=function(F){var H=F.indexOf;return F===C||F instanceof Array&&H===C.indexOf?A:H}},function(q,r,d){d(350);r=d(35);q.exports=r("Array").indexOf},function(q,r,d){q=d(7);var A=d(137).indexOf;d=d(69);var C=[].indexOf,F=!!C&&0>1/[1].indexOf(1,-0);d=d("indexOf");q({target:"Array",proto:!0,forced:F||!d},{indexOf:function(H){return F?C.apply(this,arguments)||0:A(this,H,1<arguments.length?
arguments[1]:void 0)}})},function(q,r,d){function A(L,O,da){J()?q.exports=A=C:q.exports=A=function(Z,ka,ha){var ua=[null];ua.push.apply(ua,ka);Z=new (F(Function).apply(Z,ua));ha&&H(Z,ha.prototype);return Z};q.exports["default"]=q.exports;q.exports.__esModule=!0;return A.apply(null,arguments)}var C=d(177),F=d(353),H=d(125),J=d(358);q.exports=A;q.exports["default"]=q.exports;q.exports.__esModule=!0},function(q,r,d){r=d(166);q.exports=r},function(q,r,d){q.exports=d(354)},function(q,r,d){r=d(178);q.exports=
r},function(q,r,d){var A=d(356),C=Function.prototype;q.exports=function(F){var H=F.bind;return F===C||F instanceof Function&&H===C.bind?A:H}},function(q,r,d){d(357);r=d(35);q.exports=r("Function").bind},function(q,r,d){q=d(7);d=d(167);q({target:"Function",proto:!0},{bind:d})},function(q,r,d){var A=d(177);q.exports=function(){if("undefined"===typeof Reflect||!A||A.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(A(Boolean,[],function(){})),!0}catch(C){return!1}};
q.exports["default"]=q.exports;q.exports.__esModule=!0},function(q,r,d){r=d(360);q.exports=r},function(q,r,d){var A=d(361),C=String.prototype;q.exports=function(F){var H=F.startsWith;return"string"===typeof F||F===C||F instanceof String&&H===C.startsWith?A:H}},function(q,r,d){d(362);r=d(35);q.exports=r("String").startsWith},function(q,r,d){q=d(7);var A=d(76).f,C=d(115),F=d(58),H=d(363),J=d(61);r=d(365);d=d(28);var L="".startsWith,O=Math.min;r=r("startsWith");d=!d&&!r&&!!function(){var da=A(String.prototype,
"startsWith");return da&&!da.writable}();q({target:"String",proto:!0,forced:!d&&!r},{startsWith:function(da){var Z=F(J(this));H(da);var ka=C(O(1<arguments.length?arguments[1]:void 0,Z.length)),ha=F(da);return L?L.call(Z,ha,ka):Z.slice(ka,ka+ha.length)===ha}})},function(q,r,d){var A=d(364);q.exports=function(C){if(A(C))throw TypeError("The method doesn't accept regular expressions");return C}},function(q,r,d){var A=d(36),C=d(78),F=d(27)("match");q.exports=function(H){var J;return A(H)&&(void 0!==(J=
H[F])?!!J:"RegExp"==C(H))}},function(q,r,d){var A=d(27)("match");q.exports=function(C){var F=/./;try{"/./"[C](F)}catch(H){try{return F[A]=!1,"/./"[C](F)}catch(J){}}return!1}},function(q,r,d){r=d(367);q.exports=r},function(q,r,d){var A=d(368),C=Array.prototype;q.exports=function(F){var H=F.some;return F===C||F instanceof Array&&H===C.some?A:H}},function(q,r,d){d(369);r=d(35);q.exports=r("Array").some},function(q,r,d){q=d(7);var A=d(64).some;d=d(69)("some");q({target:"Array",proto:!0,forced:!d},{some:function(C){return A(this,
C,1<arguments.length?arguments[1]:void 0)}})},function(q,r,d){r=d(371);q.exports=r},function(q,r,d){d(372);r=d(13);q.exports=r.Object.entries},function(q,r,d){q=d(7);var A=d(373).entries;q({target:"Object",stat:!0},{entries:function(C){return A(C)}})},function(q,r,d){var A=d(34),C=d(82),F=d(53),H=d(91).f;r=function(J){return function(L){L=F(L);for(var O=C(L),da=O.length,Z=0,ka=[],ha;da>Z;)ha=O[Z++],A&&!H.call(L,ha)||ka.push(J?[ha,L[ha]]:L[ha]);return ka}};q.exports={entries:r(!0),values:r(!1)}},function(q,
r,d){r=d(375);q.exports=r},function(q,r,d){var A=d(376),C=String.prototype;q.exports=function(F){var H=F.padStart;return"string"===typeof F||F===C||F instanceof String&&H===C.padStart?A:H}},function(q,r,d){d(377);r=d(35);q.exports=r("String").padStart},function(q,r,d){q=d(7);var A=d(378).start;d=d(380);q({target:"String",proto:!0,forced:d},{padStart:function(C){return A(this,C,1<arguments.length?arguments[1]:void 0)}})},function(q,r,d){var A=d(115),C=d(58),F=d(379),H=d(61),J=Math.ceil;r=function(L){return function(O,
da,Z){O=C(H(O));da=A(da);var ka=O.length;Z=void 0===Z?" ":C(Z);if(da<=ka||""==Z)return O;da-=ka;Z=F.call(Z,J(da/Z.length));Z.length>da&&(Z=Z.slice(0,da));return L?O+Z:Z+O}};q.exports={start:r(!1),end:r(!0)}},function(q,r,d){var A=d(97),C=d(58),F=d(61);q.exports=function(H){var J=C(F(this)),L="";H=A(H);if(0>H||Infinity==H)throw RangeError("Wrong number of repetitions");for(;0<H;(H>>>=1)&&(J+=J))H&1&&(L+=J);return L}},function(q,r,d){r=d(80);q.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},
function(q,r,d){r=d(382);d(59);q.exports=r},function(q,r,d){d(65);d(85);d(383);d(67);r=d(13);q.exports=r.Set},function(q,r,d){r=d(173);d=d(175);q.exports=r("Set",function(A){return function(){return A(this,arguments.length?arguments[0]:void 0)}},d)},function(q,r,d){r=d(385);q.exports=r},function(q,r,d){var A=d(386),C=Array.prototype;q.exports=function(F){var H=F.filter;return F===C||F instanceof Array&&H===C.filter?A:H}},function(q,r,d){d(387);r=d(35);q.exports=r("Array").filter},function(q,r,d){q=
d(7);var A=d(64).filter;d=d(101)("filter");q({target:"Array",proto:!0,forced:!d},{filter:function(C){return A(this,C,1<arguments.length?arguments[1]:void 0)}})},function(q,r,d){r=d(389);q.exports=r},function(q,r,d){d(390);r=d(13);q.exports=r.Math.trunc},function(q,r,d){q=d(7);var A=Math.ceil,C=Math.floor;q({target:"Math",stat:!0},{trunc:function(F){return(0<F?C:A)(F)}})},function(q,r,d){r=d(392);q.exports=r},function(q,r,d){d(393);r=d(13);q.exports=r.Math.sign},function(q,r,d){q=d(7);d=d(135);q({target:"Math",
stat:!0},{sign:d})},function(q,r,d){r=d(395);q.exports=r},function(q,r,d){var A=d(396),C=Array.prototype;q.exports=function(F){var H=F.reverse;return F===C||F instanceof Array&&H===C.reverse?A:H}},function(q,r,d){d(397);r=d(35);q.exports=r("Array").reverse},function(q,r,d){q=d(7);var A=d(70),C=[].reverse;d=[1,2];q({target:"Array",proto:!0,forced:String(d)===String(d.reverse())},{reverse:function(){A(this)&&(this.length=this.length);return C.call(this)}})},function(q,r,d){r=d(399);q.exports=r},function(q,
r,d){var A=d(400),C=Array.prototype;q.exports=function(F){var H=F.fill;return F===C||F instanceof Array&&H===C.fill?A:H}},function(q,r,d){d(401);r=d(35);q.exports=r("Array").fill},function(q,r,d){q=d(7);r=d(402);d=d(153);q({target:"Array",proto:!0},{fill:r});d("fill")},function(q,r,d){var A=d(47),C=d(96),F=d(55);q.exports=function(H){var J=A(this),L=F(J),O=arguments.length,da=C(1<O?arguments[1]:void 0,L);O=2<O?arguments[2]:void 0;for(L=void 0===O?L:C(O,L);L>da;)J[da++]=H;return J}},function(q,r,d){r=
d(404);q.exports=r},function(q,r,d){var A=d(405),C=String.prototype;q.exports=function(F){var H=F.trim;return"string"===typeof F||F===C||F instanceof String&&H===C.trim?A:H}},function(q,r,d){d(406);r=d(35);q.exports=r("String").trim},function(q,r,d){q=d(7);var A=d(407).trim;d=d(408);q({target:"String",proto:!0,forced:d("trim")},{trim:function(){return A(this)}})},function(q,r,d){var A=d(61),C=d(58);r="["+d(179)+"]";var F=RegExp("^"+r+r+"*"),H=RegExp(r+r+"*$");r=function(J){return function(L){L=C(A(L));
J&1&&(L=L.replace(F,""));J&2&&(L=L.replace(H,""));return L}};q.exports={start:r(1),end:r(2),trim:r(3)}},function(q,r,d){var A=d(154).PROPER,C=d(20),F=d(179);q.exports=function(H){return C(function(){return!!F[H]()||"\u200b\u0085\u180e"!=="\u200b\u0085\u180e"[H]()||A&&F[H].name!==H})}},function(q,r,d){r=d(410);q.exports=r},function(q,r,d){var A=d(411),C=String.prototype;q.exports=function(F){var H=F.codePointAt;return"string"===typeof F||F===C||F instanceof String&&H===C.codePointAt?A:H}},function(q,
r,d){d(412);r=d(35);q.exports=r("String").codePointAt},function(q,r,d){q=d(7);var A=d(158).codeAt;q({target:"String",proto:!0},{codePointAt:function(C){return A(this,C)}})},function(q,r,d){r=d(414);q.exports=r},function(q,r,d){d(415);r=d(13);q.exports=r.String.fromCodePoint},function(q,r,d){q=d(7);var A=d(96),C=String.fromCharCode;d=String.fromCodePoint;q({target:"String",stat:!0,forced:!!d&&1!=d.length},{fromCodePoint:function(F){for(var H=[],J=arguments.length,L=0,O;J>L;){O=+arguments[L++];if(A(O,
1114111)!==O)throw RangeError(O+" is not a valid code point");H.push(65536>O?C(O):C(((O-=65536)>>10)+55296,O%1024+56320))}return H.join("")}})},function(q,r,d){r=d(417);q.exports=r},function(q,r,d){r=d(418);d(59);q.exports=r},function(q,r,d){d(65);d(67);r=d(419);q.exports=r},function(q,r,d){var A=d(63);r=d(27);var C=d(66),F=r("iterator");q.exports=function(H){H=Object(H);return void 0!==H[F]||"@@iterator"in H||C.hasOwnProperty(A(H))}},function(q,r,d){r=d(421);q.exports=r},function(q,r,d){d(422);r=
d(13);q.exports=r.Object.assign},function(q,r,d){q=d(7);d=d(423);q({target:"Object",stat:!0,forced:Object.assign!==d},{assign:d})},function(q,r,d){var A=d(34);r=d(20);var C=d(82),F=d(120),H=d(91),J=d(47),L=d(92),O=Object.assign,da=Object.defineProperty;q.exports=!O||r(function(){if(A&&1!==O({b:1},O(da({},"a",{enumerable:!0,get:function(){da(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var Z={},ka={},ha=Symbol();Z[ha]=7;"abcdefghijklmnopqrst".split("").forEach(function(ua){ka[ua]=ua});return 7!=
O({},Z)[ha]||"abcdefghijklmnopqrst"!=C(O({},ka)).join("")})?function(Z,ka){for(var ha=J(Z),ua=arguments.length,xa=1,ya=F.f,ia=H.f;ua>xa;)for(var V=L(arguments[xa++]),Fa=ya?C(V).concat(ya(V)):C(V),Ca=Fa.length,Ea=0,Ia;Ca>Ea;)if(Ia=Fa[Ea++],!A||ia.call(V,Ia))ha[Ia]=V[Ia];return ha}:O},function(q,r,d){r=d(425);q.exports=r},function(q,r,d){var A=d(426),C=Array.prototype;q.exports=function(F){var H=F.sort;return F===C||F instanceof Array&&H===C.sort?A:H}},function(q,r,d){d(427);r=d(35);q.exports=r("Array").sort},
function(q,r,d){q=d(7);var A=d(37),C=d(47),F=d(55),H=d(58);r=d(20);var J=d(428),L=d(69),O=d(429),da=d(430),Z=d(79),ka=d(431),ha=[],ua=ha.sort;d=r(function(){ha.sort(void 0)});var xa=r(function(){ha.sort(null)});L=L("sort");var ya=!r(function(){if(Z)return 70>Z;if(!(O&&3<O)){if(da)return!0;if(ka)return 603>ka;var V="",Fa,Ca;for(Fa=65;76>Fa;Fa++){var Ea=String.fromCharCode(Fa);switch(Fa){case 66:case 69:case 70:case 72:var Ia=3;break;case 68:case 71:Ia=4;break;default:Ia=2}for(Ca=0;47>Ca;Ca++)ha.push({k:Ea+
Ca,v:Ia})}ha.sort(function(wa,Qa){return Qa.v-wa.v});for(Ca=0;Ca<ha.length;Ca++)Ea=ha[Ca].k.charAt(0),V.charAt(V.length-1)!==Ea&&(V+=Ea);return"DGBEFHACIJK"!==V}}),ia=function(V){return function(Fa,Ca){return void 0===Ca?-1:void 0===Fa?1:void 0!==V?+V(Fa,Ca)||0:H(Fa)>H(Ca)?1:-1}};q({target:"Array",proto:!0,forced:d||!xa||!L||!ya},{sort:function(V){void 0!==V&&A(V);var Fa=C(this);if(ya)return void 0===V?ua.call(Fa):ua.call(Fa,V);var Ca=[],Ea=F(Fa),Ia;for(Ia=0;Ia<Ea;Ia++)Ia in Fa&&Ca.push(Fa[Ia]);Ca=
J(Ca,ia(V));V=Ca.length;for(Ia=0;Ia<V;)Fa[Ia]=Ca[Ia++];for(;Ia<Ea;)delete Fa[Ia++];return Fa}})},function(q,r){var d=Math.floor,A=function(C,F){var H=C.length,J=d(H/2);if(8>H){H=C.length;J=1;for(var L,O;J<H;){O=J;for(L=C[J];O&&0<F(C[O-1],L);)C[O]=C[--O];O!==J++&&(C[O]=L)}F=C}else{H=A(C.slice(0,J),F);C=A(C.slice(J),F);J=H.length;L=C.length;for(var da=O=0,Z=[];O<J||da<L;)O<J&&da<L?Z.push(0>=F(H[O],C[da])?H[O++]:C[da++]):Z.push(O<J?H[O++]:C[da++]);F=Z}return F};q.exports=A},function(q,r,d){r=d(80).match(/firefox\/(\d+)/i);
q.exports=!!r&&+r[1]},function(q,r,d){r=d(80);q.exports=/MSIE|Trident/.test(r)},function(q,r,d){r=d(80).match(/AppleWebKit\/(\d+)\./);q.exports=!!r&&+r[1]},function(q,r,d){r=d(433);q.exports=r},function(q,r,d){d(434);r=d(13);q.exports=r.Object.is},function(q,r,d){q=d(7);d=d(435);q({target:"Object",stat:!0},{is:d})},function(q,r){q.exports=Object.is||function(d,A){return d===A?0!==d||1/d===1/A:d!=d&&A!=A}},function(q,r,d){r=d(437);q.exports=r},function(q,r,d){d(438);var A=d(13);A.JSON||(A.JSON={stringify:JSON.stringify});
q.exports=function(C,F,H){return A.JSON.stringify.apply(null,arguments)}},function(q,r,d){q=d(7);r=d(46);d=d(20);var A=r("JSON","stringify"),C=/[\uD800-\uDFFF]/g,F=/^[\uD800-\uDBFF]$/,H=/^[\uDC00-\uDFFF]$/,J=function(L,O,da){var Z=da.charAt(O-1);O=da.charAt(O+1);return F.test(L)&&!H.test(O)||H.test(L)&&!F.test(Z)?"\\u"+L.charCodeAt(0).toString(16):L};d=d(function(){return'"\\udf06\\ud834"'!==A("\udf06\ud834")||'"\\udead"'!==A("\udead")});A&&q({target:"JSON",stat:!0,forced:d},{stringify:function(L,
O,da){var Z=A.apply(null,arguments);return"string"==typeof Z?Z.replace(C,J):Z}})},function(q,r,d){r=d(440);q.exports=r},function(q,r,d){d(441);r=d(13);q.exports=r.Object.keys},function(q,r,d){q=d(7);var A=d(47),C=d(82);d=d(20)(function(){C(1)});q({target:"Object",stat:!0,forced:d},{keys:function(F){return C(A(F))}})},function(q,r,d){r=d(443);q.exports=r},function(q,r,d){d(119);r=d(13);q.exports=r.Object.getOwnPropertySymbols},function(q,r,d){r=d(445);q.exports=r},function(q,r,d){d(446);var A=d(13).Object;
q=q.exports=function(C,F){return A.getOwnPropertyDescriptor(C,F)};A.getOwnPropertyDescriptor.sham&&(q.sham=!0)},function(q,r,d){q=d(7);r=d(20);var A=d(53),C=d(76).f;d=d(34);r=r(function(){C(1)});q({target:"Object",stat:!0,forced:!d||r,sham:!d},{getOwnPropertyDescriptor:function(F,H){return C(A(F),H)}})},function(q,r,d){d(59);var A=d(448),C=d(63),F=Array.prototype,H={DOMTokenList:!0,NodeList:!0};q.exports=function(J){var L=J.forEach;return J===F||J instanceof Array&&L===F.forEach||H.hasOwnProperty(C(J))?
A:L}},function(q,r,d){r=d(449);q.exports=r},function(q,r,d){d(450);r=d(35);q.exports=r("Array").forEach},function(q,r,d){q=d(7);d=d(451);q({target:"Array",proto:!0,forced:[].forEach!=d},{forEach:d})},function(q,r,d){var A=d(64).forEach;r=d(69)("forEach");q.exports=r?[].forEach:function(C){return A(this,C,1<arguments.length?arguments[1]:void 0)}},function(q,r,d){r=d(453);q.exports=r},function(q,r,d){d(454);r=d(13);q.exports=r.Object.getOwnPropertyDescriptors},function(q,r,d){q=d(7);r=d(34);var A=d(455),
C=d(53),F=d(76),H=d(99);q({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(J){J=C(J);for(var L=F.f,O=A(J),da={},Z=0,ka,ha;O.length>Z;)ha=L(J,ka=O[Z++]),void 0!==ha&&H(da,ka,ha);return da}})},function(q,r,d){r=d(46);var A=d(95),C=d(120),F=d(19);q.exports=r("Reflect","ownKeys")||function(H){var J=A.f(F(H)),L=C.f;return L?J.concat(L(H)):J}},function(q,r,d){r=d(457);q.exports=r},function(q,r,d){d(458);var A=d(13).Object;q=q.exports=function(C,F){return A.defineProperties(C,F)};A.defineProperties.sham&&
(q.sham=!0)},function(q,r,d){q=d(7);r=d(34);d=d(143);q({target:"Object",stat:!0,forced:!r,sham:!r},{defineProperties:d})},function(q,r,d){r=d(460);q.exports=r},function(q,r,d){d(461);r=d(13);q.exports=r.Math.expm1},function(q,r,d){q=d(7);d=d(462);q({target:"Math",stat:!0,forced:d!=Math.expm1},{expm1:d})},function(q,r){r=Math.expm1;var d=Math.exp;q.exports=!r||22025.465794806718<r(10)||22025.465794806718>r(10)||-2E-17!=r(-2E-17)?function(A){return 0==(A=+A)?A:-1E-6<A&&1E-6>A?A+A*A/2:d(A)-1}:r},function(q,
r,d){r=d(464);q.exports=r},function(q,r,d){d(465);r=d(13);q.exports=r.Math.imul},function(q,r,d){q=d(7);d=d(20);var A=Math.imul;d=d(function(){return-5!=A(4294967295,5)||2!=A.length});q({target:"Math",stat:!0,forced:d},{imul:function(C,F){C=+C;F=+F;var H=65535&C,J=65535&F;return 0|H*J+((65535&C>>>16)*J+H*(65535&F>>>16)<<16>>>0)}})},function(q,r,d){function A(g){F(g);switch(g){case "complex128":return new ub(Ec.a);case "float32":return 1.1920928955078125E-7;default:return Ec.a}}function C(g,b){return"int32"===
b?g&4294967295:"float32"===b?he()(g):"complex128"===b?g instanceof ub?g:new ub(g):1*g}function F(g){if(!Object.prototype.hasOwnProperty.call(Ka,g))throw Error("Invalid dtype '"+g+"'. Must be one of {'"+uf()(Ka).join("', '")+"'}.");}function H(g){return 0===g%1?2147483647>=g&&-2147483648<=g?"int32":"object":1*g==g?"float64":g instanceof ub?"complex128":"object"}function J(g,b){F(g);F(b);var a={int32:0,float32:1,float64:2,complex128:3,object:4};return a[g]<=a[b]}function L(g,b){var a="undefined"!==
typeof Sb.a&&Tb()(g)||g["@@iterator"];if(!a){if(Ub()(g)||(a=O(g))||b&&g&&"number"===typeof g.length){a&&(g=a);var c=0;b=function(){};return{s:b,n:function(){return c>=g.length?{done:!0}:{done:!1,value:g[c++]}},e:function(l){throw l;},f:b}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var e=!0,h=!1,k;return{s:function(){a=a.call(g)},n:function(){var l=a.next();e=l.done;return l},e:function(l){h=
!0;k=l},f:function(){try{if(!e&&null!=a["return"])a["return"]()}finally{if(h)throw k;}}}}function O(g,b){var a;if(g){if("string"===typeof g)return da(g,b);var c=na()(a=Object.prototype.toString.call(g)).call(a,8,-1);"Object"===c&&g.constructor&&(c=g.constructor.name);if("Map"===c||"Set"===c)return qb()(g);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return da(g,b)}}function da(g,b){if(null==b||b>g.length)b=g.length;for(var a=0,c=Array(b);a<b;a++)c[a]=g[a];return c}function Z(g,
b,a){function c(B){if(B===h){Ja()(y).call(y,1);for(B=g.length;0<B--;)x[B]=g[B].data[w[B]++];u[z++]=a.apply(void 0,Wa()(x).call(x,Za()(v)))}else{for(v[B]=0;;){c(B+1);if(++v[B]>=k[B])break;for(var E=g.length;0<E--;)1<g[E].shape[B-h+g[E].ndim]||(w[E]-=y[E])}for(E=g.length;0<E--;)y[E]*=g[E].shape[B-h+g[E].ndim]||1}}null==a&&b instanceof Function&&(a=b,b=void 0);g instanceof Array||(g=Za()(g));g=dc()(g).call(g,function(B){return V(B)});null==b&&(b="object");if(null==a){if("object"!==b)throw Error('If zip_fn is undefined, dtype must be "object" or undefined.');
var e=g.length;a=function(){for(var B=arguments.length,E=Array(B),D=0;D<B;D++)E[D]=arguments[D];return na()(E).call(E,0,e)}}F(b);var h=Ya()(g).call(g,function(B,E){return Math.max(B,E.ndim)},0),k=Int32Array.from({length:h},function(){return 1}),l=L(g),n;try{for(l.s();!(n=l.n()).done;)for(var m=n.value,p=h,t=m.ndim;0<p--&&0<t--;)if(1===k[p])k[p]=m.shape[t];else if(k[p]!=m.shape[t]&&1!=m.shape[t])throw Error("Shapes are not broadcast-compatible.");}catch(B){l.e(B)}finally{l.f()}var v=new Int32Array(h),
u=new Ka[b](Ya()(k).call(k,function(B,E){return B*E},1)),x=Array(g.length),w=new Int32Array(g.length),y=new Int32Array(g.length),z=0;c(0);return new fa(k,u)}function ka(g,b){var a="undefined"!==typeof Sb.a&&Tb()(g)||g["@@iterator"];if(!a){if(Ub()(g)||(a=ha(g))||b&&g&&"number"===typeof g.length){a&&(g=a);var c=0;b=function(){};return{s:b,n:function(){return c>=g.length?{done:!0}:{done:!1,value:g[c++]}},e:function(l){throw l;},f:b}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}var e=!0,h=!1,k;return{s:function(){a=a.call(g)},n:function(){var l=a.next();e=l.done;return l},e:function(l){h=!0;k=l},f:function(){try{if(!e&&null!=a["return"])a["return"]()}finally{if(h)throw k;}}}}function ha(g,b){var a;if(g){if("string"===typeof g)return ua(g,b);var c=na()(a=Object.prototype.toString.call(g)).call(a,8,-1);"Object"===c&&g.constructor&&(c=g.constructor.name);if("Map"===c||"Set"===c)return qb()(g);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return ua(g,
b)}}function ua(g,b){if(null==b||b>g.length)b=g.length;for(var a=0,c=Array(b);a<b;a++)c[a]=g[a];return c}function xa(g){var b=ya();return function(){var a=Eb()(g);if(b){var c=Eb()(this).constructor;a=gb()(a,arguments,c)}else a=a.apply(this,arguments);return Vb()(this,a)}}function ya(){if("undefined"===typeof Reflect||!gb.a||gb.a.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(gb()(Boolean,[],function(){})),!0}catch(g){return!1}}function ia(g,b){function a(m){var p;
return Ga.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!("object"===id()(m)&&"length"in m)){t.next=11;break}p=m.length;if("number"===typeof p){t.next=4;break}throw Error("Illegal argument(s).");case 4:if(0===p%1){t.next=6;break}throw Error("Illegal argument(s).");case 6:if(0!==p){t.next=8;break}throw Error("Illegal argument(s).");case 8:return t.next=10,p;case 10:return t.delegateYield(a(m[0]),"t0",11);case 11:case "end":return t.stop()}},e)}function c(m,p){if(m===a.length)l[n++]=p;else{if(p.length!==
a[m])throw Error("Nested array not axis-aligned.");for(var t=0;t<a[m];t++)c(m+1,p[t])}}var e=Ga.a.mark(a);null==b&&(b=g,g=void 0);if(("object"==id()(b)||"function"==typeof b)&&"shape"in b&&"data"in b){var h=b.data;if(null==g)g=b.dtype;else if("float"===g){var k;g=Jb()(k=b.dtype).call(k,"float")&&Object.prototype.hasOwnProperty.call(Ka,g)?b.dtype:"float64"}F(g);h=h instanceof Ka[g]?na()(h).call(h):Ka[g].from(h);return new fa(b.shape,h)}a=Int32Array.from(a(b));null==g?g=function v(p,t){if(p===a.length)return H(t);
for(var u=a[p]-1,x=v(p+1,t[u]);0<=u;u--)x=jd(x,v(p+1,t[u]));return x}(0,b):"float"===g&&(g="float64");F(g);var l=new Ka[g](Ya()(a).call(a,function(p,t){return p*t},1)),n=0;c(0,b);return new fa(a,l)}function V(g,b){null==b&&(b=g,g=void 0);if(null!=g&&"float"!==g&&!(g in Ka))throw Error("asarray(dtype, arrayLike): Invalid dtype: '".concat(g,"'."));if(b instanceof fa){var a;return null==g||g===b.dtype||"float"===g&&Jb()(a=b.dtype).call(a,"float")?b:new fa(b.shape,Ka[g].from(b.data))}"float"===g&&(g=
"float64");return ia(g,b)}function Fa(g,b,a){function c(v){if(v===g)for(var u=a.length;0<u--;)for(var x=a[u].shape[v]*n;0<x--;)p[--t]=a[u].data[--m[u]];else for(u=h[v];0<u--;)c(v+1)}var e;null==a&&(null==b?(a=g,g=void 0):(a=b,b=void 0,"string"===typeof g&&(b=g,g=void 0)));a=qb()(a,function(v){return V(b,v)});null==g&&(g=0);null==b&&(b=jd.apply(void 0,Za()(dc()(a).call(a,function(v){return v.dtype}))));0>g&&(g+=a[0].shape.length);if(0>g||g>=a[0].shape.length)throw Error("Axis out of bounds.");for(var h=
Int32Array.from(a[0].shape),k=function(v){var u=a[v].shape;if(h.length!=u.length)throw Error("All shapes must have the same length.");if(!Hb()(h).call(h,function(x,w){return h[w]===u[w]||g===w}))throw Error("Shape along all axes but the concatentation axis must match.");h[g]+=u[g]},l=a.length;0<--l;)k(l);var n=Ya()(e=na()(h).call(h,g+1)).call(e,function(v,u){return v*u},1),m=Int32Array.from(a,function(v){return v.data.length}),p=new Ka[b](Ya()(h).call(h,function(v,u){return v*u},1)),t=p.length;c(0);
return new fa(h,p)}function Ca(g,b,a){null==a&&(null==b?(a=g,g=void 0):(a=b,b=void 0,"string"===typeof g&&(b=g,g=void 0)));a=qb()(a,function(c){return V(b,c)});null==g&&(g=0);0>g&&(g+=a[0].shape.length+1);if(0>g||g>a[0].shape.length)throw Error("Axis out of bounds.");a=dc()(a).call(a,function(c){var e,h,k;return c.reshape.apply(c,Wa()(e=Za()(na()(h=c.shape).call(h,0,g))).call(e,[1],Za()(na()(k=c.shape).call(k,g))))});return Fa(g,b,a)}function Ea(g,b,a){function c(l){if(l===g.length)h[k++]=a.apply(void 0,
Za()(e));else for(e[l]=0;e[l]<g[l];e[l]++)c(l+1)}g=Int32Array.from(g,function(l){if(0!==l%1)throw Error("tabulate(shape, dtype='object', idx2val): Invalid shape [".concat(g,"]."));return l});null==a&&(a=b,b=void 0);if(null==a)throw Error("tabulate(shape, dtype='object', idx2val): idx2val missing.");null==b&&(b="object");F(b);var e=new Int32Array(g.length),h=new Ka[b](Ya()(g).call(g,function(l,n){return l*n},1)),k=0;c(0);return new fa(g,h)}function Ia(g,b){if(null==b)b=g,g="float64";else{if(!(g in
Ka))throw Error("regular_simplex(dtype,N): dtype '".concat(g,"' not supported."));if(Jb()(g).call(g,"int"))throw Error("regular_simplex(dtype,N): dtype must not be integral.");}if(0!==b%1)throw Error("regular_simplex(N): N must be a valid integer.");if(!(0<b))throw Error("regular_simplex(N): N must be greater than 0.");b|=0;g=new Ka[g]((b+1)*b);for(var a=Int32Array.of(b+1,b),c=1;c<b+1;c++){for(var e=0;e<c-1;e++)g[b*c+e]=g[b*(c-1)+e];g[b*c+(c-2)]/=c;g[b*c+(c-1)]=Math.sqrt((c+1)/(2*c))}return new fa(a,
g)}function wa(g,b,a,c){b=V(b);var e=g(b,a).mapElems(function(l){return l*c}),h=g(Z([b,e],function(l,n){return l+n/2}),a+c/2).mapElems(function(l){return l*c}),k=g(Z([b,h],function(l,n){return l+n/2}),a+c/2).mapElems(function(l){return l*c});g=g(Z([b,k],function(l,n){return l+n}),a+c).mapElems(function(l){return l*c});return Z([b,e,h,k,g],function(l,n,m,p,t){return l+(n+2*(m+p)+t)/6})}function Qa(g,b){var a="undefined"!==typeof Sb.a&&Tb()(g)||g["@@iterator"];if(!a){if(Ub()(g)||(a=bb(g))||b&&g&&"number"===
typeof g.length){a&&(g=a);var c=0;b=function(){};return{s:b,n:function(){return c>=g.length?{done:!0}:{done:!1,value:g[c++]}},e:function(l){throw l;},f:b}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var e=!0,h=!1,k;return{s:function(){a=a.call(g)},n:function(){var l=a.next();e=l.done;return l},e:function(l){h=!0;k=l},f:function(){try{if(!e&&null!=a["return"])a["return"]()}finally{if(h)throw k;
}}}}function bb(g,b){var a;if(g){if("string"===typeof g)return db(g,b);var c=na()(a=Object.prototype.toString.call(g)).call(a,8,-1);"Object"===c&&g.constructor&&(c=g.constructor.name);if("Map"===c||"Set"===c)return qb()(g);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return db(g,b)}}function db(g,b){if(null==b||b>g.length)b=g.length;for(var a=0,c=Array(b);a<b;a++)c[a]=g[a];return c}function vb(g){return Uint8Array.from(ob(g))}function ob(g){var b,a,c,e,h,k,l;return Ga.a.wrap(function(n){for(;;)switch(n.prev=
n.next){case 0:c=function(){console.warn("_b64_decode(b64_chars): Base64 sequence ended unexpectedly.")},a=function(){for(;;){var m=g.next();var p=m.value;if(b=(b=m.done)||"="===p)return NaN;if("string"!==typeof p||1!==p.length)throw Error("_b64_decode(b64_chars): Invalid token in character sequence: ".concat(p,"."));p=Cd[p.charCodeAt(0)];if(-1!==p){if(!(0<=p))throw Error("_b64_decode(b64_chars): Invalid base64 character '".concat(p,"'."));return p}}},g=oc()(g);case 3:e=a();if(!b){n.next=7;break}return n.abrupt("return");
case 7:h=a();if(!b){n.next=10;break}return n.abrupt("return",c());case 10:return n.next=12,e<<2|h>>4;case 12:k=a();if(!b){n.next=15;break}return n.abrupt("return");case 15:return n.next=17,(h&15)<<4|k>>2;case 17:l=a();if(!b){n.next=20;break}return n.abrupt("return");case 20:return n.next=22,(k&3)<<6|l&63;case 22:n.next=3;break;case 24:case "end":return n.stop()}},vf)}function cb(g){var b="",a=Qa(kb(g,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})),c;try{for(a.s();!(c=a.n()).done;)b+=c.value}catch(e){a.e(e)}finally{a.f()}return b}
function kb(g){var b,a,c,e,h,k,l,n,m,p,t,v=arguments;return Ga.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:b=1<v.length&&void 0!==v[1]?v[1]:{};a=b.pad;c=void 0===a?!0:a;e=b.linewidth;h=void 0===e?128:e;if(0<h){u.next=3;break}throw Error("_b64_encode(bytes,{linewidth}): Invalid linewidth: ".concat(h,"."));case 3:k=oc()(g),g=Ga.a.mark(function w(){var y,z,B;return Ga.a.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:y=Qa(k),E.prev=1,y.s();case 3:if((z=y.n()).done){E.next=12;break}B=
z.value;B*=1;if(0<=B&&256>B){E.next=8;break}throw Error("_b64_encode(bytes): Invalid token in byte sequence: ".concat(B));case 8:return E.next=10,B;case 10:E.next=3;break;case 12:E.next=17;break;case 14:E.prev=14,E.t0=E["catch"](1),y.e(E.t0);case 17:return E.prev=17,y.f(),E.finish(17);case 20:case "end":return E.stop()}},w,null,[[1,14,17,20]])})(),l=Ga.a.mark(function y(){var z,B,E,D,I,K;return Ga.a.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:E=void 0;D=g.next();z=D.value;B=D.done;if(!B){Q.next=
7;break}return Q.abrupt("return");case 7:return Q.next=9,z>>2;case 9:E=(z&3)<<4;I=g.next();z=I.value;B=I.done;if(!B){Q.next=17;break}Q.next=16;return E;case 16:return Q.abrupt("return");case 17:return Q.next=19,z>>4|E;case 19:E=(z&15)<<2;K=g.next();z=K.value;B=K.done;if(!B){Q.next=27;break}Q.next=26;return E;case 26:return Q.abrupt("return");case 27:return Q.next=29,z>>6|E;case 29:return Q.next=31,z&63;case 31:Q.next=0;break;case 33:case "end":return Q.stop()}},y)})(),n=0,m=Qa(l),u.prev=8,m.s();case 10:if((p=
m.n()).done){u.next=23;break}t=p.value;if("number"===typeof t){u.next=14;break}throw Error("Assertion failed.");case 14:if(0<=t&&64>t){u.next=16;break}throw Error("Assertion failed.");case 16:return u.next=18,kd[t];case 18:if(0!==++n%h){u.next=21;break}u.next=21;return"\n";case 21:u.next=10;break;case 23:u.next=28;break;case 25:u.prev=25,u.t0=u["catch"](8),m.e(u.t0);case 28:return u.prev=28,m.f(),u.finish(28);case 31:if(!c){u.next=37;break}case 32:if(0===n++%4){u.next=37;break}u.next=35;return"=";
case 35:u.next=32;break;case 37:case "end":return u.stop()}},wf,null,[[8,25,28,31]])}function lb(g,b){var a="undefined"!==typeof Sb.a&&Tb()(g)||g["@@iterator"];if(!a){if(Ub()(g)||(a=oa(g))||b&&g&&"number"===typeof g.length){a&&(g=a);var c=0;b=function(){};return{s:b,n:function(){return c>=g.length?{done:!0}:{done:!1,value:g[c++]}},e:function(l){throw l;},f:b}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}var e=!0,h=!1,k;return{s:function(){a=a.call(g)},n:function(){var l=a.next();e=l.done;return l},e:function(l){h=!0;k=l},f:function(){try{if(!e&&null!=a["return"])a["return"]()}finally{if(h)throw k;}}}}function oa(g,b){var a;if(g){if("string"===typeof g)return ca(g,b);var c=na()(a=Object.prototype.toString.call(g)).call(a,8,-1);"Object"===c&&g.constructor&&(c=g.constructor.name);if("Map"===c||"Set"===c)return qb()(g);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return ca(g,
b)}}function ca(g,b){if(null==b||b>g.length)b=g.length;for(var a=0,c=Array(b);a<b;a++)c[a]=g[a];return c}function la(g){var b;g=oc()(g);for(var a=[];;){var c=g.next(),e=c.value;if(c.done)throw Error("b64_parse(b64_chars): Invalid b64_chars.");if("["===e)break;a.push(e)}a=xf()(b=a.join("")).call(b);if(""===a)throw Error("b64_parse(b64_chars): dtype=object not (yet) supported.");F(a);b=[];for(e=[];;){var h=g.next();c=h.value;if(h.done)throw Error("b64_parse(b64_chars): Invalid b64_chars.");if("]"===
c&&0===e.length)break;if("]"===c||","===c){e=e.join("");if(isNaN(e))throw Error('b64_parse(b64_chars): Invalid shape entry: "'.concat(e,'".'));b.push(1*e);if("]"===c)break;e=[]}else e.push(c)}b=Int32Array.from(b);g=ob(g);a=Ka[a];c=new Uint8Array(Ya()(b).call(b,function(m,p){return m*p},a.BYTES_PER_ELEMENT));e=new Uint8Array(a.BYTES_PER_ELEMENT);for(h=0;h<c.length;){for(var k=0;k<e.length;k++){var l=g.next(),n=l.value;if(l.done)throw Error("b64_parse(b64_chars): b64_chars too short.");e[k]=n}pc||Dd()(e).call(e);
for(k=0;k<e.length;k++,h++)c[h]=e[k]}return new fa(b,new a(c.buffer))}function ra(g){var b="",a=lb(Na(g,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})),c;try{for(a.s();!(c=a.n()).done;)b+=c.value}catch(e){a.e(e)}finally{a.f()}return b}function Na(g){var b,a,c,e=arguments;return Ga.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:a=1<e.length&&void 0!==e[1]?e[1]:{};g=V(g);c=g.data;if("object"!==g.dtype){h.next=5;break}throw Error("b64_format(A): A.dtype='".concat(g.dtype,"' not supported."));
case 5:if(pc){h.next=7;break}throw Error("Big endianness not (yet) supported.");case 7:return h.delegateYield(Wa()(b="".concat(g.dtype,"[")).call(b,g.shape.join(","),"]\n"),"t0",8);case 8:return h.delegateYield(kb(new Uint8Array(c.buffer,c.byteOffset,c.byteLength),a),"t1",9);case 9:case "end":return h.stop()}},yf)}function za(g,b){var a="undefined"!==typeof Sb.a&&Tb()(g)||g["@@iterator"];if(!a){if(Ub()(g)||(a=Ma(g))||b&&g&&"number"===typeof g.length){a&&(g=a);var c=0;b=function(){};return{s:b,n:function(){return c>=
g.length?{done:!0}:{done:!1,value:g[c++]}},e:function(l){throw l;},f:b}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var e=!0,h=!1,k;return{s:function(){a=a.call(g)},n:function(){var l=a.next();e=l.done;return l},e:function(l){h=!0;k=l},f:function(){try{if(!e&&null!=a["return"])a["return"]()}finally{if(h)throw k;}}}}function Ma(g,b){var a;if(g){if("string"===typeof g)return Xa(g,b);var c=
na()(a=Object.prototype.toString.call(g)).call(a,8,-1);"Object"===c&&g.constructor&&(c=g.constructor.name);if("Map"===c||"Set"===c)return qb()(g);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Xa(g,b)}}function Xa(g,b){if(null==b||b>g.length)b=g.length;for(var a=0,c=Array(b);a<b;a++)c[a]=g[a];return c}function wb(g){function b(){switch(k){default:h(k);case "{":a:{var l={};if("{"!==k)throw Error("Assertion failed.");for(;;){if("}"===(k=e())){k=e();break a}var n=b();":"!==
k&&h(k,end);k=e();l[n]=b();switch(k){default:h(k,",' or '}");case ",":continue;case "}":k=e();break a}}}return l;case '"':case "'":a:{l=k;switch(l){default:throw Error("Assertion failed.");case "'":case '"':}for(n="";;)switch(k=c()){case l:k=e();break a;case "\\":switch(k=c()){case "u":for(var m=0,p=0;4>p;p++)switch(m<<=8,k=c()){default:h(k,"Hexadecimal digit");case "f":case "F":++m;case "e":case "E":++m;case "d":case "D":++m;case "c":case "C":++m;case "b":case "B":++m;case "a":case "A":++m;case "9":++m;
case "8":++m;case "7":++m;case "6":++m;case "5":++m;case "4":++m;case "3":++m;case "2":++m;case "1":++m;case "0":++m}n+=Ed()(m);continue;case "b":n+="\b";continue;case "f":n+="\f";continue;case "n":n+="\n";continue;case "r":n+="\r";continue;case "t":n+="\t";continue}default:n+=k}}return n;case "(":case "[":a:{b:switch(k){case "(":l=")";break b;case "[":l="]";break b;default:throw Error("Assertion failed.");}for(n=[];;){switch(k=e()){case l:k=e();l=n;break a}n.push(b());switch(k){default:h(k,",' or '".concat(l));
case ",":continue;case l:k=e();l=n;break a}}}return l;case "T":if("T"!==k)throw Error("Assertion failed.");m=za("rue");try{for(m.s();!(l=m.n()).done;)n=l.value,k=c(),n!==k&&h(k,n)}catch(u){m.e(u)}finally{m.f()}k=e();return!0;case "F":if("F"!==k)throw Error("Assertion failed.");l=za("alse");try{for(l.s();!(m=l.n()).done;)p=m.value,k=c(),p!==k&&h(k,p)}catch(u){l.e(u)}finally{l.f()}k=e();return!1;case "N":if("N"!==k)throw Error("Assertion failed.");l=za("one");var t;try{for(l.s();!(t=l.n()).done;){var v=
t.value;k=c();v!==k&&h(k,v)}}catch(u){l.e(u)}finally{l.f()}k=e();return null;case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case ".":case "8":case "+":case "9":case "-":l="";a:for(;;k=c())switch(k){case "\f":case "\n":case "\r":case "\t":case "\v":case " ":k=e();default:break a;case "0":case "1":case "2":case "3":case "4":case "a":case "A":case "5":case "b":case "B":case "6":case "c":case "C":case "7":case "d":case "D":case ".":case "8":case "e":case "E":case "+":case "9":case "f":case "F":case "-":l+=
k}l*=1;isNaN(l)&&h(l);return l}}var a=function(){var l=!1,n=0,m=oc()(g),p=function(){var t=m.next(),v=t.value;t=t.done;++n;if(t){if(l)throw Error("pyon_parse: Character sequence ended unexpectedly.");l=!0;return null}return v};return[p,function(){for(var t;;)switch(t=p()){default:return t;case "\f":case "\n":case "\r":case "\t":case "\v":case " ":}},function(t,v){var u,x;v=null==v?"Invalid character":"Expected ".concat(v,", but ");throw Error(Wa()(u=Wa()(x="pyon_parse: ".concat(v," '")).call(x,t,
"' encountered as ")).call(u,n,"-th character."));}]}();a=ea()(a,3);var c=a[0],e=a[1],h=a[2],k=e();return b()}function yb(g){return Uint8Array.from(tb(g))}function tb(g){var b,a,c,e,h,k,l,n;return Ga.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:g=V(g),c=function(){switch(g.dtype){default:throw Error("nd_to_npy: A.dtype=".concat(g.dtype," not yet supported."));case "int32":return"i4";case "float32":return"f4";case "float64":return"f8";case "complex128":return"c16"}}(),c=pc?"<"+c:">"+c,e=
Wa()(b=Wa()(a='{"descr": "'.concat(c,'", "fortran_order": False, "shape": (')).call(a,g.shape)).call(b,0<g.ndim?",":"",")}"),h=0;case 5:if(!(h<ld.length)){m.next=11;break}m.next=8;return md()(ld).call(ld,h);case 8:h++;m.next=5;break;case 11:return m.next=13,1;case 13:return m.next=15,0;case 15:k=e.length+11+63>>>6<<6;if(!(65535<k)){m.next=18;break}throw Error("nd_to_npy: Header too large.");case 18:return m.next=20,k-10>>>0&255;case 20:return m.next=22,k-10>>>8&255;case 22:if(0===k%64){m.next=24;
break}throw Error("Assertion failed.");case 24:l=0;case 25:if(!(l<e.length)){m.next=31;break}m.next=28;return md()(e).call(e,l);case 28:l++;m.next=25;break;case 31:n=e.length+11;case 32:if(!(n<k)){m.next=38;break}m.next=35;return md()(" ").call(" ",0);case 35:n++;m.next=32;break;case 38:return m.next=40,md()("\n").call("\n",0);case 40:return m.delegateYield(new Uint8Array(g.data.buffer,g.data.byteOffset,g.data.byteLength),"t0",41);case 41:case "end":return m.stop()}},zf)}function Ac(g){var b,a,c,
e=0,h=function(){var x=oc()(g);return function(){var w=x.next(),y=w.value;w=w.done;++e;if(w)throw Error("npy_to_nd: byte sequence ended unexpectedly.");return y}}();g=void 0;for(var k="";6>k.length;)k+=Ed()(h());if(k!==ld)throw Error("npy_to_nd: byte sequence does not start with '\u0093NUMPY'.");var l=Wa()(b="".concat(h(),".")).call(b,h());switch(l){default:throw Error("npy_bytes: npy-file version ".concat(l," not supported."));case "1.0":case "2.0":}var n=function(){var x=1*h()+256*h();"2.0"===l&&
(x+=65536*h()+16777216*h());if(0>x)throw Error("Assertion failed.");return wb(Ga.a.mark(function y(){return Ga.a.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!(0<x--)){z.next=5;break}z.next=3;return Ed()(h());case 3:z.next=0;break;case 5:case "end":return z.stop()}},y)})())}();a:switch(n.descr[0]){default:throw Error("npy_to_nd: dtype '".concat(n.descr,"' not yet supported."));case "<":var m=!0;break a;case ">":m=!1}var p=function(){var x;switch(na()(x=n.descr).call(x,1)){default:throw Error("npy_to_nd: dtype '".concat(n.descr,
"' not yet supported."));case "i4":return"int32";case "f4":return"float32";case "f8":return"float64";case "c16":return"complex128"}}();b=Ka[p];k=Uint8Array.from({length:Ya()(a=n.shape).call(a,function(x,w){return x*w},b.BYTES_PER_ELEMENT)},h);if(m!==pc)for(a=b.BYTES_PER_ELEMENT>>>Jb()(p).call(p,"complex"),m=0;m<k.length;m+=a){p=m;for(var t=m+a;p<--t;p++){var v=k[p];k[p]=k[t];k[t]=v}}a=Int32Array.from(n.shape);n.fortran_order&&Dd()(a).call(a);var u=new fa(a,new b(k.buffer));n.fortran_order&&1<u.ndim&&
(u=(c=u).transpose.apply(c,Za()(Ga.a.mark(function w(){var y;return Ga.a.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:y=u.ndim;case 1:if(!(0<y--)){z.next=6;break}z.next=4;return y;case 4:z.next=1;break;case 6:case "end":return z.stop()}},w)})())));return u}function Uc(g){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(k,l){return(k>l)-(k<l)};if(!(b instanceof Function))throw Error("argmin(seq,compare_fn): compare_fn must be a function.");ie()(g)?g=oc()(g):console.warn("argmin(seq,compare_fn): seq[Symbol.iterator] does not exist.");
for(var a=function(){var k=g.next();if(k.done)throw Error("argmin(seq,compare_fn): seq must be an iterable containing at least one item.");return k.value}(),c=0,e=1;;e++){var h=g.next();if(h.done)return c;0<b(a,h.value)&&(c=e,a=h.value)}}function kc(g){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(a,c){return(a>c)-(a<c)};if(!(b instanceof Function))throw Error("argmax(seq,compare_fn): compare_fn must be a function.");return Uc(g,function(a,c){return-b(a,c)})}function Vc(g){var b=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(e,h){return(e>h)-(e<h)};if(!(b instanceof Function))throw Error("argmin(seq,compare_fn): compare_fn must be a function.");ie()(g)?g=oc()(g):console.warn("argmin(seq,compare_fn): seq[Symbol.iterator] does not exist.");for(var a=function(){var e=g.next();if(e.done)throw Error("argmin(seq,compare_fn): seq must be an iterable containing at least one item.");return e.value}();;){var c=g.next();if(c.done)return a;0<b(a,c.value)&&(a=c.value)}}
function Ad(g){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(a,c){return(a>c)-(a<c)};if(!(b instanceof Function))throw Error("argmax(seq,compare_fn): compare_fn must be a function.");return Vc(g,function(a,c){return-b(a,c)})}function Zb(g,b){var a="undefined"!==typeof Sb.a&&Tb()(g)||g["@@iterator"];if(!a){if(Ub()(g)||(a=Bc(g))||b&&g&&"number"===typeof g.length){a&&(g=a);var c=0;b=function(){};return{s:b,n:function(){return c>=g.length?{done:!0}:{done:!1,value:g[c++]}},e:function(l){throw l;
},f:b}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var e=!0,h=!1,k;return{s:function(){a=a.call(g)},n:function(){var l=a.next();e=l.done;return l},e:function(l){h=!0;k=l},f:function(){try{if(!e&&null!=a["return"])a["return"]()}finally{if(h)throw k;}}}}function Bc(g,b){var a;if(g){if("string"===typeof g)return Jc(g,b);var c=na()(a=Object.prototype.toString.call(g)).call(a,8,-1);"Object"===
c&&g.constructor&&(c=g.constructor.name);if("Map"===c||"Set"===c)return qb()(g);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Jc(g,b)}}function Jc(g,b){if(null==b||b>g.length)b=g.length;for(var a=0,c=Array(b);a<b;a++)c[a]=g[a];return c}function Kc(g,b,a){var c,e;return Ga.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(0===a%1){h.next=2;break}throw Error("linspace(start,end,num): num must be an integer greater than 1.");case 2:if(1<a){h.next=4;break}throw Error("linspace(start,end,num): num must be an integer.greater than 1.");
case 4:if(isFinite(g)){h.next=6;break}throw Error("linspace(start,end,num): start must be a finite number.");case 6:if(isFinite(b)){h.next=8;break}throw Error("linspace(start,end,num): end must be a finite number.");case 8:c=0;case 9:if(!(c<a)){h.next=16;break}e=c/(a-1);h.next=13;return g*(1-e)+e*b;case 13:c++;h.next=9;break;case 16:case "end":return h.stop()}},Af)}function Lc(g,b){var a,c,e,h=arguments;return Ga.a.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:a=2<h.length&&void 0!==h[2]?h[2]:
1;if(0===g%1){k.next=3;break}throw Error("range(start, stop, step=1): start not a valid integer.");case 3:if(0===b%1){k.next=5;break}throw Error("range(start, stop, step=1): stop not a valid integer.");case 5:if(0===a%1){k.next=7;break}throw Error("range(start, stop, step=1): step not a valid integer.");case 7:if(0!==a){k.next=9;break}throw Error("range(start, stop, step=1): step must not be 0.");case 9:if(!(0<a)){k.next=19;break}c=g;case 11:if(!(c<b)){k.next=17;break}k.next=14;return c;case 14:c+=
a;k.next=11;break;case 17:k.next=26;break;case 19:e=g;case 20:if(!(e>b)){k.next=26;break}k.next=23;return e;case 23:e+=a;k.next=20;break;case 26:case "end":return k.stop()}},Bf)}function Cc(){var g,b,a,c,e,h,k=arguments;return Ga.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:h=function(n){var m,p,t;return Ga.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(!(n<a.length)){v.next=20;break}m=Zb(a[n]);v.prev=2;m.s();case 4:if((p=m.n()).done){v.next=10;break}t=p.value;e[n]=t;return v.delegateYield(h(n+
1),"t0",8);case 8:v.next=4;break;case 10:v.next=15;break;case 12:v.prev=12,v.t1=v["catch"](2),m.e(v.t1);case 15:return v.prev=15,m.f(),v.finish(15);case 18:v.next=22;break;case 20:return v.next=22,na()(e).call(e);case 22:case "end":return v.stop()}},g,null,[[2,12,15,18]])};g=Ga.a.mark(h);b=k.length;a=Array(b);for(c=0;c<b;c++)a[c]=k[c];a=dc()(a).call(a,function(n){return n instanceof Array||n instanceof Float32Array||n instanceof Float64Array||n instanceof Int8Array||n instanceof Int16Array||n instanceof
Int32Array||n instanceof Uint8Array||n instanceof Uint16Array||n instanceof Uint32Array?na()(n).call(n):Za()(n)});e=Array(a.length);return l.delegateYield(h(0),"t0",6);case 6:case "end":return l.stop()}},Cf)}function Mc(g){var b,a,c,e;return Ga.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:b=0,a=Zb(g),h.prev=2,a.s();case 4:if((c=a.n()).done){h.next=10;break}e=c.value;h.next=8;return[b++,e];case 8:h.next=4;break;case 10:h.next=15;break;case 12:h.prev=12,h.t0=h["catch"](2),a.e(h.t0);case 15:return h.prev=
15,a.f(),h.finish(15);case 18:case "end":return h.stop()}},Df,null,[[2,12,15,18]])}function Dc(){var g,b,a,c,e,h,k,l,n=arguments;return Ga.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:g=n.length;b=Array(g);for(a=0;a<g;a++)b[a]=n[a];if(0<b.length){m.next=3;break}throw Error("zip(...seqs): seqs.length must be at least 1.");case 3:for(e=c=b.length;0<e--;)b[e]=oc()(b[e]);case 5:h=[],k=0;case 7:if(!(k<c)){m.next=15;break}l=b[k].next();if(!l.done){m.next=11;break}return m.abrupt("return");case 11:h.push(l.value);
case 12:k++;m.next=7;break;case 15:return m.next=17,h;case 17:m.next=5;break;case 19:case "end":return m.stop()}},Ef)}function Wc(g,b){var a;return Ga.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:void 0===b&&(b=g,g=Infinity);if(Infinity===g){c.next=6;break}if(0===g%1){c.next=4;break}throw Error("repeat(n,seq): n must be a non-negative int or Infinity.");case 4:if(0<=g){c.next=6;break}throw Error("repeat(n,seq): n must be a non-negative int or Infinity.");case 6:b=b instanceof Array||b instanceof
Float32Array||b instanceof Float64Array||b instanceof Int8Array||b instanceof Int16Array||b instanceof Int32Array||b instanceof Uint8Array||b instanceof Uint16Array||b instanceof Uint32Array?na()(b).call(b):Za()(b),a=g;case 8:if(!(0<a--)){c.next=12;break}return c.delegateYield(b,"t0",10);case 10:c.next=8;break;case 12:case "end":return c.stop()}},Ff)}function Nc(g,b,a){if(!(g<=b))throw Error("binary_rangesearch(from, until, compass_fn): from must not be greater than until.");for(;g<b;){var c=g+b>>>
1,e=a(c);if(0>e)g=c+1;else if(0<e)b=c;else return c}return~g}function uc(g,b){var a="undefined"!==typeof Sb.a&&Tb()(g)||g["@@iterator"];if(!a){if(Ub()(g)||(a=Bd(g))||b&&g&&"number"===typeof g.length){a&&(g=a);var c=0;b=function(){};return{s:b,n:function(){return c>=g.length?{done:!0}:{done:!1,value:g[c++]}},e:function(l){throw l;},f:b}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var e=
!0,h=!1,k;return{s:function(){a=a.call(g)},n:function(){var l=a.next();e=l.done;return l},e:function(l){h=!0;k=l},f:function(){try{if(!e&&null!=a["return"])a["return"]()}finally{if(h)throw k;}}}}function Bd(g,b){var a;if(g){if("string"===typeof g)return Ha(g,b);var c=na()(a=Object.prototype.toString.call(g)).call(a,8,-1);"Object"===c&&g.constructor&&(c=g.constructor.name);if("Map"===c||"Set"===c)return qb()(g);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Ha(g,b)}}
function Ha(g,b){if(null==b||b>g.length)b=g.length;for(var a=0,c=Array(b);a<b;a++)c[a]=g[a];return c}function Ra(g,b){var a="undefined"!==typeof Sb.a&&Tb()(g)||g["@@iterator"];if(!a){if(Ub()(g)||(a=hb(g))||b&&g&&"number"===typeof g.length){a&&(g=a);var c=0;b=function(){};return{s:b,n:function(){return c>=g.length?{done:!0}:{done:!1,value:g[c++]}},e:function(l){throw l;},f:b}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}var e=!0,h=!1,k;return{s:function(){a=a.call(g)},n:function(){var l=a.next();e=l.done;return l},e:function(l){h=!0;k=l},f:function(){try{if(!e&&null!=a["return"])a["return"]()}finally{if(h)throw k;}}}}function hb(g,b){var a;if(g){if("string"===typeof g)return zb(g,b);var c=na()(a=Object.prototype.toString.call(g)).call(a,8,-1);"Object"===c&&g.constructor&&(c=g.constructor.name);if("Map"===c||"Set"===c)return qb()(g);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return zb(g,
b)}}function zb(g,b){if(null==b||b>g.length)b=g.length;for(var a=0,c=Array(b);a<b;a++)c[a]=g[a];return c}function vc(g,b){var a="undefined"!==typeof Sb.a&&Tb()(g)||g["@@iterator"];if(!a){if(Ub()(g)||(a=Xc(g))||b&&g&&"number"===typeof g.length){a&&(g=a);var c=0;b=function(){};return{s:b,n:function(){return c>=g.length?{done:!0}:{done:!1,value:g[c++]}},e:function(l){throw l;},f:b}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}var e=!0,h=!1,k;return{s:function(){a=a.call(g)},n:function(){var l=a.next();e=l.done;return l},e:function(l){h=!0;k=l},f:function(){try{if(!e&&null!=a["return"])a["return"]()}finally{if(h)throw k;}}}}function Xc(g,b){var a;if(g){if("string"===typeof g)return hd(g,b);var c=na()(a=Object.prototype.toString.call(g)).call(a,8,-1);"Object"===c&&g.constructor&&(c=g.constructor.name);if("Map"===c||"Set"===c)return qb()(g);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return hd(g,
b)}}function hd(g,b){if(null==b||b>g.length)b=g.length;for(var a=0,c=Array(b);a<b;a++)c[a]=g[a];return c}function ib(g,b){var a=Math.max(Math.abs(g),Math.abs(b));if(0===a)return[1,0,0];g/=a;b/=a;var c=Math.sqrt(g*g+b*b);g/=c;b/=c;c*=a;if(!(0<=c))throw Error("Assertion failed: "+c);return[g,b,c]}function Ta(g,b,a,c,e,h){if(0!==b%1)throw Error("Assertion failed.");if(0!==a%1)throw Error("Assertion failed.");if(0!==c%1)throw Error("Assertion failed.");if(!(0<=b))throw Error("Assertion failed.");if(!(0<=
a))throw Error("Assertion failed.");if(!(0<=c))throw Error("Assertion failed.");if(0!==g.length%1)throw Error("Assertion failed.");if(!(a<g.length-b+1))throw Error("Assertion failed.");if(!(c<g.length-b+1))throw Error("Assertion failed.");if(!(1E-6>=Math.abs(Nb()(e,h)-1)))throw Error("Assertion failed.");a|=0;c|=0;e=+e;h=+h;for(b|=0;0<b--;){var k=g[a],l=g[c];g[a]=e*k+h*l;g[c]=e*l-h*k;a=a+1|0;c=c+1|0}}function je(g,b,a,c,e,h){if(!(1E-6>=Math.abs(Nb()(e,h)-1)))throw Error("Assertion failed.");a|=0;
c|=0;e=+e;h=+h;for(var k=b|0;0<k--;){var l=g[a],n=g[c];g[a]=e*l-h*n;g[c]=e*n+h*l;a=a+b|0;c=c+b|0}}function Gf(g,b){var a="undefined"!==typeof Sb.a&&Tb()(g)||g["@@iterator"];if(!a){if(Ub()(g)||(a=Hf(g))||b&&g&&"number"===typeof g.length){a&&(g=a);var c=0;b=function(){};return{s:b,n:function(){return c>=g.length?{done:!0}:{done:!1,value:g[c++]}},e:function(l){throw l;},f:b}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}var e=!0,h=!1,k;return{s:function(){a=a.call(g)},n:function(){var l=a.next();e=l.done;return l},e:function(l){h=!0;k=l},f:function(){try{if(!e&&null!=a["return"])a["return"]()}finally{if(h)throw k;}}}}function Hf(g,b){var a;if(g){if("string"===typeof g)return ke(g,b);var c=na()(a=Object.prototype.toString.call(g)).call(a,8,-1);"Object"===c&&g.constructor&&(c=g.constructor.name);if("Map"===c||"Set"===c)return qb()(g);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return ke(g,
b)}}function ke(g,b){if(null==b||b>g.length)b=g.length;for(var a=0,c=Array(b);a<b;a++)c[a]=g[a];return c}function If(g){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"fro",a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;g=V(g);switch(b){case "fro":b=new Mb;break;default:throw Error("norm(A,ord,axis): Unsupported ord: ".concat(b,"."));}if(null==a){a=Gf(g.data);var c;try{for(a.s();!(c=a.n()).done;)b.include(c.value)}catch(e){a.e(e)}finally{a.f()}return b.result}throw Error("norm(A,ord,axis): axis argument not yet supported.");
}function wc(g,b,a){for(var c=g;0<--c;)for(var e=c;0<e--;){var h=a+g*c+e,k=a+g*e+c,l=b[h];b[h]=b[k];b[k]=l}}function nd(g){var b,a=na()(b=g.shape).call(b,-2);a=ea()(a,2);b=a[0];if(b!=a[1])throw Error("In-place transposition is only supported for square matrices.");g=g.data;for(a=0;a<g.length;a+=b*b)wc(b,g,a)}function Fd(g,b,a,c,e,h,k,l){g|=0;b|=0;c|=0;h|=0;l=l+b|0;if(!(g<=b))throw Error("Assertion failed.");for(var n=new Mb,m=g;0<m--;)a[c+g*m+m]=1;m=0;a:for(;m<g&&m<b-1;m++){var p=l+b*m+m,t=m;b:for(;++t<
g;){var v=l+b*t+m,u=k[v];if(0===u)continue b;u=ib(k[p],u);var x=ea()(u,3);u=x[0];var w=x[1];x=x[2];k[v]=0;if(0===w)continue b;k[p]=x;Ta(k,b-1-m,p+1,v+1,u,w);Ta(a,1+t,c+g*m,c+g*t,u,w)}t=l+b*(m-1);n.reset();for(v=b-1;;){u=k[t+v]=k[l+b*m+v];if(--v<=m)break;n.include(u)}if(0===n.max){k[t+(m+1)]=0;continue a}v=n.resultIncl(k[t+(m+1)])*(0<k[t+(m+1)]?-1:1);n.include(k[t+(m+1)]-=v);u=n.max;w=Math.sqrt(n.sum);for(x=m;++x<b;)k[t+x]=k[t+x]/u/w;for(u=m;++u<g;){w=0;for(x=m;++x<b;)w+=k[l+b*u+x]*k[t+x];w*=2;for(x=
m;++x<b;)k[l+b*u+x]-=k[t+x]*w}k[p+1]=v}wc(g,a,c);for(a=g;0<a--;)e[h+(g+1)*a+(a+1)]=a<b-1?k[l+b*a+(a+1)]:0,e[h+(g+1)*a+a]=k[l+b*a+a];for(e=Math.min(g,b-1);;){--e;Ja()(k).call(k,0,l+b*e,l+b*(e+1));k[l+b*e+(e+1)]=1;if(0>e)break;h=l+b*(e-1);for(a=e;a<g;a++){c=0;for(n=e;++n<b;)c+=k[l+b*a+n]*k[h+n];c*=2;for(n=e;++n<b;)k[l+b*a+n]-=k[h+n]*c}}}function Jf(g){var b,a;g=V(g);if(2>g.ndim)throw Error("bidiag_decomp(A): A must be at least 2D.");if(Jb()(b=g.dtype).call(b,"complex"))throw Error("bidiag_decomp(A): complex A not yet supported.");
var c=Ka["float32"===g.dtype?"float32":"float64"];b=Int32Array.from(g.shape);var e=Int32Array.from(b),h=Int32Array.from(b),k=na()(a=g.shape).call(a,-2);a=ea()(k,2);var l=a[0],n=a[1],m=g.data.length/(l*n)|0;a=Math.min(l,n)|0;k=(l>=n?a:a+1)|0;b[b.length-1]=a;e[e.length-2]=a;e[e.length-1]=k;h[h.length-2]=k;a=function(){if(l===n){for(var t=c.from(g.data),v=new c(t.length),u=new c(t.length),x=0;x<t.length;x+=n*n){var w=n,y=v,z=t,B=u,E=x;w|=0;E|=0;for(var D=new Mb,I=w;0<I--;)y[E+w*I+I]=1;for(I=w;0<I--;)B[E+
w*I+I]=1;for(I=0;I<w-1;I++){for(var K=E+w*I+I,Q=I;++Q<w;){var P=E+w*Q+I,M=z[P];if(0!==M){M=ib(z[K],M);var N=ea()(M,3);M=N[0];var R=N[1];N=N[2];z[P]=0;0!==R&&(z[K]=N,Ta(z,w-1-I,K+1,P+1,M,R),Ta(y,1+Q,E+w*I,E+w*Q,M,R))}}D.reset();for(Q=w;--Q>I+1;)D.include(z[E+w*I+Q]);if(0!==D.max){Q=D.resultIncl(z[K+1])*(0<z[K+1]?-1:1);D.include(z[K+1]-=Q);P=D.max;M=Math.sqrt(D.sum);for(R=I;++R<w;)z[E+w*I+R]=z[E+w*I+R]/P/M;for(P=0;P<w;P++){M=0;for(R=I;++R<w;)M+=B[E+w*P+R]*z[E+w*I+R];M*=2;for(R=I;++R<w;)B[E+w*P+R]-=
z[E+w*I+R]*M}for(P=I;++P<w;){M=0;for(R=I;++R<w;)M+=z[E+w*P+R]*z[E+w*I+R];M*=2;for(R=I;++R<w;)z[E+w*P+R]-=z[E+w*I+R]*M}z[K+1]=Q;Ja()(z).call(z,0,K+2,E+w*(I+1))}}wc(w,B,E);wc(w,y,E)}return[v,t,u]}if(l>n){t=c.from(g.data);g=void 0;v=new c(m*n*n);u=new c(m*n*n);for(w=x=0;w<v.length;x+=l*n,w+=n*n){y=l;z=n;B=t;E=x;D=v;K=u;I=w;y|=0;z|=0;E|=0;I|=0;Q=new Mb;if(y<z)throw Error("Assertion failed.");for(P=z;0<P--;)K[I+z*P+P]=1;for(P=0;P<z;P++){M=E+z*P+P;for(R=P;++R<y;){N=E+z*R+P;var S=B[N];if(0!==S){S=ib(B[M],
S);var U=ea()(S,3);S=U[0];var T=U[1];U=U[2];0!==T&&(0>S&&(S*=-1,T*=-1,U*=-1),Ta(B,z-1-P,M+1,N+1,S,T),B[M]=U);B[N]=T}}if(P<z-2){Q.reset();for(R=z;--R>P+1;)Q.include(B[E+z*P+R]);if(0!==Q.max){R=Q.resultIncl(B[M+1])*(0<B[M+1]?-1:1);Q.include(B[M+1]-=R);N=Q.max;S=Math.sqrt(Q.sum);for(T=P;++T<z;)B[E+z*P+T]=B[E+z*P+T]/N/S;for(N=0;N<z;N++){S=0;for(T=P;++T<z;)S+=K[I+z*N+T]*B[E+z*P+T];S*=2;for(T=P;++T<z;)K[I+z*N+T]-=B[E+z*P+T]*S}for(N=P;++N<y;){S=0;for(T=P;++T<z;)S+=B[E+z*N+T]*B[E+z*P+T];S*=2;for(T=P;++T<
z;)B[E+z*N+T]-=B[E+z*P+T]*S}B[M+1]=R;Ja()(B).call(B,0,M+2,E+z*(P+1))}}}wc(z,K,I);for(K=z;0<--K;)D[I+z*K+K]=B[E+z*K+K],D[I+z*(K-1)+K]=B[E+z*(K-1)+K];D[I]=B[E];for(D=0;D<z;D++)for(I=D;I<z;I++)B[E+z*D+I]=+(D===I);for(D=z;0<D--;)for(I=y;--I>D;)K=B[E+z*I+D],0!==K&&(B[E+z*I+D]=0,Ta(B,z-D,E+z*I+D,E+z*D+D,Math.sqrt((1+K)*(1-K)),K))}return[t,v,u]}t=new c(m*(l+1)*n);if(!(l<n))throw Error("Assertion failed.");g=g.data;v=0;for(u=n;u<t.length;u+=n)for(x=u+l*n;u<x;v++,u++)t[u]=g[v];g=void 0;v=new c(m*l*l);u=new c(m*
l*(l+1));for(y=w=x=0;w<u.length;x+=l*l,w+=l*(l+1),y+=(l+1)*n)Fd(l,n,v,x,u,w,t,y);return[v,u,t]}();a=ea()(a,3);k=a[1];var p=a[2];return[new fa(b,a[0]),new fa(e,k),new fa(h,p)]}function Kf(g){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;g=V(g);if(2>g.ndim)throw Error("Input must be at least 2D.");return g.mapElems(g.dtype,function(a){for(var c=arguments.length,e=Array(1<c?c-1:0),h=1;h<c;h++)e[h-1]=arguments[h];c=na()(e).call(e,-2);c=ea()(c,2);return c[0]<c[1]-b?0:a})}function Lf(g){var b=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;g=V(g);if(2>g.ndim)throw Error("Input must be at least 2D.");return g.mapElems(g.dtype,function(a){for(var c=arguments.length,e=Array(1<c?c-1:0),h=1;h<c;h++)e[h-1]=arguments[h];c=na()(e).call(e,-2);c=ea()(c,2);return c[0]>c[1]-b?0:a})}function od(g,b,a,c,e,h,k){if(!(g<=b))throw Error("Assertion failed.");g|=0;b|=0;a|=0;e|=0;k|=0;if(!(0<=e))throw Error("Assertion failed.");if(!(0<=k))throw Error("Assertion failed.");if(!(g*b<=c.length-e))throw Error("Assertion failed.");
if(!(g*a<=h.length-k))throw Error("Assertion failed.");for(var l=0;l<g;l++){for(var n=0;n<l;n++)for(var m=0;m<a;m++)h[k+a*l+m]-=c[e+b*l+n]*h[k+a*n+m];for(n=0;n<a;n++)h[k+a*l+n]/=c[e+b*l+l]}}function qc(g,b,a,c,e,h,k){if(!(g<=b))throw Error("Assertion failed.");g|=0;b|=0;a|=0;e|=0;k|=0;if(!(0<=e))throw Error("Assertion failed.");if(!(0<=k))throw Error("Assertion failed.");if(!(g*b<=c.length-e))throw Error("Assertion failed.");if(!(g*a<=h.length-k))throw Error("Assertion failed.");for(var l=g;0<l--;)for(var n=
a;0<n--;){for(var m=g;--m>l;)h[k+a*l+n]-=c[e+b*l+m]*h[k+a*m+n];h[k+a*l+n]/=c[e+b*l+l]}}function le(g,b,a,c,e,h,k){if(!(g<=b))throw Error("Assertion failed.");g|=0;b|=0;a|=0;e|=0;k|=0;if(!(0<=e))throw Error("Assertion failed.");if(!(0<=k))throw Error("Assertion failed.");if(!(g*b<=c.length-e))throw Error("Assertion failed.");if(!(g*a<=h.length-k))throw Error("Assertion failed.");for(;0<g--;){for(var l=a;0<l--;)h[k+a*g+l]/=c[e+b*g+g];for(l=g;0<l--;)for(var n=a;0<n--;)h[k+a*l+n]-=c[e+b*g+l]*h[k+a*g+
n]}}function Gd(g,b,a,c,e,h,k){if(!(g<=b))throw Error("Assertion failed.");g|=0;b|=0;a|=0;e|=0;k|=0;if(!(0<=e))throw Error("Assertion failed.");if(!(0<=k))throw Error("Assertion failed.");if(!(g*b<=c.length-e))throw Error("Assertion failed.");if(!(g*a<=h.length-k))throw Error("Assertion failed.");for(var l=0;l<g;l++){for(var n=0;n<a;n++)h[k+a*l+n]/=c[e+b*l+l];for(n=l;++n<g;)for(var m=0;m<a;m++)h[k+a*n+m]-=c[e+b*l+n]*h[k+a*l+m]}}function Mf(g,b){function a(I){if(I===n-2){z=k*k;for(I=E=k*l;0<I--;)w[D+
I]=b[B+I];od(k,k,l,g,y,w,D);y+=z;B+=E;D+=E}else{for(var K=t[I];;K--){a(I+1);if(1==K)break;1<m[I-n+m.length]||(y-=z);1<p[I-n+p.length]||(B-=E)}z*=m[I-n+m.length]||1;E*=p[I-n+p.length]||1}}var c,e;g=V(g);if(2>g.ndim)throw Error("tril_solve(L,Y): L.ndim must be at least 2.");b=V(b);if(2>b.ndim)throw Error("tril_solve(L,Y): Y.ndim must be at least 2.");var h=na()(c=b.shape).call(c,-2);c=ea()(h,2);var k=c[0],l=c[1];if(g.shape[g.ndim-2]!==k)throw Error("tril_solve(L,Y): L and Y don't match.");if(g.shape[g.ndim-
1]!==k)throw Error("tril_solve(L,Y): Last two dimensions of L must be quadratic.");var n=Math.max(g.ndim,b.ndim),m=g.shape,p=b.shape,t=new Int32Array(n);Ja()(t).call(t,1,0,-2);t[n-2]=k;t[n-1]=l;c=0;for(h=[m,p];c<h.length;c++)for(var v=h[c],u=n-2,x=v.length-2;0<u--&&0<x--;)if(1===t[u])t[u]=v[x];else if(t[u]!=v[x]&&1!=v[x])throw Error("tril_solve(L,Y): L and Y not broadcast-compatible.");c=Hb()(e=[g,b]).call(e,function(I){return"float32"===I.dtype})?"float32":"float64";g=g.data;b=b.data;var w=new Ka[c](Ya()(t).call(t,
function(I,K){return I*K})),y=0,z=1,B=0,E=1,D=0;a(0);return new fa(t,w)}function Nf(g,b){function a(I){if(I===n-2){z=k*k;E=k*l;y-=z;B-=E;D-=E;for(I=E;0<I--;)w[D+I]=b[B+I];qc(k,k,l,g,y,w,D)}else{for(var K=t[I];;K--){a(I+1);if(1==K)break;1<m[I-n+m.length]||(y+=z);1<p[I-n+p.length]||(B+=E)}z*=m[I-n+m.length]||1;E*=p[I-n+p.length]||1}}var c,e;g=V(g);if(2>g.ndim)throw Error("triu_solve(U,Y): U.ndim must be at least 2.");b=V(b);if(2>b.ndim)throw Error("triu_solve(U,Y): Y.ndim must be at least 2.");var h=
na()(c=b.shape).call(c,-2);c=ea()(h,2);var k=c[0],l=c[1];if(g.shape[g.ndim-2]!==k)throw Error("triu_solve(U,Y): U and Y don't match.");if(g.shape[g.ndim-1]!==k)throw Error("triu_solve(U,Y): Last two dimensions of U must be quadratic.");var n=Math.max(g.ndim,b.ndim),m=g.shape,p=b.shape,t=new Int32Array(n);Ja()(t).call(t,1,0,-2);t[n-2]=k;t[n-1]=l;c=0;for(h=[m,p];c<h.length;c++)for(var v=h[c],u=n-2,x=v.length-2;0<u--&&0<x--;)if(1===t[u])t[u]=v[x];else if(t[u]!=v[x]&&1!=v[x])throw Error("triu_solve(U,Y): U and Y not broadcast-compatible.");
c=Hb()(e=[g,b]).call(e,function(I){return"float32"===I.dtype})?"float32":"float64";g=g.data;b=b.data;var w=new Ka[c](Ya()(t).call(t,function(I,K){return I*K})),y=g.length,z=1,B=b.length,E=1,D=w.length;a(0);return new fa(t,w)}function me(g,b,a,c){if(!(g<=b))throw Error("Assertion failed.");for(var e=new Of,h=0;h<g;h++)for(var k=0;k<=h;k++){e.set(a[c+b*h+k]);for(var l=0;l<k;l++)e.add(-a[c+b*h+l]*a[c+b*k+l]);if(h>k)a[c+b*h+k]=e.sum/a[c+b*k+k];else if(a[c+b*h+h]=Math.sqrt(e.sum),isNaN(a[c+b*h+h]))throw Error("Matrix contains NaNs or is (near) singular.");
}}function Pf(g){g=V(g);var b="float32"===g.dtype?"float32":"float64",a=g.shape,c=na()(a).call(a,-2),e=ea()(c,2);c=e[0];e=e[1];g=g.data;b=new Ka[b](g.length);if(c!=e)throw Error("Last two dimensions must be quadratic.");for(e=0;e<b.length;e+=c*c){for(var h=0;h<c;h++)for(var k=0;k<=h;k++)b[e+c*h+k]=g[e+c*h+k];me(c,c,b,e)}return new fa(a,b)}function Qf(g,b){function a(I){if(I===m-2){z=k*k;E=k*n;for(I=0;I<E;I++)u[D+I]=w[B+I];od(l,l,n,x,y,u,D);le(l,l,n,x,y,u,D);y+=z;B+=E;D+=E}else{for(var K=p[I];;K--){a(I+
1);if(1==K)break;1<g.shape[I-m+g.ndim]||(y-=z);1<b.shape[I-m+b.ndim]||(B-=E)}z*=g.shape[I-m+g.ndim]||1;E*=b.shape[I-m+b.ndim]||1}}var c,e;g=V(g);b=V(b);if(2>g.ndim)throw Error("L must be at least 2D.");if(2>b.ndim)throw Error("y must be at least 2D.");var h=na()(c=g.shape).call(c,-2);c=ea()(h,2);var k=c[0];c=c[1];h=na()(e=b.shape).call(e,-2);e=ea()(h,2);var l=e[0],n=e[1];if(k!=c)throw Error("Last two dimensions of L must be quadratic.");if(l!=c)throw Error("L and y don't match.");var m=Math.max(g.ndim,
b.ndim),p=Int32Array.from({length:m},function(){return 1});p[m-2]=l;p[m-1]=n;e=0;for(c=[g,b];e<c.length;e++){h=c[e];for(var t=m-2,v=h.ndim-2;0<t--&&0<v--;)if(1===p[t])p[t]=h.shape[v];else if(p[t]!=h.shape[v]&&1!=h.shape[v])throw Error("Shapes are not broadcast-compatible.");}var u=new Ka["float32"===g.dtype&&"float32"===b.dtype?"float32":"float64"](Ya()(p).call(p,function(I,K){return I*K},1)),x=g.data,w=b.data,y=0,z=1,B=0,E=1,D=0;a(0);return new fa(p,u)}function Rf(g){var b;if(1>g.ndim)throw Error("diag_mat(diag): diag.ndim=".concat(g.ndim,
" is less than 1."));g=V(g);var a=g.shape,c=a[a.length-1],e=g.data,h=Ka[g.dtype].from({length:Ya()(a).call(a,function(n,m){return n*m})*c},function(){return 0});g=void 0;if(1>a.length)throw Error("diag_mat(diag): diag must be at least 1d.");if(0>=c)throw Error("Assertion Failed!");for(var k=g=0;;){for(var l=g+c;;){h[k]=e[g];if(++g===l)break;k+=c+1}if(++k==h.length)break}return new fa(Int32Array.of.apply(Int32Array,Wa()(b=Za()(a)).call(b,[c])),h)}function Sf(g){var b,a,c,e=1<arguments.length&&void 0!==
arguments[1]?arguments[1]:0;if(2>g.ndim)throw Error("diag(A, offset): A.ndim=".concat(g.ndim," is less than 2."));g=V(g);var h=na()(b=g.shape).call(b,-2);h=ea()(h,2);b=h[0];h=h[1];var k=na()(a=g.shape).call(a,0,-1);a=Ka[g.dtype];g=g.data;if(!(e>-b&&e<+h))throw Error(Wa()(c="diag(A, offset): offset=".concat(e," out of A.shape=[")).call(c,g.shape,"]."));c=Math.min(b,b+e,h,h-e);k[k.length-1]=c;a=new a(Ya()(k).call(k,function(p,t){return p*t}));e=Math.max(0,e,-e*h);for(var l=0,n=0;n<g.length;l+=c,n+=
b*h)for(var m=0;m<c;m++)a[l+m]=g[n+e+h*m+m];return new fa(k,a)}function ne(g){g=V(g);if(2>g.ndim)throw Error("A must be at least 2D.");var b="float32"===g.dtype?"float32":"float64",a=Ka[b];b="float32"===b?16:8;var c=g.shape,e=Int32Array.from(c),h=na()(c).call(c,-2),k=ea()(h,2);h=k[0];k=k[1];g=a.from(g.data);e[e.length-1]=h;a=new a(g.length/k*h);for(var l=0,n=0;l<a.length;l+=h*h,n+=h*k){for(var m=0;m<h;m++)a[l+h*m+m]=1;for(m=0;m<k;m+=b)for(var p=m;p<h;p+=b)for(var t=p;t<p+b&&t<h;t++)for(var v=m;v<
m+b&&v<k&&v<t;v++){var u=n+k*t+v,x=g[u];if(0!==x){var w=n+k*v+v;x=ib(g[w],x);var y=ea()(x,3);x=y[0];var z=y[1];y=y[2];g[u]=0;0!==z&&(g[w]=y,Ta(g,k-1-v,w+1,u+1,x,z),Ta(a,1+t,l+h*v,l+h*t,x,z))}}wc(h,a,l)}return[new fa(e,a),new fa(c,g)]}function rc(g){g=V(g);if(2>g.ndim)throw Error("qr_decomp(A): A.ndim must be at least 2.");var b=Ka["float32"===g.dtype?"float32":"float64"],a=g.shape,c=Int32Array.from(a),e=na()(a).call(a,-2),h=ea()(e,2);e=h[0];h=h[1];c[c.length-2]=h;if(e<=h)return ne(g);g=b.from(g.data);
b=new b(g.length/e*h);for(var k=0,l=0;l<g.length;l+=e*h,k+=h*h){for(var n=1;n<e;n++)for(var m=Math.min(n,h),p=0;p<m;p++){var t=l+h*n+p,v=g[t];if(0!==v){var u=l+h*p+p;v=ib(g[u],v);var x=ea()(v,3);v=x[0];var w=x[1];x=x[2];0!==w&&(0>v&&(v*=-1,w*=-1,x*=-1),Ta(g,h-1-p,u+1,t+1,v,w),g[u]=x);g[t]=w}}for(n=0;n<h;n++)for(m=n;m<h;m++)b[k+h*n+m]=g[l+h*n+m],g[l+h*n+m]=+(n===m);for(n=e;0<--n;)for(m=Math.min(n,h);0<m--;)p=g[l+h*n+m],0!==p&&(g[l+h*n+m]=0,Ta(g,h-m,l+h*n+m,l+h*m+m,Math.sqrt((1-p)*(1+p)),p))}return[new fa(a,
g),new fa(c,b)]}function Tf(g,b,a){function c(S){if(S===x-2){K=m*p;P=p*t;N=m*v;for(S=0;S<u;S++)for(var U=0;U<v;U++)for(var T=0;T<m;T++)z[R+S*v+U]+=B[I+T*p+S]*D[M+T*v+U];qc(u,t,v,E,Q,z,R);I+=K;Q+=P;M+=N;R+=t*v}else{for(U=w[S];;U--){c(S+1);if(1==U)break;1<g.shape[S-x+g.ndim]||(I-=K);1<b.shape[S-x+b.ndim]||(Q-=P);1<a.shape[S-x+a.ndim]||(M-=N)}K*=g.shape[S-x+g.ndim]||1;P*=b.shape[S-x+b.ndim]||1;N*=a.shape[S-x+a.ndim]||1}}var e,h,k,l;if(void 0==a){a=b;var n=g;n=ea()(n,2);g=n[0];b=n[1]}g=V(g);if(2>g.ndim)throw Error("qr_lstsq(Q,R,y): Q.ndim must be at least 2.");
b=V(b);if(2>b.ndim)throw Error("qr_lstsq(Q,R,y): R.ndim must be at least 2.");a=V(a);if(2>a.ndim)throw Error("qr_lstsq(Q,R,y): y.ndim must be at least 2.");n=na()(e=g.shape).call(e,-2);e=ea()(n,2);var m=e[0],p=e[1];e=na()(h=b.shape).call(h,-1);var t=ea()(e,1)[0];h=na()(k=a.shape).call(k,-1);var v=ea()(h,1)[0],u=Math.min(p,t);if(m!=a.shape[a.ndim-2])throw Error("qr_lstsq(Q,R,y): Q and y don't match.");if(p!=b.shape[b.ndim-2])throw Error("qr_lstsq(Q,R,y): Q and R don't match.");if(t>m)throw Error("qr_lstsq(Q,R,y): Under-determined systems not supported. Use rrqr instead.");
var x=Math.max(g.ndim,b.ndim,a.ndim),w=Int32Array.from({length:x},function(){return 1});w[x-2]=t;w[x-1]=v;k=0;for(h=[g,b,a];k<h.length;k++){e=h[k];n=x-2;for(var y=e.ndim-2;0<n--&&0<y--;)if(1===w[n])w[n]=e.shape[y];else if(w[n]!=e.shape[y]&&1!=e.shape[y])throw Error("Q, R, y are not broadcast-compatible.");}var z=new (Ka[Hb()(l=[g,b,a]).call(l,function(S){return"float32"===S.dtype})?"float32":"float64"])(Ya()(w).call(w,function(S,U){return S*U},1)),B=g.data,E=b.data,D=a.data,I=0,K=1,Q=0,P=1,M=0,N=
1,R=0;c(0);return new fa(w,z)}function Uf(g){var b=Vf();return function(){var a=Eb()(g);if(b){var c=Eb()(this).constructor;a=gb()(a,arguments,c)}else a=a.apply(this,arguments);return Vb()(this,a)}}function Vf(){if("undefined"===typeof Reflect||!gb.a||gb.a.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(gb()(Boolean,[],function(){})),!0}catch(g){return!1}}function Oc(g,b){g=g.toString();for(var a=0;a<g.length;a++){b+=g.charCodeAt(a);var c=.02519603282416938*
b;b=c>>>0;c-=b;c*=b;b=c>>>0;c-=b;b+=c*Wf}return b}function oe(g){g=V(g);if(2>g.ndim)throw Error("hessenberg_decomp(A): A must at least be 2D.");var b=Ka["float32"===g.dtype?"float32":"float64"],a=g.shape,c=a[a.length-1]|0;if(c!=a[a.length-2])throw Error("hessenberg_decomp(A): A must be square.");g=b.from(g.data);b=new b(g.length);for(var e=g.length;0<=(e-=c*c);){var h=c,k=b,l=g,n=e;h|=0;n|=0;for(var m=h-1;0<m--;)k[n+h*m+m]=1;m=new Mb;for(var p=n+h*(h-1),t=h;1<--t;){var v=n+h*t,u=v+(t-1);m.reset();
for(var x=t-1;0<x--;)m.include(l[v+x]);if(0!==m.max){x=m.resultIncl(l[u])*(0<l[u]?-1:1);m.include(l[u]-=x);for(var w=m.max,y=Math.sqrt(m.sum),z=t;0<z--;)l[v+z]=l[v+z]/w*Math.SQRT2/y;for(w=t;0<w--;){y=0;for(z=t;0<z--;)y+=l[n+h*w+z]*l[v+z];for(z=t;0<z--;)l[n+h*w+z]-=l[v+z]*y}Ja()(k).call(k,0,p,n+h*h);for(w=t;0<w--;)for(y=h;0<y--;)k[p+y]+=l[n+h*w+y]*l[v+w];for(w=t;0<w--;)for(y=h;0<y--;)l[n+h*w+y]-=l[v+w]*k[p+y];for(w=h-1;0<w--;){y=0;for(z=t;0<z--;)y+=k[n+h*w+z]*l[v+z];for(z=t;0<z--;)k[n+h*w+z]-=l[v+
z]*y}Ja()(l).call(l,0,v,u);l[u]=x}}Ja()(k).call(k,0,p,n+h*h-1);k[n+h*h-1]=1}return[new fa(a,b),new fa(a,g)]}function lc(g,b){var a;g=V(g);b=V(b);if(2>g.ndim)throw Error("A must be at least 2D.");if(2>b.ndim)throw Error("B must be at least 2D.");var c=na()(a=g.shape).call(a,-2);a=ea()(c,2);var e=a[0],h=b.shape[b.ndim-1];if(b.shape[b.ndim-2]!=a[1])throw Error("The last dimension of A and the 2nd to last dimension of B do not match.");c=Math.max(g.ndim,b.ndim);a=Int32Array.from({length:c},function(){return 1});
a[c-2]=e;a[c-1]=h;e=0;for(h=[g,b];e<h.length;e++)for(var k=h[e],l=c-2,n=k.ndim-2;0<l--&&0<n--;)if(1===a[l])a[l]=k.shape[n];else if(a[l]!=k.shape[n]&&1!=k.shape[n])throw Error("Shapes are not broadcast-compatible.");c=new (Ka[jd(g.dtype,b.dtype)])(Ya()(a).call(a,function(m,p){return m*p},1));c instanceof Array&&Ja()(c).call(c,0);h=e=0;for(k=[g,b];h<k.length;h++)switch(l=k[h],e*=3,l.dtype){default:e+=1;case "complex128":e+=1;case "int32":case "float32":case "float64":}switch(e){case 0:Xf(g.shape,g.data,
b.shape,b.data,a,c);break;case 1:Yf(g.shape,g.data,b.shape,b.data._array,a,c._array);break;case 3:Zf(g.shape,g.data._array,b.shape,b.data,a,c._array);break;case 4:$f(g.shape,g.data._array,b.shape,b.data._array,a,c._array);break;default:ag(g.shape,g.data,b.shape,b.data,a,c)}return new fa(a,c)}function bg(){function g(u,x){var w=na()(u).call(u,-2);w=ea()(w,2);var y=w[0];w=w[1];var z=x[x.length-1];if(x[x.length-2]!=w)throw Error("Shape mismatch.");var B=Math.max(u.length,x.length),E=Int32Array.from({length:B},
function(){return 1});E[B-2]=y;E[B-1]=z;y=0;for(u=[u,x];y<u.length;y++){x=u[y];z=B-2;for(var D=x.length-2;0<z--&&0<D--;)if(1===E[z])E[z]=x[D];else if(E[z]!=x[D]&&1!=x[D])throw Error("Shapes are not broadcast-compatible.");}return[Ya()(E).call(E,function(I,K){return I*K},w),E]}function b(u,x){if(u==x)return c[u];for(var w=Infinity,y,z=u;z<x;z++){var B=ea()(h[u][z],2),E=B[0],D=B[1],I=ea()(h[z+1][x],2);B=I[0];D=g(D,I[1]);D=ea()(D,2)[0];D+=E+B;D<w&&(w=D,y=z)}return lc(b(u,y),b(y+1,x))}for(var a=arguments.length,
c=Array(a),e=0;e<a;e++)c[e]=arguments[e];c=dc()(c).call(c,function(u){return V(u)});if(1==c.length)return c[0];if(2==c.length)return lc.apply(void 0,Za()(c));var h=qb()({length:c.length},function(){return[]});for(a=0;a<c.length;a++)h[a][a]=[0,c[a].shape];for(a=2;a<=c.length;a++)for(e=0;e<=c.length-a;e++){for(var k=Infinity,l=void 0,n=1;n<a;n++){var m=ea()(h[e][e+n-1],2),p=m[0],t=m[1],v=ea()(h[e+n][e+a-1],2);m=v[0];t=g(t,v[1]);v=ea()(t,2);t=v[0];v=v[1];t+=p+m;t<k&&(k=t,l=v)}if(void 0===l)throw Error("Integer overflow (too many FLOPs).");
h[e][e+a-1]=[k,l]}return b(0,c.length-1)}function pe(g){var b,a;g=V(g);var c=na()(b=g.shape).call(b,-1);b=ea()(c,1)[0];c=na()(a=g.shape).call(a,0,-1);a=new Ka.complex128(g.data.length/b);if(g.shape[g.ndim-2]!=b)throw Error("T is not square.");g=g.data;for(var e=0,h=0;e<g.length;e+=b*b,h+=b)for(var k=b-1;0<=k;k--){var l=k-1;if(0===k||0==g[e+b*k+l])a[h+k]=g[e+b*k+k];else{var n=g[e+b*l+l],m=g[e+b*l+k],p=g[e+b*k+l],t=g[e+b*k+k],v=eb.sub(n,t);n=eb.add(n,t);m=eb.add(eb.mul(v,v),eb.mul(eb.mul(4,m),p));if(0<=
m)throw Error("schur_eigenvals(T): T must not contain real eigenvalued 2x2 blocks.");m=eb.mul(.5,eb.sqrt(m));p=eb.mul(.5,n);a[h+l]=eb.add(p,m);a[h+k]=eb.sub(p,m);k--}}return new fa(c,a)}function qe(g,b){function a(U,T,Y){var aa=Math.min(h,Y+2);for(T=T._array;0<Y--;){for(var W=aa;--W>Y;){var ba=T[2*W],ja=n[2*(B+h*Y+W)],ma=T[2*W+1],sa=n[2*(B+h*Y+W)+1];T[2*Y]-=ba*ja-ma*sa;T[2*Y+1]-=ba*sa+ma*ja}if(0==Y||0==l[B+h*Y+(Y-1)])W=n[2*(B+h*Y+Y)]-U.re,ba=n[2*(B+h*Y+Y)+1]-U.im,w.re=T[2*Y],w.im=T[2*Y+1],Nb()(W,
ba)<=z?w.abs()<=z?(T[2*Y]=0,T[2*Y+1]=0):(T[2*Y]=1,Ja()(T).call(T,0,2*Y+1,2*aa)):(w["/="](W,ba),T[2*Y]=w.re,T[2*Y+1]=w.im);else{W=Y-1;for(ba=aa;--ba>Y;){ja=T[2*ba];ma=n[2*(B+h*W+ba)];sa=T[2*ba+1];var qa=n[2*(B+h*W+ba)+1];T[2*W]-=ja*ma-sa*qa;T[2*W+1]-=ja*qa+sa*ma}ba=n[2*(B+h*W+W)]-U.re;ja=n[2*(B+h*W+W)+1]-U.im;ma=n[2*(B+h*Y+Y)]-U.re;sa=n[2*(B+h*Y+Y)+1]-U.im;qa=n[2*(B+h*W+Y)];var pa=n[2*(B+h*W+Y)+1],ta=n[2*(B+h*Y+W)],Sa=n[2*(B+h*Y+W)+1];y["= c0*c1"](ba,ja,ma,sa);y["-= c0*c1"](qa,pa,ta,Sa);if(0===y.re&&
0===y.im)throw Error("Assertion failed.");w["= c0*c1"](ba,ja,T[2*Y],T[2*Y+1]);w["-= c0*c1"](ta,Sa,T[2*W],T[2*W+1]);w["/="](y.re,y.im);x["= c0*c1"](ma,sa,T[2*W],T[2*W+1]);x["-= c0*c1"](qa,pa,T[2*Y],T[2*Y+1]);x["/="](y.re,y.im);T[2*W]=x.re;T[2*W+1]=x.im;T[2*Y]=w.re;T[2*Y+1]=w.im;Y--}}}var c;g=V(g);b=V(b);if(g.ndim!=b.ndim)throw Error("Q.ndim != T.ndim.");for(var e=b.ndim;0<e--;)if(g.shape[e]!=b.shape[e])throw Error("Q.shape != T.shape.");e=na()(c=b.shape).call(c,-1);var h=ea()(e,1)[0];c=b.shape;e=na()(c).call(c,
0,-1);if(b.shape[b.ndim-2]!=h)throw Error("Q is not square.");var k=Ka.complex128,l=k.from(b.data);b=void 0;b=new k(l.length/h);var n=l._array,m=new k(h),p=m._array;k=new k(h);for(var t=k._array,v=m._array.subarray(0,h),u=k._array.subarray(h),x=new Hd(NaN,NaN),w=new Hd(NaN,NaN),y=new Hd(NaN,NaN),z=NaN,B=0,E=0;B<l.length;B+=h*h,E+=h){z=Math.sqrt(Ec.a)*function(){for(var U=0,T=0,Y=B+h*h,aa=B;aa<Y;aa++){var W=eb.abs(l[aa]);0!=W&&(W>T&&(U*=Math.pow(T/W,2),T=W),U+=Math.pow(W/T,2))}return Math.sqrt(U)*
T}();if(!(0<=z))throw Error("Assertion failed.");for(var D=h-1;0<=D;D--){var I=D-1;if(0==D||0==l[B+h*D+I])for(I=l[B+h*D+D],b[E+D]=I,Ja()(m).call(m,0,0,D+2),m[D]=1,a(I,m,D),I=Math.min(h,D+2);0<I--;)n[2*(B+h*I+D)]=p[2*I],n[2*(B+h*I+D)+1]=p[2*I+1];else{var K=l[B+h*I+I],Q=l[B+h*I+D],P=l[B+h*D+I],M=l[B+h*D+D],N=eb.sub(K,M),R=eb.add(K,M);N=eb.add(eb.mul(N,N),eb.mul(eb.mul(4,Q),P));if(0<=N)throw Error("schur_eigenvals(T): T must not contain real eigenvalued 2x2 blocks.");N=eb.mul(.5,eb.sqrt(N));var S=eb.mul(.5,
R);R=eb.add(S,N);N=eb.sub(S,N);Ja()(p).call(p,0,0,2*(D+1));Ja()(t).call(t,0,0,2*(D+1));eb.abs(Q)>=eb.abs(P)?(m[I]=Q,m[D]=eb.sub(R,K),k[I]=Q,k[D]=eb.sub(N,K)):(m[D]=P,m[I]=eb.sub(R,M),k[D]=P,k[I]=eb.sub(N,M));a(R,m,I);a(N,k,I);for(K=D+1;0<K--;)n[2*(B+h*K+I)]=p[2*K],n[2*(B+h*K+I)+1]=p[2*K+1],n[2*(B+h*K+D)]=t[2*K],n[2*(B+h*K+D)+1]=t[2*K+1];b[E+I]=R;b[E+D]=N;--D}}Ja()(v).call(v,0);Ja()(u).call(u,0);for(D=0;D<h;D++)for(I=0;I<2*h;I++)K=I>>>1,Q=Math.abs(n[2*(B+h*D)+I]),0<Q&&(Q>u[K]&&(P=u[K]/Q,u[K]=Q,v[K]=
v[K]*P*P),Q/=u[K],v[K]+=Q*Q);D=v;for(I=0;I<h;I++)K=u[I],D[I]=isFinite(K)?Math.sqrt(v[I])*K:K;for(I=0;I<h;I++)for(K=0;K<h;K++)l[B+h*I+K]=eb.div(l[B+h*I+K],D[K])}return[new fa(e,b),lc(g,new fa(c,l))]}function Id(g){g=V(g);g=oe(g);var b=ea()(g,2);g=b[0];b=b[1];cg(g,b);return[g,b]}function cg(g,b){var a=g.shape[g.ndim-1],c=Ka[g.dtype],e=new c(a);if(g.shape[g.ndim-2]!=a)throw Error("Q is not square.");if(g.ndim!=b.ndim)throw Error("Q.ndim != H.ndim.");for(var h=g.ndim;0<h--;)if(g.shape[h]!=b.shape[h])throw Error("Q.shape != H.shape.");
g=g.data;b=b.data;var k=Ec.a;h=function B(x,w,y,z){for(var E=function(ba,ja){return b[z+a*ba+ja]},D=function(ba){if(Math.abs(E(ba,ba-1))>k*(Math.abs(E(ba-1,ba-1))+Math.abs(E(ba,ba))))return!1;b[z+a*ba+ba-1]*=0;return!0},I=function(ba,ja,ma,sa){if(ja<=ba)throw Error("Assertion failed.");for(var qa=Math.max(0,ba-1);qa<y;qa++){var pa=b[z+a*ba+qa],ta=b[z+a*ja+qa];b[z+a*ba+qa]=sa*ta+ma*pa;b[z+a*ja+qa]=ma*ta-sa*pa}for(qa=Math.min(y,ja+2);0<qa--;)pa=b[z+a*qa+ba],ta=b[z+a*qa+ja],b[z+a*qa+ba]=sa*ta+ma*pa,
b[z+a*qa+ja]=ma*ta-sa*pa;for(qa=y;0<qa--;)pa=x[w+y*ba+qa],ta=x[w+y*ja+qa],x[w+y*ba+qa]=sa*ta+ma*pa,x[w+y*ja+qa]=ma*ta-sa*pa},K=function(ba,ja){if(ja-ba>y>>>1)throw Error("Assertion failed.");var ma=ja-ba;if(3>ma)throw Error("Assertion failed.");for(var sa=new c(ma*ma),qa=0;qa<ma;qa++)sa[ma*qa+qa]=1;B(sa,0,ma,z+a*ba+ba);for(qa=0;qa<ma;qa++)for(var pa=0;pa<qa;pa++){var ta=sa[ma*qa+pa];sa[ma*qa+pa]=sa[ma*pa+qa];sa[ma*pa+qa]=ta}for(qa=0;qa<y;qa++){Ja()(e).call(e,0,0,ma);for(pa=0;pa<ma;pa++)for(ta=0;ta<
ma;ta++)e[ta]+=sa[ma*pa+ta]*x[w+y*(ba+pa)+qa];for(pa=0;pa<ma;pa++)x[w+y*(ba+pa)+qa]=e[pa]}for(;ja<y;ja++){Ja()(e).call(e,0,0,ma);for(qa=0;qa<ma;qa++)for(pa=0;pa<ma;pa++)e[pa]+=sa[ma*qa+pa]*b[z+a*(ba+qa)+ja];for(qa=0;qa<ma;qa++)b[z+a*(ba+qa)+ja]=e[qa]}for(ja=0;ja<ba;ja++){Ja()(e).call(e,0,0,ma);for(qa=0;qa<ma;qa++)for(pa=0;pa<ma;pa++)e[pa]+=sa[ma*qa+pa]*b[z+a*ja+(ba+qa)];for(qa=0;qa<ma;qa++)b[z+a*ja+(ba+qa)]=e[qa]}},Q=0,P=0,M=y,N=new Jd("nd.la.schur_qrfrancis_inplace");;){for(var R=!1;!R;){if(3>M-
P)return;if(M-P<y>>>4)return K(P,M);R=!1;D(P+1)?P+=1:D(M-1)?--M:D(P+2)?P+=2:D(M-2)?M-=2:R=!0;for(var S=P+M>>>1,U=P+2;R&&++U<M-2;)D(U)&&(R=!1,U>S?(K(U,M),M=U):(K(P,U),P=U));R||(Q=0)}Q+=1;R=M-2;S=M-1;var T=E(R,R)+E(S,S),Y=E(R,R)*E(S,S)-E(R,S)*E(S,R);if(T*T>4*Y){var aa=0<=T?1:-1;U=.5*(T+aa*Math.sqrt(T*T-4*Y));T=2*Y/(T+aa*Math.sqrt(T*T-4*Y));Math.abs(E(S,S)-U)>Math.abs(E(S,S)-T)&&(U=T);T=2*U;Y=U*U}if(0==Q%16){if(1E9<Q)throw Error("Too many iterations for a single eigenvalue.");T=Math.abs(E(S,R))+Math.abs(E(R,
M-3));Y=T*T;T*=N.uniform(1.25,1.75)}R=P+0;S=P+1;U=P+2;aa=E(R,R)*E(R,R)+E(R,S)*E(S,R)-T*E(R,R)+Y;var W=E(S,R)*(E(R,R)+E(S,S)-T);T=E(S,R)*E(U,S);for(Y=2;0<Y--;S=U,W=T)0!=W&&(aa=ib(aa,W),aa=ea()(aa,3),W=aa[2],I(R,S,aa[0],aa[1]),aa=W);for(U=P;U<M-2;U++)for(R=U+1,T=Math.min(M,U+4),S=U+2;S<T;S++)Y=E(R,U),aa=E(S,U),0!==aa&&(Y=ib(Y,aa),Y=ea()(Y,3),I(R,S,Y[0],Y[1]),b[z+a*S+U]*=0)}};for(var l=0;l<g.length;l+=a*a){for(var n=0;n<a;n++)for(var m=0;m<n;m++){var p=g[l+a*n+m];g[l+a*n+m]=g[l+a*m+n];g[l+a*m+n]=p}h(g,
l,a,l);for(var t=1;t<a;t++){var v=t-1;0!=b[l+a*t+v]&&function(){var x=b[l+a*v+t],w=b[l+a*t+t]-b[l+a*v+v],y=w*w+4*x*b[l+a*t+v];if(0>y)return"continue";0===x?x=[0,1]:(w+=(0>w?-1:1)*Math.sqrt(y),x*=2,y=Nb()(w,x),x=[Math.abs(x)/y,(0>x?-w:+w)/y]);w=ea()(x,2);x=w[0];w=w[1];for(y=v;y<a;y++){var z=b[l+a*v+y],B=b[l+a*t+y];b[l+a*v+y]=w*B+x*z;b[l+a*t+y]=x*B-w*z}for(y=t+1;0<y--;)z=b[l+a*y+v],B=b[l+a*y+t],b[l+a*y+v]=w*B+x*z,b[l+a*y+t]=x*B-w*z;for(y=a;0<y--;)z=g[l+a*v+y],B=g[l+a*t+y],g[l+a*v+y]=w*B+x*z,g[l+a*t+
y]=x*B-w*z;b[l+a*t+v]*=0}()}for(n=0;n<a;n++)for(m=0;m<n;m++)p=g[l+a*n+m],g[l+a*n+m]=g[l+a*m+n],g[l+a*m+n]=p}}function dg(g){var b,a,c=Kd(g,2);c=ea()(c,2);var e=c[0];c=Id(c[1]);c=ea()(c,2);c=qe(c[0],c[1]);var h=ea()(c,2);c=h[0];h=h[1];if(!Jb()(b=h.dtype).call(b,"complex"))throw Error("Assertion failed.");if(!Jb()(a=e.dtype).call(a,"float"))throw Error("Assertion failed.");g=g.shape[g.ndim-1];b=new Float64Array(g);a=new Float64Array(g);var k=h.data._array;e=e.data;for(var l=0,n=0;n<k.length;l+=g,n+=
2*g*g){Ja()(b).call(b,0);Ja()(a).call(a,0);for(var m=0;m<g;m++)for(var p=e[l+m],t=0;t<2*g;t++){var v=Math.abs(k[n+2*g*m+t]*=p);if(0<v){var u=t>>1;v>a[u]&&(b[u]*=Math.pow(a[u]/v,2),a[u]=v);b[u]+=Math.pow(v/a[u],2)}}for(m=0;m<g;m++)p=a[m],b[m]=isFinite(p)?Math.sqrt(b[m])*p:p;for(m=0;m<g;m++)for(p=0;p<2*g;p++)k[n+2*g*m+p]/=b[p>>1]}return[c,h]}function eg(g){g=Kd(g,2);g=ea()(g,2);g=Id(g[1]);g=ea()(g,2);return pe(g[1])}function Kd(g,b){null==b&&(b=2);if(b>Number.MAX_VALUE){b=g.shape[g.ndim-1];var a=Ka["float32"===
g.dtype?"float32":"float64"],c=g.shape,e=na()(c).call(c,0,-1);if(g.shape[g.ndim-2]!=b)throw Error("A is not square");g=a.from(g.data);a=new a(g.length/b);Ja()(a).call(a,1);for(var h=g.length,k=a.length;0<h;){h-=b*b;k-=b;for(var l,n=!1;!n;)for(l=0,n=!0;l<b;l++){for(var m=0,p=0,t=0;t<b;t++)l!==t&&(p=Math.max(p,Math.abs(g[h+b*l+t])),m=Math.max(m,Math.abs(g[h+b*t+l])));if(0!==p*m){var v=Math.max(m,p);if(0!=v){if(!isFinite(v))throw Error("NaN encountered.");for(t=1;p>=2*m;)m*=2,p/=2,t*=2;for(;m>=2*p;)m/=
2,p*=2,t/=2;if(!(Math.max(m,p)>=v))for(n=!1,a[k+l]*=t,m=0;m<b;m++)g[h+b*l+m]/=t,g[h+b*m+l]*=t}}}}return[new fa(e,a),new fa(c,g)]}c=g.shape[g.ndim-1];h=Ka["float32"===g.dtype?"float32":"float64"];e=g.shape;a=na()(e).call(e,0,-1);if(!(1<=b))throw Error("Invalid norm p=".concat(b,";"));if(g.shape[g.ndim-2]!=c)throw Error("A is not square");g=h.from(g.data);h=new h(g.length/c);k=Math.pow(.95,1/b);Ja()(h).call(h,1);l=g.length;for(n=h.length;0<l;)for(l-=c*c,n-=c,p=!1;!p;)for(m=0,p=!0;m<c;m++){for(var u=
t=0,x=v=0,w=0;w<c;w++)if(m!==w){var y=Math.abs(g[l+c*m+w]);if(0<y){if(y>x){var z=x/y;x=y;v*=Math.pow(z,b)}v+=Math.pow(y/x,b)}y=Math.abs(g[l+c*w+m]);0<y&&(y>u&&(z=u/y,u=y,t*=Math.pow(z,b)),t+=Math.pow(y/u,b))}v=isFinite(v)?Math.pow(v,1/b)*x:v;t=isFinite(t)?Math.pow(t,1/b)*u:t;if(0!=v*t){if(!isFinite(v*t))throw Error("NaN encountered.");x=t>=v?Math.pow(1+Math.pow(v/t,b),1/b)*t:Math.pow(1+Math.pow(t/v,b),1/b)*v;for(u=1;v>=2*t;)t*=2,v/=2,u*=2;for(;t>=2*v;)t/=2,v*=2,u/=2;if(!((t>=v?Math.pow(1+Math.pow(v/
t,b),1/b)*t:Math.pow(1+Math.pow(t/v,b),1/b)*v)>=k*x))for(p=!1,h[n+m]*=u,t=0;t<c;t++)g[l+c*m+t]/=u,g[l+c*t+m]*=u}}return[new fa(a,h),new fa(e,g)]}function fg(g,b){var a,c;if(2>b.ndim)throw Error("eigen_balance_post(D,V): V.ndim must be at least 2.");var e=na()(a=b.shape).call(a,-2);e=ea()(e,2);a=e[0];e=e[1];if(a!==e)throw Error("eigen_balance_post(D,V): V must be square.");var h=Ka.float64;g=Z([b,g.reshape.apply(g,Wa()(c=Za()(g.shape)).call(c,[1]))],"complex128",Fb.mul);b=g.data;c=new h(e);h=new h(e);
for(var k=0;k<b.length;k+=a*e){Ja()(c).call(c,0);Ja()(h).call(h,0);for(var l=0;l<e;l++)for(var n=0;n<e;n++){var m=Fb.abs(b[k+e*l+n]);0<m&&(m>h[n]&&(c[n]*=Math.pow(h[n]/m,2),h[n]=m),c[n]+=Math.pow(m/h[n],2))}for(l=0;l<e;l++)n=h[l],c[l]=isFinite(n)?Math.sqrt(c[l])*n:n;for(l=0;l<e;l++)for(n=0;n<e;n++)b[k+e*l+n]=Fb.div(b[k+e*l+n],c[n])}return g}function gg(){for(var g=arguments.length,b=Array(g),a=0;a<g;a++)b[a]=arguments[a];g=b[0]in Ka?b.shift():"float64";if(1>b.length)throw Error("Size parameter missing.");
1==b.length&&b.push(b[b.length-1]);b=Int32Array.from(b,function(k){if(0!==k%1)throw Error("eye(): Invalid shape [".concat(b,"]."));return k});g=new Ka[g](Ya()(b).call(b,function(k,l){return k*l}));a=na()(b).call(b,-2);var c=ea()(a,2);a=c[0];c=c[1];for(var e=g.length;0<=(e-=a*c);)for(var h=Math.min(a,c);0<h--;)g[e+c*h+h]=1;return new fa(b,g)}function hg(g){g=V(g);var b=Ka["float32"===g.dtype?"float32":"float64"],a=g.shape,c=na()(a).call(a,-2),e=ea()(c,2);c=e[0];e=e[1];g=g.data;if(c!==e)throw Error("Last two dimensions must be quadratic.");
b=new b(g.length);for(e=0;e<b.length;e+=c*c){for(var h=0;h<c;h++)for(var k=0;k<=h;k++)b[e+c*h+k]=g[e+c*h+k];k=h=c;var l=b,n=e;if(!(h<=k))throw Error("Assertion failed.");for(var m=0;m<h;m++){for(var p=0;p<m;p++)for(var t=l[n+k*m+p]*l[n+k*p+p],v=m;v<h;v++)l[n+k*v+m]-=l[n+k*v+p]*t;for(p=m;++p<h;)l[n+k*p+m]/=l[n+k*m+m]}}return new fa(a,b)}function ig(g,b){function a(D){if(D===n-2){y=k*k;B=k*l;for(D=0;D<B;D++)v[E+D]=x[z+D];var I=k;D=k;var K=l,Q=u,P=w,M=v,N=E;if(0!==Q.length%1)throw Error("Assertion failed.");
if(0!==M.length%1)throw Error("Assertion failed.");if(0!==P%1)throw Error("Assertion failed.");if(0!==N%1)throw Error("Assertion failed.");if(0!==I%1)throw Error("Assertion failed.");if(0!==D%1)throw Error("Assertion failed.");if(0!==K%1)throw Error("Assertion failed.");if(Q.length-P<I*D)throw Error("Assertion failed.");if(M.length-N<I*K)throw Error("Assertion failed.");if(!(0<I))throw Error("Assertion failed.");if(!(0<D))throw Error("Assertion failed.");if(!(0<K))throw Error("Assertion failed.");
if(!(I<=D))throw Error("Assertion failed.");for(var R=1;R<I;R++)for(var S=0;S<R;S++)for(var U=0;U<K;U++)M[N+K*R+U]-=Q[P+D*R+S]*M[N+K*S+U];for(R=0;R<I;R++)for(S=0;S<K;S++)M[N+K*R+S]/=Q[P+D*R+R];for(;1<I--;)for(R=I;0<R--;)for(S=K;0<S--;)M[N+K*R+S]-=Q[P+D*I+R]*M[N+K*I+S];w+=y;z+=B;E+=B}else{for(K=m[D];;K--){a(D+1);if(1==K)break;1<g.shape[D-n+g.ndim]||(w-=y);1<b.shape[D-n+b.ndim]||(z-=B)}y*=g.shape[D-n+g.ndim]||1;B*=b.shape[D-n+b.ndim]||1}}var c,e;g=V(g);b=V(b);if(2>g.ndim)throw Error("ldl_solve(LD,y): LD must be at least 2D.");
if(2>b.ndim)throw Error("ldl_solve(LD,y): y must be at least 2D.");var h=na()(c=g.shape).call(c,-2);c=ea()(h,2);var k=c[0];c=c[1];h=na()(e=b.shape).call(e,-2);e=ea()(h,2);h=e[0];var l=e[1];if(k!=c)throw Error("ldl_solve(LD,y): Last two dimensions of LD must be quadratic.");if(h!=c)throw Error("ldl_solve(LD,y): LD and y don't match.");var n=Math.max(g.ndim,b.ndim),m=Int32Array.from({length:n},function(){return 1});m[n-2]=h;m[n-1]=l;e=0;for(c=[g,b];e<c.length;e++){h=c[e];for(var p=n-2,t=h.ndim-2;0<
p--&&0<t--;)if(1===m[p])m[p]=h.shape[t];else if(m[p]!=h.shape[t]&&1!=h.shape[t])throw Error("Shapes are not broadcast-compatible.");}var v=new Ka["float32"===g.dtype&&"float32"===b.dtype?"float32":"float64"](Ya()(m).call(m,function(D,I){return D*I},1)),u=g.data,x=b.data,w=0,y=1,z=0,B=1,E=0;a(0);return new fa(m,v)}function jg(g){var b=kg();return function(){var a=Eb()(g);if(b){var c=Eb()(this).constructor;a=gb()(a,arguments,c)}else a=a.apply(this,arguments);return Vb()(this,a)}}function kg(){if("undefined"===
typeof Reflect||!gb.a||gb.a.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(gb()(Boolean,[],function(){})),!0}catch(g){return!1}}function pd(g,b,a,c){var e=Math.atan2(a-b,c+g),h=Math.atan2(a+b,c-g),k=(e-h)/2;h=(e+h)/2;var l=Math.cos(k);k=Math.sin(k);var n=Math.cos(h),m=Math.sin(h);e=n*(k*a+l*g)-m*(k*c+l*b);h=m*(l*a-k*g)+n*(l*c-k*b);Math.abs(e)<Math.abs(h)&&(l=[l,-k],k=l[0],l=l[1],g=[m,-n],n=g[0],m=g[1],e=h);0>e&&(n=-n,m=-m);return[l,k,n,m]}function re(g,
b,a,c,e,h,k,l){g|=0;k|=0;for(var n=0;n<g;n++)h[k+n]=a[g*n+n];se(g,b,c,e|0,h,k,l)}function se(g,b,a,c,e,h,k){g|=0;c|=0;h|=0;for(var l=g;0<l--;){var n=e[h+l];if(0>n||Pc()(n,-0))for(e[h+l]=-n,n=0;n<g;n++)b[c+g*l+n]*=-1}Qc()(k).call(k,function(u,x){return e[h+x]-e[h+u]});for(l=0;l<g;++l)for(n=l;;){var m=k[n];k[n]=n;n=m;if(n<=l)break;m=c+k[n]*g;for(var p=c+n*g,t=0;t<g;t++){var v=b[m+t];b[m+t]=b[p+t];b[p+t]=v}for(t=0;t<g;t++)v=a[m+t],a[m+t]=a[p+t],a[p+t]=v;m=e[h+k[n]];e[h+k[n]]=e[h+n];e[h+n]=m}for(a=0;a<
g-1;a++)for(k=a;++k<g;)l=c+g*a+k,n=c+g*k+a,m=b[l],b[l]=b[n],b[n]=m}function Ld(g,b,a,c,e,h,k,l){if(b>g)throw Error("Assertion failed.");if(1>=b)throw Error("Assertion failed.");if(2===b){g|=0;c|=0;h|=0;k|=0;b=ib(e[h],e[h+1]);var n=ea()(b,3);b=n[0];l=n[1];n=n[2];0!==n?(e[h]=n,e[h+1]=NaN,e[k]=b,e[k+1]=-l,e[k+1*g]=l,e[k+1*g+1]=b):(e[k]=1,e[k+1*g+1]=1);a[c]=1}else if(3===b){c|=0;h|=0;k|=0;g|=0;b=g-1|0;n=e[h];l=e[h+1];var m=e[h+2],p=e[h+3];if(0!==p){m=ib(m,p);m=ea()(m,3);var t=m[0],v=m[1];m=m[2];e[k+1*
g+1]=t;e[k+2*g+1]=v;p=-v*l;l*=t;if(0!==p){n=ib(n,p);n=ea()(n,3);p=n[0];var u=n[1];n=n[2];e[k]=p;e[k+1*g]=u*-v;e[k+2*g]=u*t;e[k+2]=-u;e[k+1*g+2]=p*-v;e[k+2*g+2]=p*t}else e[k]=1,e[k+1*g+2]=-v,e[k+2*g+2]=t}else e[k]=1,e[k+1*g+1]=1,e[k+2*g+2]=1;t=pd(n,l,0,m);v=ea()(t,4);p=v[0];u=v[1];t=v[2];v=v[3];e[h+1]=NaN;e[h+3]=NaN;e[h]=p*n*t-(p*l+u*m)*v;m=(-u*l+p*m)*t-u*n*v;l=0>m?-1:1;e[h+2]=l*m;a[c]=p;a[c+1]=-u*l;a[c+1*b]=u;a[c+1*b+1]=p*l;e[k+1]=v*e[k];e[k]*=t;a=e[k+1*g]*t-e[k+1*g+1]*v;e[k+1*g+1]=e[k+1*g]*v+e[k+
1*g+1]*t;e[k+1*g]=a;a=e[k+2*g]*t-e[k+2*g+1]*v;e[k+2*g+1]=e[k+2*g]*v+e[k+2*g+1]*t;e[k+2*g]=a}else{v=g-1;n=b-1;t=b>>>1;m=t-1;if(l.length<v)throw Error("Assertion failed: Integer work matrix I too small.");if(e.length<2*v)throw Error("Assertion failed: Scalar work matrix F too small.");Ld(g,t,a,c,e,h,k,l);Ld(g,b-t,a,c+v*t+t,e,h+2*t,k+g*t+t,l);a[c+v*m+m]=1;v=e[h+2*m];p=e[h+2*m+1];for(u=0;u<m;u++)e[h+2*u+1]=v*e[k+g*m+u];for(u=t;u<n;u++)e[h+2*u+1]=p*e[k+g*t+u];v=ib(v*e[k+g*m+m],p*e[k+g*t+n]);u=ea()(v,3);
v=u[0];p=u[1];u=u[2];e[h+2*m]=0;e[h+2*m+1]=u;if(0!==u){for(u=0;u<t;u++)e[k+g*u+n]=e[k+g*u+m]*-p,e[k+g*u+m]*=v;for(u=t;u<b;u++)e[k+g*u+m]=e[k+g*u+n]*p,e[k+g*u+n]*=v}l[n-1]=m;for(p=v=0;p<n-1;p++)l[p]=t>=n||v<m&&e[h+2*v]>=e[h+2*t]?v++:t++;for(m=0;m<n;m++)t=l[m],e[2*m]=e[h+2*t],e[2*m+1]=e[h+2*t+1];for(m=0;m<n;m++)e[h+2*m]=e[2*m],e[h+2*m+1]=e[2*m+1];lg(g,b,a,c,e,h,k,l)}}function Yc(g){var b,a;g=V(g);if(Jb()(b=g.dtype).call(b,"complex"))throw Error("svd_dc(A): A.dtype must be float.");b=na()(a=g.shape).call(a,
-2);b=ea()(b,2);a=b[0];b=b[1];if(a>b){a=Yc(g.T);var c=ea()(a,3);a=c[0];b=c[1];c=c[2];nd(a);return[c.T,b,a]}c=g.shape;var e=na()(c).call(c),h=na()(c).call(c,0,-1);e[e.length-1]=a;var k=Ka["float32"===g.dtype?"float32":"float64"];g=g.data;var l=g.length/(a*b);g=k.from(g);var n=new k(l*a*a);l=new k(l*a);k=new k(a*(a+2)+2*a+(a+1)*(a+1)+(a+1)*Math.max(1+a,b));for(var m=new Int32Array(3*a),p=0,t=0,v=0;t<l.length;p+=a*a,t+=a,v+=a*b){var u=a,x=b,w=n,y=p,z=l,B=t,E=g,D=v,I=m,K=k;if(u>x)throw Error("Assertion failed.");
if(I.length<3*u)throw Error("Assertion failed: Integer work matrix I too small.");if(K.length<u*(u+2)+2*u+(u+1)*(u+1)+(u+1)*x)throw Error("Assertion failed: Scalar work matrix F too small.");var Q=u*(u+2),P=Q+2*u,M=P+(u+1)*(u+1);Ja()(K).call(K,0,P,M+x);for(var N=0;N<u;N++)for(var R=0;R<x;R++)K[M+x+x*N+R]=E[D+x*N+R];Ja()(E).call(E,0,D,D+u*x);Fd(u,x,w,y,K,0,K,M);for(N=0;N<u;N++)K[Q+2*N]=K[(u+1)*N+N],K[Q+2*N+1]=K[(u+1)*N+N+1];Ld(u+1,u+1,E,D,K,Q,P,I);for(I=0;I<u;I++)z[B+I]=K[Q+2*I];for(z=0;z<u;z++){Ja()(K).call(K,
0,0,u);for(B=0;B<u;B++)for(Q=0;Q<u;Q++)K[Q]+=w[y+u*z+B]*E[D+u*B+Q];for(B=0;B<u;B++)w[y+u*z+B]=K[B]}Ja()(E).call(E,0,D,D+u*u);for(w=0;w<u+1;w++)for(y=0;y<u;y++)for(z=0;z<x;z++)E[D+x*y+z]+=K[P+(u+1)*w+y]*K[M+x*w+z]}return[new fa(e,n),new fa(h,l),new fa(c,g)]}function te(g){var b;g=V(g);var a=g.shape[g.ndim-1],c=na()(b=g.shape).call(b,0,-1);b=Fb.sqrt(A(g.dtype));g=g.data;for(var e=new Ka.int32(g.length/a),h=0;h<e.length;h++){var k=b*Fb.abs(g[a*h]);if(0!==e[h])throw Error("Assertion failed.");for(;e[h]<
a;e[h]++){var l=Fb.abs(g[a*h+e[h]]);if(!isFinite(l))throw Error("svd_rank(): NaN or Infinity encountered.");if(l<=k)break}}return new fa(c,e)}function mg(g,b,a,c){if(void 0==c){if(void 0!=a)throw Error("svd_lstsq(Q,R,P, y): Either 2 ([Q,R,P], y) or 4 arguments (Q,R,P, y) expected.");c=b;b=g;a=ea()(b,3);g=a[0];b=a[1];a=a[2]}g=V(g);b=V(b);a=V(a);if(g.shape[g.ndim-2]!==a.shape[a.ndim-1])throw Error("rrqr_solve(Q,R,P, y): System not square.");c=Md(g,b,a,c);g=Fb.sqrt(A(b.dtype));a=b.shape[b.ndim-1];b=
b.data;for(var e=0;e<b.length;e+=a)for(var h=g*Fb.abs(b[e]),k;k<a;k++){var l=Fb.abs(b[e+k]);if(!isFinite(l))throw Error("svd_solve(): NaN or Infinity encountered.");if(l<=h)throw new Nd(c);}return c}function Md(g,b,a,c){function e(W){if(W===x-2){M=p*t;R=t;U=t*v;Y=p*u;a:{W=z*Fb.abs(I[N]);for(var ba=0;ba<t;ba++){var ja=Fb.abs(I[N+ba]);if(!isFinite(ja))throw Error("svd_solve(): NaN or Infinity encountered.");if(ja<=W){W=ba;break a}}W=t}Ja()(B).call(B,0);for(ba=0;ba<p;ba++)for(ja=0;ja<W;ja++)for(var ma=
0;ma<u;ma++)B[u*ja+ma]+=D[P+t*ba+ja]*Q[T+u*ba+ma];for(ba=0;ba<W;ba++)for(ja=0;ja<u;ja++)B[u*ba+ja]/=I[N+ba];for(ba=0;ba<W;ba++)for(ja=0;ja<v;ja++)for(ma=0;ma<u;ma++)E[aa+u*ja+ma]+=K[S+v*ba+ja]*B[u*ba+ma];P+=M;N+=R;S+=U;T+=Y;aa+=v*u}else{for(ba=w[W];;ba--){e(W+1);if(1==ba)break;1<g.shape[W-x+g.ndim]||(P-=M);1<b.shape[W-x+1+b.ndim]||(N-=R);1<a.shape[W-x+a.ndim]||(S-=U);1<c.shape[W-x+c.ndim]||(T-=Y)}M*=g.shape[W-x+g.ndim]||1;R*=b.shape[W-x+1+b.ndim]||1;U*=a.shape[W-x+a.ndim]||1;Y*=c.shape[W-x+c.ndim]||
1}}var h,k,l,n;if(void 0==c){if(void 0!=a)throw Error("svd_lstsq(Q,R,P, y): Either 2 ([Q,R,P], y) or 4 arguments (Q,R,P, y) expected.");c=b;var m=g;m=ea()(m,3);g=m[0];b=m[1];a=m[2]}g=V(g);if(2>g.ndim)throw Error("svd_lstsq(U,sv,V, y): U.ndim must be at least 2.");b=V(b);if(1>b.ndim)throw Error("svd_lstsq(U,sv,V, y): sv.ndim must be at least 1.");a=V(a);if(2>a.ndim)throw Error("svd_lstsq(U,sv,V, y): V.ndim must be at least 2.");c=V(c);if(2>c.ndim)throw Error("svd_lstsq(U,sv,V, y): y.ndim must be at least 2.");
m=na()(h=g.shape).call(h,-2);h=ea()(m,2);var p=h[0],t=h[1];h=na()(k=a.shape).call(k,-1);var v=ea()(h,1)[0];k=na()(l=c.shape).call(l,-1);var u=ea()(k,1)[0];if(p!==c.shape[c.ndim-2])throw Error("svd_lstsq(U,sv,V, y): U and y don't match.");if(t!==b.shape[b.ndim-1])throw Error("svd_lstsq(U,sv,V, y): U and sv don't match.");if(t!==a.shape[a.ndim-2])throw Error("svd_lstsq(U,sv,V, y): V and sv don't match.");var x=Math.max(g.ndim,b.ndim+1,a.ndim,c.ndim),w=Int32Array.from({length:x},function(){return 1});
w[x-2]=v;w[x-1]=u;l=0;for(k=[g,a,c];l<k.length;l++){h=k[l];m=x-2;for(var y=h.ndim-2;0<m--&&0<y--;)if(1===w[m])w[m]=h.shape[y];else if(w[m]!=h.shape[y]&&1!=h.shape[y])throw Error("svd_lstsq(U,sv,V, y): U,sv,V,y not broadcast-compatible.");}l=x-2;for(k=b.ndim-1;0<l--&&0<k--;)if(1===w[l])w[l]=b.shape[k];else if(w[l]!=b.shape[k]&&1!=b.shape[k])throw Error("svd_lstsq(U,sv,V, y): U,sv,V,y not broadcast-compatible.");var z=Math.max(p,t)*A(b.dtype);l=Ka[Hb()(n=[g,b,a,c]).call(n,function(W){return"float32"===
W.dtype})?"float32":"float64"];var B=new l(t*u),E=new l(Ya()(w).call(w,function(W,ba){return W*ba},1)),D=g.data,I=b.data,K=a.data,Q=c.data,P=0,M=1,N=0,R=1,S=0,U=1,T=0,Y=1,aa=0;e(0);return new fa(w,E);throw Error("Not yet implemented!");}function ue(g,b){g=Yc(g);g=ea()(g,3);return Md(g[0],g[1],g[2],b)}function ng(g){var b,a;g=V(g);var c=Ka["float32"===g.dtype?"float32":"float64"].from(g.data),e=na()(b=g.shape).call(b,-2);e=ea()(e,2);b=e[0];var h=e[1];e=new Int32Array(c.length/h);if(b!=h)throw Error("Last two dimensions must be quadratic.");
for(var k=h=0;h<c.length;h+=b*b,k+=b){for(var l=0;l<b;l++)e[k+l]=l;for(l=0;l<b;l++){for(var n=h+l*b,m=l,p=l+1;p<b;p++)Math.abs(c[h+b*p+l])>Math.abs(c[h+b*m+l])&&(m=p);if(l!=m)for(p=e[k+l],e[k+l]=e[k+m],e[k+m]=p,m=h+m*b,p=0;p<b;p++){var t=c[n+p];c[n+p]=c[m+p];c[m+p]=t}for(m=l+1;m<b;m++){p=h+m*b;t=c[p+l]/c[n+l];c[p+l]=t;for(var v=l+1;v<b;v++)c[p+v]-=t*c[n+v]}}}return[new fa(g.shape,c),new fa(na()(a=g.shape).call(a,0,-1),e)]}function og(g,b,a){function c(N){if(N===v-2){D=m*m;K=m;P=m*t;for(N=0;N<p;N++)for(var R=
M+t*N,S=Q+t*z[I+N],U=0;U<t;U++)w[R+U]=B[S+U];for(N=0;N<p;N++)for(R=0;R<t;R++)for(S=0;S<N;S++)w[M+N*t+R]-=y[E+m*N+S]*w[M+S*t+R];qc(p,p,t,y,E,w,M);E+=D;I+=K;Q+=P;M+=P}else{for(R=u[N];;R--){c(N+1);if(1==R)break;1<g.shape[N-v+g.ndim]||(E-=D);1<b.shape[N-v+b.ndim+1]||(I-=K);1<a.shape[N-v+a.ndim]||(Q-=P)}D*=g.shape[N-v+g.ndim]||1;K*=b.shape[N-v+b.ndim+1]||1;P*=a.shape[N-v+a.ndim]||1}}var e,h,k,l;if(void 0==a){a=b;var n=g;n=ea()(n,2);g=n[0];b=n[1]}g=V(g);if(2>g.ndim)throw Error("LU must be at least 2D.");
b=V(b);if(1>b.ndim)throw Error("P must be at least 1D.");a=V(a);if(2>a.ndim)throw Error("y must be at least 2D.");n=na()(e=g.shape).call(e,-2);e=ea()(n,2);var m=e[0];e=e[1];n=na()(h=a.shape).call(h,-2);h=ea()(n,2);var p=h[0],t=h[1];if(e!=m)throw Error("Last two dimensions of LU must be quadratic.");if(e!=p)throw Error("LU and y don't match.");if(e!=na()(k=b.shape).call(k,-1))throw Error("LU and P don't match.");var v=Math.max(g.ndim,b.ndim+1,a.ndim),u=Int32Array.from({length:v},function(){return 1});
u[v-2]=p;u[v-1]=t;k=0;for(h=[g,a];k<h.length;k++){e=h[k];n=v-2;for(var x=e.ndim-2;0<n--&&0<x--;)if(1===u[n])u[n]=e.shape[x];else if(u[n]!=e.shape[x]&&1!=e.shape[x])throw Error("LU and y are not broadcast-compatible.");}k=v-2;for(h=b.ndim-1;0<k--&&0<h--;)if(1===u[k])u[k]=b.shape[h];else if(u[k]!=b.shape[h]&&1!=b.shape[h])throw Error("P is not broadcast-compatible.");var w=new (Ka[Hb()(l=[g,b,a]).call(l,function(N){return"float32"===N.dtype})?"float32":"float64"])(Ya()(u).call(u,function(N,R){return N*
R},1)),y=g.data,z=b.data,B=a.data,E=0,D=1,I=0,K=1,Q=0,P=1,M=0;c(0);return new fa(u,w)}function pg(g,b){function a(E){if(E===e-2){for(E=0;E<l;E++){var D=b[y+E];if(!(0<=D))throw Error("permute_rows(A,P): P.contains invalid indices.");if(!(D<l))throw Error("permute_rows(A,P): P.contains invalid indices.");for(var I=0;I<n;I++)m[B+n*E+I]=g[x+n*D+I]}x+=w=l*n;y+=z=l;B+=w}else{for(D=h[E];;D--){a(E+1);if(1===D)break;1<p[E-e+t]||(x-=w);1<v[E-e+1+u]||(y-=z)}w*=p[E-e+t]||1;z*=v[E-e+1+u]||1}}var c;g=V(g);if(2>
g.ndim)throw Error("permute_rows(A,P): A.ndim must be at least 2.");b=V(b);if(1>b.ndim)throw Error("permute_rows(A,P): P.ndim must be at least 1.");if("int32"!==b.dtype)throw Error('permute_rows(A,P): P.dtype must be "int32".');var e=Math.max(g.ndim,b.ndim+1),h=Int32Array.from({length:e},function(){return 1}),k=na()(c=g.shape).call(c,-2);c=ea()(k,2);var l=c[0],n=c[1];if(l!==b.shape[b.ndim-1])throw Error("permute_rows(A,P): A.shape[-2] and P.shape[-1] must match.");c=e;for(k=g.ndim;0<c--&&0<k--;)h[c]=
g.shape[k];c=e-2;for(k=b.ndim-1;0<c--&&0<k--;)if(1===h[c])h[c]=b.shape[k];else if(h[c]!=b.shape[k]&&1!=b.shape[k])throw Error("permute_rows(A,P): A and P not broadcast-compatible.");var m=new Ka[g.dtype](Ya()(h).call(h,function(E,D){return E*D})),p=g.shape,t=g.ndim,v=b.shape,u=b.ndim;g=g.data;b=b.data;var x=0,w=-1,y=0,z=-1,B=0;a(0);return new fa(h,m)}function qg(g,b){function a(E){if(E===e-2){for(E=0;E<l;E++)for(var D=0;D<n;D++){var I=b[y+D];if(!(0<=I))throw Error("permute_cols(A,P): P.contains invalid indices.");
if(!(I<n))throw Error("permute_cols(A,P): P.contains invalid indices.");m[B+n*E+D]=g[x+n*E+I]}x+=w=l*n;y+=z=n;B+=w}else{for(D=h[E];;D--){a(E+1);if(1===D)break;1<p[E-e+t]||(x-=w);1<v[E-e+1+u]||(y-=z)}w*=p[E-e+t]||1;z*=v[E-e+1+u]||1}}var c;g=V(g);if(2>g.ndim)throw Error("permute_cols(A,P): A.ndim must be at least 2.");b=V(b);if(1>b.ndim)throw Error("permute_cols(A,P): P.ndim must be at least 1.");if("int32"!==b.dtype)throw Error('permute_cols(A,P): P.dtype must be "int32".');var e=Math.max(g.ndim,b.ndim+
1),h=Int32Array.from({length:e},function(){return 1}),k=na()(c=g.shape).call(c,-2);c=ea()(k,2);var l=c[0],n=c[1];if(n!==b.shape[b.ndim-1])throw Error("permute_cols(A,P): A.shape[-1] and P.shape[-1] must match.");c=e;for(k=g.ndim;0<c--&&0<k--;)h[c]=g.shape[k];c=e-2;for(k=b.ndim-1;0<c--&&0<k--;)if(1===h[c])h[c]=b.shape[k];else if(h[c]!=b.shape[k]&&1!=b.shape[k])throw Error("permute_cols(A,P): A and P not broadcast-compatible.");var m=new Ka[g.dtype](Ya()(h).call(h,function(E,D){return E*D})),p=g.shape,
t=g.ndim,v=b.shape,u=b.ndim;g=g.data;b=b.data;var x=0,w=-1,y=0,z=-1,B=0;a(0);return new fa(h,m)}function rg(g,b){function a(E){if(E===e-2){for(E=0;E<l;E++){var D=b[y+E];if(!(0<=D))throw Error("unpermute_rows(A,P): P.contains invalid indices.");if(!(D<l))throw Error("unpermute_rows(A,P): P.contains invalid indices.");for(var I=0;I<n;I++)m[B+n*D+I]=g[x+n*E+I]}x+=w=l*n;y+=z=l;B+=w}else{for(D=h[E];;D--){a(E+1);if(1===D)break;1<p[E-e+t]||(x-=w);1<v[E-e+1+u]||(y-=z)}w*=p[E-e+t]||1;z*=v[E-e+1+u]||1}}var c;
g=V(g);if(2>g.ndim)throw Error("unpermute_rows(A,P): A.ndim must be at least 2.");b=V(b);if(1>b.ndim)throw Error("unpermute_rows(A,P): P.ndim must be at least 1.");if("int32"!==b.dtype)throw Error('unpermute_rows(A,P): P.dtype must be "int32".');var e=Math.max(g.ndim,b.ndim+1),h=Int32Array.from({length:e},function(){return 1}),k=na()(c=g.shape).call(c,-2);c=ea()(k,2);var l=c[0],n=c[1];if(l!==b.shape[b.ndim-1])throw Error("unpermute_rows(A,P): A.shape[-2] and P.shape[-1] must match.");c=e;for(k=g.ndim;0<
c--&&0<k--;)h[c]=g.shape[k];c=e-2;for(k=b.ndim-1;0<c--&&0<k--;)if(1===h[c])h[c]=b.shape[k];else if(h[c]!=b.shape[k]&&1!=b.shape[k])throw Error("unpermute_rows(A,P): A and P not broadcast-compatible.");var m=new Ka[g.dtype](Ya()(h).call(h,function(E,D){return E*D})),p=g.shape,t=g.ndim,v=b.shape,u=b.ndim;g=g.data;b=b.data;var x=0,w=-1,y=0,z=-1,B=0;a(0);return new fa(h,m)}function sg(g,b){function a(E){if(E===e-2){for(E=0;E<l;E++)for(var D=0;D<n;D++){var I=b[y+D];if(!(0<=I))throw Error("unpermute_cols(A,P): P.contains invalid indices.");
if(!(I<n))throw Error("unpermute_cols(A,P): P.contains invalid indices.");m[B+n*E+I]=g[x+n*E+D]}x+=w=l*n;y+=z=n;B+=w}else{for(D=h[E];;D--){a(E+1);if(1===D)break;1<p[E-e+t]||(x-=w);1<v[E-e+1+u]||(y-=z)}w*=p[E-e+t]||1;z*=v[E-e+1+u]||1}}var c;g=V(g);if(2>g.ndim)throw Error("unpermute_cols(A,P): A.ndim must be at least 2.");b=V(b);if(1>b.ndim)throw Error("unpermute_cols(A,P): P.ndim must be at least 1.");if("int32"!==b.dtype)throw Error('unpermute_cols(A,P): P.dtype must be "int32".');var e=Math.max(g.ndim,
b.ndim+1),h=Int32Array.from({length:e},function(){return 1}),k=na()(c=g.shape).call(c,-2);c=ea()(k,2);var l=c[0],n=c[1];if(n!==b.shape[b.ndim-1])throw Error("unpermute_cols(A,P): A.shape[-1] and P.shape[-1] must match.");c=e;for(k=g.ndim;0<c--&&0<k--;)h[c]=g.shape[k];c=e-2;for(k=b.ndim-1;0<c--&&0<k--;)if(1===h[c])h[c]=b.shape[k];else if(h[c]!=b.shape[k]&&1!=b.shape[k])throw Error("unpermute_cols(A,P): A and P not broadcast-compatible.");var m=new Ka[g.dtype](Ya()(h).call(h,function(E,D){return E*
D})),p=g.shape,t=g.ndim,v=b.shape,u=b.ndim;g=g.data;b=b.data;var x=0,w=-1,y=0,z=-1,B=0;a(0);return new fa(h,m)}function Od(g,b,a,c,e,h){if(!(g<=b))throw Error("Assertion failed.");for(var k=0;k<g;k++)e[h+k]=k;k=(Math.sqrt(17)+1)/8;for(var l=0;l<g;l++){var n=!0;if(l<g-1){for(var m=void 0,p=-Infinity,t=Math.abs(a[c+b*l+l]),v=l;++v<g;){var u=Math.abs(a[c+b*v+l]);p>=u||(p=u,m=v)}if(!(0<Math.max(p,t)))throw Error("_pldlp_decomp(M,N, LD,LD_off, P,P_off): Zero column or NaN encountered.");if(t<k*p){v=void 0;
u=-Infinity;for(var x=l;x<m;x++){var w=Math.abs(a[c+b*m+x]);u>=w||(u=w,v=x)}for(x=m;++x<g;)w=Math.abs(a[c+b*x+m]),u>=w||(u=w,v=x);if(m===v)throw Error("Assertion failed.");if(t<p/u*p*k&&(Math.abs(a[c+b*m+m])<k*u&&(n=!1,e[h+m]^=-1,++l),l!==m)){p=g;t=b;v=a;u=c;w=e;var y=h;x=l;if(!(x<=m))throw Error("Assertion failed: "+Rc()({k:x,l:m}));if(!(p<=t))throw Error("Assertion failed.");var z=w[y+x];w[y+x]=w[y+m];w[y+m]=z;for(w=0;w<x;w++)y=v[u+t*x+w],v[u+t*x+w]=v[u+t*m+w],v[u+t*m+w]=y;for(w=x;++w<m;)y=v[u+
t*w+x],v[u+t*w+x]=v[u+t*m+w],v[u+t*m+w]=y;w=v[u+t*x+x];v[u+t*x+x]=v[u+t*m+m];v[u+t*m+m]=w;for(w=m;++w<p;)y=v[u+t*w+x],v[u+t*w+x]=v[u+t*w+m],v[u+t*w+m]=y}}}if(n){n=g;m=b;p=a;t=c;v=l;if(0!==n%1)throw Error("Assertion failed.");if(0!==m%1)throw Error("Assertion failed.");if(0!==v%1)throw Error("Assertion failed.");if(0!==t%1)throw Error("Assertion failed.");if(0!==p.length%1)throw Error("Assertion failed.");if(!(0<=n))throw Error("Assertion failed.");if(!(n<=m))throw Error("Assertion failed.");if(!(0<=
v))throw Error("Assertion failed.");if(!(v<n))throw Error("Assertion failed.");u=p[t+m*v+v];for(x=v;++x<n;)for(w=p[t+m*x+v]/u,y=v;y++<x;)p[t+m*x+y]-=w*p[t+m*y+v];for(x=v;++x<n;)p[t+m*x+v]/=u}else{n=g;m=b;p=a;t=c;v=l-1;if(0!==n%1)throw Error("Assertion failed.");if(0!==m%1)throw Error("Assertion failed.");if(0!==v%1)throw Error("Assertion failed.");if(0!==t%1)throw Error("Assertion failed.");if(0!==p.length%1)throw Error("Assertion failed.");if(!(0<=n))throw Error("Assertion failed.");if(!(n<=m))throw Error("Assertion failed.");
if(!(0<=v))throw Error("Assertion failed.");if(!(v<n-1))throw Error("Assertion failed.");w=p[t+m*(v+1)+v];u=p[t+m*(v+1)+(v+1)]/w;x=p[t+m*v+v]/w;w=1/(u*x-1)/w;for(y=v+2;y<n;y++){z=w*(u*p[t+m*y+v]-p[t+m*y+v+1]);for(var B=w*(x*p[t+m*y+v+1]-p[t+m*y+v]),E=y;E<n;E++)p[t+m*E+y]-=p[t+m*E+v]*z+p[t+m*E+v+1]*B;p[t+m*y+v]=z;p[t+m*y+v+1]=B}}}}function tg(g){g=V(g);var b=Ka["float32"===g.dtype?"float32":"float64"],a=g.shape,c=na()(a).call(a,0,-1),e=na()(a).call(a,-2),h=ea()(e,2);e=h[0];h=h[1];g=g.data;if(e!==h)throw Error("Last two dimensions must be quadratic.");
b=new b(g.length);h=new Int32Array(g.length/e);for(var k=0;k<b.length;k+=e*e){for(var l=0;l<e;l++)for(var n=0;n<=l;n++)b[k+e*l+n]=g[k+e*l+n];Od(e,e,b,k,h,k/e)}return[new fa(a,b),new fa(c,h)]}function ug(g,b){function a(D){if(D===k-2){y=h*h;B=h;for(D=0;D<h;D++){for(var I=D-(0>x[z+D]),K=0;K<I;K++)v[E+h*D+K]=u[w+h*D+K];v[E+h*D+D]=1}w+=y;E+=y;z+=B}else{for(I=l[D];;I--){a(D+1);if(1===I)break;1<g.shape[D-k+g.ndim]||(w-=y);1<b.shape[D-k+b.ndim+1]||(z-=B)}y*=g.shape[D-k+g.ndim]||1;B*=b.shape[D-k+b.ndim+1]||
1}}var c;if(null==b){var e=g;e=ea()(e,2);g=e[0];b=e[1]}g=V(g);b=V(b);if(2>g.ndim)throw Error("pldlp_solve(LD,P,y): LD must be at least 2D.");if(1>b.ndim)throw Error("pldlp_solve(LD,P,y): P must be at least 1D.");var h=g.shape[g.ndim-2];if(h!==g.shape[g.ndim-1])throw Error("pldlp_solve(LD,P,y): LD must be square.");if(h!==b.shape[b.ndim-1])throw Error("pldlp_solve(LD,P,y): LD and P shape mismatch.");var k=Math.max(g.ndim,b.ndim+1),l=Int32Array.from({length:k},function(){return 1});l[k-2]=h;l[k-1]=
h;e=0;for(var n=[na()(m=g.shape).call(m,0,-2),na()(p=b.shape).call(p,0,-1)];e<n.length;e++){var m,p;m=n[e];p=k-2;for(var t=m.length;0<p--&&0<t--;)if(1===l[p])l[p]=m[t];else if(l[p]!==m[t]&&1!==m[t])throw Error("Shapes are not broadcast-compatible.");}e=Hb()(c=[g,b]).call(c,function(D){return"float32"===D.dtype})?"float32":"float64";var v=new Ka[e](Ya()(l).call(l,function(D,I){return D*I},1)),u=g.data,x=b.data,w=0,y=1,z=0,B=1,E=0;a(0);return new fa(l,v)}function vg(g,b){function a(D){if(D===k-2){y=
h*h;B=h;for(D=0;D<h;D++)v[E+h*D+D]=u[w+h*D+D],0>x[z+D]&&(v[E+h*D+D-1]=v[E+h*(D-1)+D]=u[w+h*D+D-1]);w+=y;E+=y;z+=B}else{for(var I=l[D];;I--){a(D+1);if(1===I)break;1<g.shape[D-k+g.ndim]||(w-=y);1<b.shape[D-k+b.ndim+1]||(z-=B)}y*=g.shape[D-k+g.ndim]||1;B*=b.shape[D-k+b.ndim+1]||1}}var c;if(null==b){var e=g;e=ea()(e,2);g=e[0];b=e[1]}g=V(g);b=V(b);if(2>g.ndim)throw Error("pldlp_solve(LD,P,y): LD must be at least 2D.");if(1>b.ndim)throw Error("pldlp_solve(LD,P,y): P must be at least 1D.");var h=g.shape[g.ndim-
2];if(h!==g.shape[g.ndim-1])throw Error("pldlp_solve(LD,P,y): LD must be square.");if(h!==b.shape[b.ndim-1])throw Error("pldlp_solve(LD,P,y): LD and P shape mismatch.");var k=Math.max(g.ndim,b.ndim+1),l=Int32Array.from({length:k},function(){return 1});l[k-2]=h;l[k-1]=h;e=0;for(var n=[na()(m=g.shape).call(m,0,-2),na()(p=b.shape).call(p,0,-1)];e<n.length;e++){var m,p;m=n[e];p=k-2;for(var t=m.length;0<p--&&0<t--;)if(1===l[p])l[p]=m[t];else if(l[p]!==m[t]&&1!==m[t])throw Error("Shapes are not broadcast-compatible.");
}e=Hb()(c=[g,b]).call(c,function(D){return"float32"===D.dtype})?"float32":"float64";var v=new Ka[e](Ya()(l).call(l,function(D,I){return D*I},1)),u=g.data,x=b.data,w=0,y=1,z=0,B=1,E=0;a(0);return new fa(l,v)}function wg(g,b){null==b&&(b=g,b=ea()(b,2),g=b[0],b=b[1]);g=V(g);b=V(b);if(2>g.ndim)throw Error("pldlp_solve(LD,P,y): LD must be at least 2D.");if(1>b.ndim)throw Error("pldlp_solve(LD,P,y): P must be at least 1D.");var a=g.shape[g.ndim-2];if(a!==g.shape[g.ndim-1])throw Error("pldlp_solve(LD,P,y): LD must be square.");
if(a!==b.shape[b.ndim-1])throw Error("pldlp_solve(LD,P,y): LD and P shape mismatch.");for(var c=g.ndim-2,e=b.ndim-1;0<c--&&0<e--;)if(1!==b.shape[e]&&1!==g.shape[c]&&g.shape[c]!==b.shape[e])throw Error("Shapes are not broadcast-compatible.");c=b.shape;b=Int32Array.from(b.data);g=void 0;g=new Uint8Array(a);for(e=b.length;0<=(e-=a);){Ja()(g).call(g,!1);for(var h=a;0<h--;){var k=b[e+h];if(0>k){if(!(0<h)||0>b[e+h-1])throw Error("pldlp_solve(LD,P,y): P is invalid.");k^=-1}if(!(0<=k))throw Error("pldlp_solve(LD,P,y): P contains out-of-bounds indices.");
if(!(k<a))throw Error("pldlp_solve(LD,P,y): P contains out-of-bounds indices.");if(g[k])throw Error("pldlp_solve(LD,P,y): P contains duplicate indices.");g[k]=!0;b[e+h]=k}if(Wb()(g).call(g,function(l){return!l}))throw Error("pldlp_solve(LD,P,y): P is invalid.");}return new fa(c,b)}function Pd(g,b,a,c,e,h,k,l,n,m){if(0!==c.length%1)throw Error("Assertion failed.");if(0!==h.length%1)throw Error("Assertion failed.");if(0!==l.length%1)throw Error("Assertion failed.");if(0!==m.length%1)throw Error("Assertion failed.");
if(0!==e%1)throw Error("Assertion failed.");if(0!==k%1)throw Error("Assertion failed.");if(0!==n%1)throw Error("Assertion failed.");if(0!==g%1)throw Error("Assertion failed.");if(0!==b%1)throw Error("Assertion failed.");if(0!==a%1)throw Error("Assertion failed.");if(c.length-e<g*b)throw Error("Assertion failed.");if(h.length-k<g)throw Error("Assertion failed.");if(l.length-n<g*a)throw Error("Assertion failed.");if(m.length<g*a)throw Error("Assertion failed.");if(!(0<g))throw Error("Assertion failed.");
if(!(0<b))throw Error("Assertion failed.");if(!(0<a))throw Error("Assertion failed.");if(!(g<=b))throw Error("Assertion failed.");for(var p=0;p<g;p++){var t=h[k+p];t^=-(0>t);for(var v=0;v<a;v++)m[a*p+v]=l[n+a*t+v]}for(p=1;p<g;p++)for(t=p-(0>h[k+p]),v=0;v<t;v++)for(var u=0;u<a;u++)m[a*p+u]-=c[e+b*p+v]*m[a*v+u];for(p=0;p<g;p++)if(p<g-1&&0>h[k+p+1]){u=c[e+b*(p+1)+p];t=c[e+b*(p+1)+p+1]/u;v=c[e+b*p+p]/u;u=1/(t*v-1)/u;for(var x=0;x<a;x++){var w=m[a*p+x],y=m[a*(p+1)+x];m[a*p+x]=u*(t*w-y);m[a*(p+1)+x]=u*
(v*y-w)}++p}else for(t=0;t<a;t++)m[a*p+t]/=c[e+b*p+p];for(p=g;1<p--;)for(t=p-(0>h[k+p]);0<t--;)for(v=a;0<v--;)m[a*t+v]-=c[e+b*p+t]*m[a*p+v];for(b=0;b<g;b++)for(c=h[k+b],c^=-(0>c),e=0;e<a;e++)l[n+a*c+e]=m[a*b+e]}function xg(g,b,a){function c(N){if(N===n-2){D=k*k;K=k;P=k*l;for(N=0;N<P;N++)w[M+N]=B[Q+N];Pd(k,k,l,y,E,z,I,w,M,x);E+=D;I+=K;Q+=P;M+=P}else{for(var R=m[N];;R--){c(N+1);if(1===R)break;1<g.shape[N-n+g.ndim]||(E-=D);1<b.shape[N-n+b.ndim+1]||(I-=K);1<a.shape[N-n+a.ndim]||(Q-=P)}D*=g.shape[N-n+
g.ndim]||1;K*=b.shape[N-n+b.ndim+1]||1;P*=a.shape[N-n+a.ndim]||1}}var e;if(null==a){if(null==b)throw Error("Assertion failed.");a=b;var h=g;h=ea()(h,2);g=h[0];b=h[1]}g=V(g);b=V(b);a=V(a);if(2>g.ndim)throw Error("pldlp_solve(LD,P,y): LD must be at least 2D.");if(1>b.ndim)throw Error("pldlp_solve(LD,P,y): P must be at least 1D.");if(2>a.ndim)throw Error("pldlp_solve(LD,P,y): y must be at least 2D.");var k=g.shape[g.ndim-2],l=a.shape[a.ndim-1];if(k!==g.shape[g.ndim-1])throw Error("pldlp_solve(LD,P,y): LD must be square.");
if(k!==b.shape[b.ndim-1])throw Error("pldlp_solve(LD,P,y): LD and P shape mismatch.");if(k!==a.shape[a.ndim-2])throw Error("pldlp_solve(LD,P,y): LD and y shape mismatch.");var n=Math.max(g.ndim,b.ndim+1,a.ndim),m=Int32Array.from({length:n},function(){return 1});m[n-2]=k;m[n-1]=l;h=0;for(var p=[na()(t=g.shape).call(t,0,-2),na()(v=b.shape).call(v,0,-1),na()(u=a.shape).call(u,0,-2)];h<p.length;h++){var t,v,u;t=p[h];v=n-2;for(u=t.length;0<v--&&0<u--;)if(1===m[v])m[v]=t[u];else if(m[v]!==t[u]&&1!==t[u])throw Error("Shapes are not broadcast-compatible.");
}h=Hb()(e=[g,b,a]).call(e,function(N){return"float32"===N.dtype})?"float32":"float64";e=Ka[h];var x=new e(k*l),w=new e(Ya()(m).call(m,function(N,R){return N*R},1)),y=g.data,z=b.data,B=a.data,E=0,D=1,I=0,K=1,Q=0,P=1,M=0;c(0);return new fa(m,w)}function yg(g){for(var b=arguments.length,a=Array(1<b?b-1:0),c=1;c<b;c++)a[c-1]=arguments[c];ve&&(ve=!1,console.warn(Error("nd.la.rand_ortho is deprecated, use nd.rand.AleaRNG instead.")));g in Ka||(a.unshift(g),g="float64");if(!Jb()(g).call(g,"float"))throw Error("Unsupported dtype: '".concat(g,
"'."));1===a.length&&a.push(a[0]);for(b=a.length;0<b--;){var e;if(0!==a[b]%1||1>a[b])throw Error(Wa()(e="shape[".concat(b,"] = ")).call(e,a[b]," not a positive integer."));}a=Int32Array.from(a);e=na()(a).call(a,-2);b=ea()(e,2);e=b[0];b=b[1];c=Math.max(e,b);var h=Ka[g],k=new h(Ya()(a).call(a,function(w,y){return w*y})),l=new h(c*c),n=new h(c);h=new h(c);for(var m=new Mb,p=0;p<k.length;p+=e*b){for(var t=0;t<c;t++)for(var v=0;v<c;v++)l[c*t+v]=1*(t===v);h[0]=.5>=Math.random()?-1:1;for(t=c;1<t--;){m.reset();
for(v=0;;v++){var u=n[v]=we();if(v>=t)break;m.include(u)}h[t]=0<n[t]?-1:1;v=m.resultIncl(n[t])*h[t];if(0!==v){m.include(n[t]-=v);v=m.max;u=Math.sqrt(m.sum);for(var x=t;0<=x;x--)n[x]=n[x]/v/u;for(v=c;0<v--;){u=0;for(x=t;0<=x;x--)u+=l[c*v+x]*n[x];u*=2;for(x=t;0<=x;x--)l[c*v+x]-=n[x]*u}}}for(t=0;t<c;t++)for(v=0;v<c;v++)l[c*t+v]*=h[t];for(t=0;t<e;t++)for(v=0;v<b;v++)k[p+b*t+v]=l[c*t+v]}return new fa(a,k)}function zg(g){g=Yc(g);g=ea()(g,3);return te(g[1])}function sc(g,b,a,c){a|=0;for(c<<=1;c<g.length;c=
c+2|0){var e=Math.abs(b[a+(c>>>1)]);if(0!==e){if(g[c]<e){var h=g[c]/e;g[c+1]=g[c+1]*h*h;g[c]=e}e/=g[c];g[c+1]+=e*e}}}function xc(g,b){b<<=1;var a=g[b];return isFinite(a)?Math.sqrt(g[b+1])*a:a}function Zc(g,b,a,c,e){var h=Math.min(g,b);if(!(e.length>=h))throw Error("Assertion failed.");for(var k=new Mb,l=h;0<l--;){for(var n=b;n-- >l;)k.include(a[c+b*l+n]);e[l]=k.result;if(!isFinite(e[l]))throw Error("Infinity or NaN encountered during rank estimation.");}for(g=2*A(e instanceof Float32Array?"float32":
"float64")*Math.max(g,b)*e[0];0<h&&e[h-1]<=g;)--h;return h}function xe(g){g=V(g);if(2>g.ndim)throw Error("A must be at least 2D.");var b=Ka["float32"===g.dtype?"float32":"float64"],a=g.shape,c=Int32Array.from(a),e=na()(c).call(c,0,-1),h=na()(a).call(a,-2),k=ea()(h,2);h=k[0];k=k[1];var l=Math.min(h,k);c[c.length-1]=h;e[e.length-1]=k;g=b.from(g.data);var n=new Int32Array(g.length/h),m=new b(g.length/k*h);b=new b(k<<1);for(var p=0,t=0,v=0;p<m.length;p+=h*h,t+=h*k,v+=k){for(var u=0;u<k;u++)n[v+u]=u;for(u=
0;u<h;u++)m[p+h*u+u]=1;for(u=0;u<h;u++)sc(b,g,t+k*u,0);for(u=0;u<l;u++){for(var x=-1,w=-Infinity,y=u;y<k;y++){var z=xc(b,y);w<z&&(x=y,w=z)}if(x!==u){for(y=0;y<h;y++){z=t+k*y+u;var B=t+k*y+x,E=g[z];g[z]=g[B];g[B]=E}y=n[v+u];n[v+u]=n[v+x];n[v+x]=y}Ja()(b).call(b,0,u<<1);if(0===w)break;x=t+k*u+u;for(y=u;++y<h;){z=t+k*y+u;B=g[z];if(0!==B){B=ib(g[x],B);var D=ea()(B,3);B=D[0];E=D[1];D=D[2];g[z]=0;0!==E&&(g[x]=D,Ta(g,k-1-u,x+1,z+1,B,E),Ta(m,1+y,p+h*u,p+h*y,B,E))}sc(b,g,t+k*y,u+1)}g[x]=(0>g[x]||Pc()(-0,g[x])?
-1:1)*w}wc(h,m,p)}return[new fa(c,m),new fa(a,g),new fa(e,n)]}function ye(g,b,a,c,e,h,k,l,n,m){if(0!==g%1)throw Error("Assertion failed.");if(0!==b%1)throw Error("Assertion failed.");if(0!==a%1)throw Error("Assertion failed.");if(0!==e%1)throw Error("Assertion failed.");if(0!==k%1)throw Error("Assertion failed.");if(0!==n%1)throw Error("Assertion failed.");if(!(0<g))throw Error("Assertion failed.");if(!(0<b))throw Error("Assertion failed.");if(!(0<a))throw Error("Assertion failed.");if(!(0<=e))throw Error("Assertion failed.");
if(!(0<=k))throw Error("Assertion failed.");if(!(0<=n))throw Error("Assertion failed.");if(!(g*b<=c.length-e))throw Error("Assertion failed.");if(!(g*a<=h.length-k))throw Error("Assertion failed.");if(!(b<=l.length-n))throw Error("Assertion failed.");g|=0;b|=0;a|=0;e|=0;k|=0;n|=0;if(m.length!==b<<1)throw Error("Assertion failed.");Ja()(m).call(m,0,0,b<<1);for(var p=0;p<g;p++)sc(m,c,e+b*p,0);p=Math.min(g,b);for(var t=0;t<p;t++){for(var v=-1,u=-Infinity,x=t;x<b;x++){var w=xc(m,x);u<w&&(v=x,u=w)}if(v!==
t){for(x=0;x<g;x++){w=e+b*x+t;var y=e+b*x+v,z=c[w];c[w]=c[y];c[y]=z}x=l[n+t];l[n+t]=l[n+v];l[n+v]=x}Ja()(m).call(m,0,t<<1);if(0===u)break;v=e+b*t+t;for(x=t;++x<g;){w=e+b*x+t;y=c[w];if(0!==y){y=ib(c[v],y);var B=ea()(y,3);y=B[0];z=B[1];B=B[2];c[w]=0;0!==z&&(c[v]=B,Ta(c,b-1-t,v+1,w+1,y,z),Ta(h,a,k+a*t,k+a*x,y,z))}sc(m,c,e+b*x,t+1)}c[v]=(0>c[v]||Pc()(-0,c[v])?-1:1)*u}}function ze(g){g=V(g);if(2>g.ndim)throw Error("A must be at least 2D.");var b=Ka["float32"===g.dtype?"float32":"float64"],a=g.shape,c=
Int32Array.from(a),e=na()(a).call(a,0,-1),h=na()(a).call(a,-2),k=ea()(h,2);h=k[0];k=k[1];c[c.length-2]=k;e[e.length-1]=k;if(h<=k)return xe(g);g=b.from(g.data);var l=new Int32Array(g.length/h),n=new b(g.length/h*k);b=new b(k<<1);for(var m=0,p=0,t=0;m<g.length;m+=h*k,p+=k*k,t+=k){for(var v=0;v<k;v++)l[t+v]=v;for(v=0;v<h;v++)sc(b,g,m+k*v,0);for(v=0;v<k;v++){for(var u=-1,x=-Infinity,w=v;w<k;w++){var y=xc(b,w);x<y&&(u=w,x=y)}if(u!==v){for(w=0;w<h;w++){y=m+k*w+v;var z=m+k*w+u,B=g[y];g[y]=g[z];g[z]=B}w=
l[t+v];l[t+v]=l[t+u];l[t+u]=w}Ja()(b).call(b,0,v<<1);if(0===x)break;u=m+k*v+v;for(w=v;++w<h;){y=m+k*w+v;z=g[y];if(0!==z){z=ib(g[u],z);var E=ea()(z,3);z=E[0];B=E[1];E=E[2];0!==B&&(0>z&&(z*=-1,B*=-1,E*=-1),Ta(g,k-1-v,u+1,y+1,z,B),g[u]=E);g[y]=B}sc(b,g,m+k*w,v+1)}g[u]=(0>g[u]||Pc()(g[u],-0)?-1:1)*x}for(v=0;v<k;v++)for(x=n[p+k*v+v],x=0>x||Pc()(x,-0)?-1:1,u=v;u<k;u++)n[p+k*v+u]=g[m+k*v+u]*x,g[m+k*v+u]=x*(v===u);for(v=k;0<v--;)for(x=h;--x>v;)u=g[m+k*x+v],0!==u&&(g[m+k*x+v]=0,Ta(g,k-v,m+k*x+v,m+k*v+v,Math.sqrt((1-
u)*(1+u)),u))}return[new fa(a,g),new fa(c,n),new fa(e,l)]}function Ag(g){var b,a;g=V(g);var c=na()(b=g.shape).call(b,-2);c=ea()(c,2);b=c[0];c=c[1];var e=na()(a=g.shape).call(a,0,-2);g=g.data;a=new Ka.int32(g.length/b/c);for(var h=new Ka["float32"===g.dtype?"float32":"float64"](Math.min(b,c)),k=0,l=0;k<a.length;k++,l+=b*c)a[k]=Zc(b,c,g,l,h);return new fa(e,a)}function Ae(g,b,a,c){if(void 0==c){if(void 0!=a)throw Error("rrqr_lstsq(Q,R,P, y): Either 2 ([Q,R,P], y) or 4 arguments (Q,R,P, y) expected.");
c=b;b=g;var e=ea()(b,3);g=e[0];b=e[1];a=e[2]}g=V(g);b=V(b);e=g.shape[g.ndim-2];if(e!==b.shape[b.ndim-1])throw Error("rrqr_solve(Q,R,P, y): Q @ R not square.");c=Be(g,b,a,c);g=new Ka["float32"===b.dtype?"float32":"float64"](e);for(a=0;a<b.data.length;a+=e*e)if(Zc(e,e,b.data,a,g)<e)throw new Nd(c);return c}function Be(g,b,a,c){function e(W){if(W===x-2){M=p*t;R=t*v;U=v;Y=p*u;W=Zc(t,v,I,N,z);for(var ba=0;ba<p;ba++)for(var ja=0;ja<W;ja++)for(var ma=0;ma<u;ma++)E[aa+ja*u+ma]+=D[P+ba*t+ja]*Q[T+ba*u+ma];
qc(W,v,u,I,N,E,aa);for(W=v;0<W--;)B[W]=K[S+W];for(W=v;0<W--;)for(;(ba=B[W])!==W;){if(B[ba]===ba)throw Error("rrqr_lstsq(Q,R,P,y): Invalid indices in P.");B[W]=B[ba];B[ba]=ba;for(ja=u;0<ja--;)ma=E[aa+u*W+ja],E[aa+u*W+ja]=E[aa+u*ba+ja],E[aa+u*ba+ja]=ma}P+=M;N+=R;S+=U;T+=Y;aa+=v*u}else{for(ba=w[W];;ba--){e(W+1);if(1==ba)break;1<g.shape[W-x+g.ndim]||(P-=M);1<b.shape[W-x+b.ndim]||(N-=R);1<a.shape[W-x+1+a.ndim]||(S-=U);1<c.shape[W-x+c.ndim]||(T-=Y)}M*=g.shape[W-x+g.ndim]||1;R*=b.shape[W-x+b.ndim]||1;U*=
a.shape[W-x+1+a.ndim]||1;Y*=c.shape[W-x+c.ndim]||1}}var h,k,l,n;if(void 0==c){if(void 0!=a)throw Error("rrqr_lstsq(Q,R,P, y): Either 2 ([Q,R,P], y) or 4 arguments (Q,R,P, y) expected.");c=b;var m=g;m=ea()(m,3);g=m[0];b=m[1];a=m[2]}g=V(g);if(2>g.ndim)throw Error("rrqr_lstsq(Q,R,P, y): Q.ndim must be at least 2.");b=V(b);if(2>b.ndim)throw Error("rrqr_lstsq(Q,R,P, y): R.ndim must be at least 2.");a=V(a);if(1>a.ndim)throw Error("rrqr_lstsq(Q,R,P, y): P.ndim must be at least 1.");c=V(c);if(2>c.ndim)throw Error("rrqr_lstsq(Q,R,P, y): y.ndim must be at least 2.");
if("int32"!==a.dtype)throw Error('rrqr_lstsq(Q,R,P, y): P.dtype must be "int32".');m=na()(h=g.shape).call(h,-2);h=ea()(m,2);var p=h[0],t=h[1];h=na()(k=b.shape).call(k,-1);var v=ea()(h,1)[0];k=na()(l=c.shape).call(l,-1);var u=ea()(k,1)[0];if(p!=c.shape[c.ndim-2])throw Error("rrqr_lstsq(Q,R,P,y): Q and y don't match.");if(t!=b.shape[b.ndim-2])throw Error("rrqr_lstsq(Q,R,P,y): Q and R don't match.");if(v!=a.shape[a.ndim-1])throw Error("rrqr_lstsq(Q,R,P,y): R and P don't match.");var x=Math.max(g.ndim,
b.ndim,a.ndim+1,c.ndim),w=Int32Array.from({length:x},function(){return 1});w[x-2]=v;w[x-1]=u;l=0;for(k=[g,b,c];l<k.length;l++){h=k[l];m=x-2;for(var y=h.ndim-2;0<m--&&0<y--;)if(1===w[m])w[m]=h.shape[y];else if(w[m]!=h.shape[y]&&1!=h.shape[y])throw Error("rrqr_lstsq(Q,R,P,y): Q,R,P,y not broadcast-compatible.");}l=x-2;for(k=a.ndim-1;0<l--&&0<k--;)if(1===w[l])w[l]=a.shape[k];else if(w[l]!=a.shape[k]&&1!=a.shape[k])throw Error("rrqr_lstsq(Q,R,P,y): Q,R,P,y not broadcast-compatible.");l=Ka[Hb()(n=[g,b,
c]).call(n,function(W){return"float32"===W.dtype})?"float32":"float64"];var z=new l(Math.min(t,v)),B=new Int32Array(v),E=new l(Ya()(w).call(w,function(W,ba){return W*ba},1)),D=g.data,I=b.data,K=a.data,Q=c.data,P=0,M=1,N=0,R=1,S=0,U=1,T=0,Y=1,aa=0;e(0);return new fa(w,E)}function Bg(g,b,a,c){a|=0;c<<=1;for(var e=0;e<c;e+=2){var h=Math.abs(b[a+(e>>>1)]);if(0!==h){if(g[e]<h){var k=g[e]/h;g[e+1]=g[e+1]*k*k;g[e]=h}h/=g[e];g[e+1]+=h*h}}}function Ce(g){var b,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:
{};g=V(g);if(2>g.ndim)throw Error("srrqr_decomp_full(A,opt): A must be at least 2D.");if(Jb()(b=g.dtype).call(b,"complex"))throw Error("srrqr_decomp_full(A,opt): Complex A not (yet) supported.");var c="float32"===g.dtype?"float32":"float64",e=Ka[c];b=g.shape;var h=Int32Array.from(b),k=na()(h).call(h,0,-1),l=na()(b).call(b,0,-2),n=na()(b).call(b,-2);n=ea()(n,2);var m=n[0],p=n[1];n=Math.min(m,p);h[h.length-1]=m;k[k.length-1]=p;var t=e.from(g.data);g=void 0;var v=new Int32Array(t.length/p/m),u=new Int32Array(t.length/
m),x=new e(t.length/p*m),w=new e(m*p),y=new e(m*p),z=new e(p<<1),B=new Mb;for(e=v.length;0<e--;)v[e]=1024*Math.random()-1024;var E=NaN,D=NaN,I=!1,K=0,Q=0,P=0,M=0,N=0,R=0;e=function(){var Da=a,Aa=Da.dtol;Aa=void 0===Aa?1.01:Aa;Da=Da.ztol;Da=void 0===Da?void 0:Da;if(Aa instanceof fa)throw Error("srrqr_decomp_full(A,opt): NDArray as opt.dtol not yet supported.");if(!(1<=Aa))throw Error("srrqr_decomp_full(A,opt): Invalid opt.dtol: ".concat(Aa,". Must be >=1."));var Ua=Number(Aa);Aa=function(){return Ua};
if(Da instanceof fa)throw Error("srrqr_decomp_full(A,opt): NDArray as opt.ztol not yet supported.");if(null==Da){var Oa=A(c);Da=function(jb){jb*=m*p;var Bb=jb+m*p;for(B.reset();jb<Bb;jb++)B.include(t[jb]);return Oa*B.result*Math.max(m,p)}}else{if(!(0<=Da))throw Error("srrqr_decomp_full(A,opt): invalid opt.ztol: ".concat(Da,". Must be non-negative number."));var rb=Number(Da);Da=function(){return rb}}return[Aa,Da]}();var S=ea()(e,2);e=S[0];S=S[1];a=void 0;for(var U=function(Da,Aa){var Ua=-t[Q+p*Aa+
Aa];Da[Aa+Aa*m]=-1/Ua;for(var Oa=Aa;0<Oa--;)Da[Oa+Aa*m]/=Ua;for(Ua=Aa;++Ua<p;)for(Oa=0;Oa<=Aa;Oa++)Da[Oa+Ua*m]+=Da[Oa+Aa*m]*t[Q+p*Aa+Ua]},T=function(Da,Aa){for(var Ua=p;--Ua>Aa;){Da[Aa+Ua*m]=0;for(var Oa=Aa;0<Oa--;)Da[Oa+Ua*m]-=Da[Oa+Aa*m]*t[Q+p*Aa+Ua]}Da[Aa+Aa*m]=0;Ua=-t[Q+p*Aa+Aa];for(Oa=Aa;0<Oa--;)Da[Oa+Aa*m]*=Ua},Y=function(Da){for(var Aa=0;Aa<m;Aa++){var Ua=t[Q+p*Aa+N];t[Q+p*Aa+N]=t[Q+p*Aa+Da];t[Q+p*Aa+Da]=Ua}for(Aa=0;Aa<N;Aa++)Ua=y[Aa+N*m],y[Aa+N*m]=y[Aa+Da*m],y[Aa+Da*m]=Ua;for(Aa=0;Aa<N;Aa++)Ua=
w[Aa+N*m],w[Aa+N*m]=w[Aa+Da*m],w[Aa+Da*m]=Ua;Aa=u[P+N];u[P+N]=u[P+Da];u[P+Da]=Aa;Ja()(z).call(z,0);for(Da=N;++Da<m;){Aa=Q+p*N+N;Ua=Q+p*Da+N;var Oa=t[Ua];if(0!==Oa){Oa=ib(t[Aa],Oa);var rb=ea()(Oa,3);Oa=rb[0];var jb=rb[1];rb=rb[2];t[Ua]=0;0!==jb&&(t[Aa]=rb,Ta(t,p-1-N,Aa+1,Ua+1,Oa,jb),Ta(x,I?m:Da+1,K+m*N,K+m*Da,Oa,jb))}sc(z,t,Q+p*Da,N+1)}},aa=function(){for(var Da=-1,Aa=-Infinity,Ua=N;Ua<p;Ua++){var Oa=xc(z,Ua);Aa<Oa&&(Da=Ua,Aa=Oa)}Y(Da)},W=function(Da,Aa){for(var Ua=0;Ua<p;Ua++)for(var Oa=0;Oa<N;Oa++)Aa[Oa+
Ua*m]=Da[Oa+Ua*m]},ba=function(Da,Aa,Ua){for(var Oa=Aa;Oa<p;Oa++){var rb=Da[Aa+Oa*m];if(Oa<Ua){for(var jb=Aa;jb<Oa;jb++)Da[jb+Oa*m]=Da[jb+1+Oa*m];Da[Oa+Oa*m]=0}else for(jb=Aa;jb<Ua;jb++)Da[jb+Oa*m]=Da[jb+1+Oa*m];Da[Ua+Oa*m]=rb}},ja=function(){Ja()(z).call(z,0);for(var Da=N;Da<m;Da++)sc(z,t,Q+p*Da,N)},ma=function(){B.reset();for(var Da=N;Da<p;Da++)B.include(xc(z,Da));return B.result},sa=function(Da){Da?(aa(),U(w,N++),W(w,y),M=N):(W(y,w),N=M,ja());for(var Aa=M+R>>>1;N<Aa;){if(ma()<=E){R=N;if(M<N){W(y,
w);N=M;ja();Aa=M+R>>>1;Da=!1;continue}break}Da&&aa();U(w,N++);Da||ja()}},qa=0;K<x.length;K+=m*m,Q+=m*p,P+=p,qa+=1){B.reset();for(var pa=m*p;0<pa--;)B.include(t[Q+pa]);pa=0===B.max?1:B.result;if(!isFinite(pa))throw Error("Assertion failed: "+pa);if(!(0<pa))throw Error("Assertion failed: "+pa);if(1!==pa)for(D=m*p;0<D--;)t[Q+D]/=pa;for(D=0;D<p;D++)u[P+D]=D;for(D=0;D<m;D++)x[K+m*D+D]=1;Ja()(y).call(y,0);Ja()(w).call(w,0);D=e(qa);E=S(qa);if(!isFinite(D))throw Error("Assertion failed. Invalid dtol: ".concat(D,
"."));if(!isFinite(E))throw Error("Assertion failed. Invalid ztol: ".concat(E,"."));if(!(1<=D))throw Error("Assertion failed. Invalid dtol: ".concat(D,"."));if(!(0<=E))throw Error("Assertion failed. Invalid ztol: ".concat(E,"."));M=N=0;R=n;I=!1;ja();a:for(;;){if(ma()<=E)if(R=N,M<N)sa(!1);else if(N===p)break a;for(var ta=-1,Sa=-1,va=-Infinity,Ba=0;Ba<N;Ba++)Bg(z,w,Ba*m,Ba+1);for(Ba=0;Ba<N;Ba++)for(var La=xc(z,Ba),Va=N;Va<p;Va++){var fb=xc(z,Va);fb=Nb()(w[Ba+Va*m],La*fb);va<fb&&(va=fb,ta=Ba,Sa=Va)}if(!(va>
D))if(M>=R)break a;else{sa(!0);continue a}I=!0;if(ta<M){--M;for(va=0;va<=M;va++){Ba=t[Q+p*va+ta];for(La=Math.max(ta,va-1);La<M;La++)t[Q+p*va+La]=t[Q+p*va+(La+1)];t[Q+p*va+M]=Ba}ba(w,ta,M);ba(y,ta,M);va=u[P+ta];for(Ba=ta;Ba<M;Ba++)u[P+Ba]=u[P+Ba+1];for(u[P+M]=va;ta<M;ta++)va=Q+p*ta+ta,Ba=Q+p*(ta+1)+ta,La=t[Ba],0!==La&&(La=ib(t[va],La),fb=ea()(La,3),La=fb[0],Va=fb[1],fb=fb[2],t[Ba]=0,0!==Va&&(t[va]=fb,Ta(t,p-1-ta,va+1,Ba+1,La,Va),Ta(x,m,K+m*ta,K+m*(ta+1),La,Va),Ta(w,ta+1,m*ta,m*(ta+1),La,Va),w[M+(ta+
1)*m]=-Va*w[M+ta*m]+La*w[M+(ta+1)*m],Ta(y,ta+1,m*ta,m*(ta+1),La,Va),y[M+(ta+1)*m]=-Va*y[M+ta*m]+La*y[M+(ta+1)*m])),w[M+ta*m]=0,y[M+ta*m]=0;T(y,M);ta=M++}--N;for(va=0;va<=N;va++){Ba=t[Q+p*va+ta];for(La=Math.max(ta,va-1);La<N;La++)t[Q+p*va+La]=t[Q+p*va+(La+1)];t[Q+p*va+N]=Ba}ba(w,ta,N);for(va=0;va<M;va++)z[va]=y[va+ta*m];for(va=ta;va<N;va++)for(Ba=0;Ba<M;Ba++)y[Ba+va*m]=y[Ba+(va+1)*m];for(va=0;va<M;va++)y[va+N*m]=z[va];va=u[P+ta];for(Ba=ta;Ba<N;Ba++)u[P+Ba]=u[P+Ba+1];u[P+N]=va;for(va=ta;va<N;va++){Ba=
Q+p*va+va;La=Q+p*(va+1)+va;Va=t[La];if(0!==Va){Va=ib(t[Ba],Va);var xb=ea()(Va,3);Va=xb[0];fb=xb[1];xb=xb[2];t[La]=0;0!==fb&&(t[Ba]=xb,Ta(t,p-1-va,Ba+1,La+1,Va,fb),Ta(x,m,K+m*va,K+m*(va+1),Va,fb),Ta(w,va+1,m*va,m*(va+1),Va,fb),w[N+(va+1)*m]=-fb*w[N+va*m]+Va*w[N+(va+1)*m])}w[N+va*m]=0}T(w,N);Y(Sa);ta<M&&U(y,ta);U(w,N++)}if(1!==pa)for(D=m*p;0<D--;)t[Q+D]*=pa;v[qa]=N;wc(m,x,K)}return[new fa(h,x),new fa(b,t),new fa(k,u),new fa(l,v)]}function Cg(g,b){g=ze(g);g=ea()(g,3);return Ae(g[0],g[1],g[2],b)}function Qd(g){var b;
g=V(g);if(Jb()(b=g.dtype).call(b,"complex"))throw Error("svd_jac_1sided(A): A.dtype must be float.");b=g.shape;var a=b[b.length-2]|0,c=b[b.length-1];if(a>c){b=rc(g);a=ea()(b,2);b=a[0];a=Qd(a[1]);a=ea()(a,3);c=a[1];var e=a[2];return[lc(b,a[0]),c,e]}if(a<c)return b=rc(g.T),a=ea()(b,2),b=a[0],a=Qd(a[1]),e=ea()(a,3),a=e[0],c=e[1],e=e[2],nd(e),[e,c,lc(b,a).T];e="float32"===g.dtype?"float32":"float64";var h=Ka[e];c=Math.pow(a*A(e),2);var k="float32"===e?16:8;e=h.from(g.data);g=void 0;var l=new h(a*a);g=
new h(e.length);h=new h(e.length/a);var n=Int32Array.from({length:a},function(D,I){return I});if(1>a)throw Error("Assertion failed.");if(1==a){for(a=e.length;0<a--;)0>e[a]?(e[a]*=-1,h[a]=-1):h[a]=1;return[new fa(b,h),new fa(na()(b).call(b,0,-1),e),new fa(b,Ja()(g).call(g,1))]}for(var m=0,p=0;p<h.length;m+=a*a,p+=a){for(var t=0;t<a;t++)for(var v=0;v<a;v++)l[a*t+v]=e[m+a*t+v],e[m+a*t+v]=+(t===v);for(t=0;t<a;t++)for(v=0;v<a;v++)g[m+a*t+v]=+(t===v);for(t=!1;!t;)for(t=!0,v=0;v<a;v+=k)for(var u=0;u<=v;u+=
k)for(var x=v;x<v+k&&x<a;x++)for(var w=u;w<u+k&&w<x;w++){var y=l[a*w+w],z=l[a*w+x],B=l[a*x+w],E=l[a*x+x];z*z+B*B>Math.abs(y*E)*c&&(t=!1,y=pd(y,z,B,E),E=ea()(y,4),y=E[0],z=E[1],B=E[2],E=E[3],Ta(l,a,a*w,a*x,y,z),je(l,a,w,x,B,E),l[a*w+x]=l[a*x+w]=0,Ta(e,a,m+a*w,m+a*x,y,z),Ta(g,a,m+a*w,m+a*x,B,-E))}re(a,e,l,g,m,h,p,n)}return[new fa(b,e),new fa(na()(b).call(b,0,-1),h),new fa(b,g)]}function Rd(g){var b;g=V(g);if(Jb()(b=g.dtype).call(b,"complex"))throw Error("svd_jac_1sided(A): A.dtype must be float.");
b=g.shape;var a=b[b.length-2]|0,c=b[b.length-1];if(a>c){b=rc(g);a=ea()(b,2);b=a[0];a=Rd(a[1]);a=ea()(a,3);c=a[1];var e=a[2];return[lc(b,a[0]),c,e]}if(a<c)return b=rc(g.T),a=ea()(b,2),b=a[0],a=Rd(a[1]),e=ea()(a,3),a=e[0],c=e[1],e=e[2],nd(e),[e,c,lc(b,a).T];c="float32"===g.dtype?"float32":"float64";var h=Ka[c];e=Math.pow(a*A(c),2);var k=Math.ceil(a/pb)|0;c=h.from(g.data);g=void 0;var l=new h(k*k*pb*pb);g=new h(c.length);h=new h(c.length/a);var n=Int32Array.from({length:a},function(M,N){return N});if(1>
a)throw Error("Assertion failed.");if(1==a){for(a=c.length;0<a--;)0>c[a]?(c[a]*=-1,h[a]=-1):h[a]=1;return[new fa(b,h),new fa(na()(b).call(b,0,-1),c),new fa(b,Ja()(g).call(g,1))]}for(var m=0,p=0;p<h.length;m+=a*a,p+=a){for(var t=0;t<a;t++)for(var v=0;v<a;v++)l[Gb*(k*(t/pb|0)+(v/pb|0))+t%pb*pb+v%pb|0]=c[m+a*t+v],c[m+a*t+v]=+(t===v);for(t=0;t<a;t++)for(v=0;v<a;v++)g[m+a*t+v]=+(t===v);for(t=!1;!t;)for(t=!0,v=k;0<v--;)for(var u=v;0<=u;u--)for(var x=pb;0<x--;)for(var w=u===v?x:pb;0<w--;){var y=l[Gb*(k*
u+u)+pb*w+w],z=l[Gb*(k*u+v)+pb*w+x],B=l[Gb*(k*v+u)+pb*x+w],E=l[Gb*(k*v+v)+pb*x+x];if(z*z+B*B>Math.abs(y*E)*e){t=!1;y=pd(y,z,B,E);E=ea()(y,4);y=E[0];z=E[1];B=E[2];E=E[3];for(var D=u*k*Gb+w*pb,I=v*k*Gb+x*pb,K=D+k*Gb;D<K;D+=Gb,I+=Gb)for(var Q=0;Q<pb;Q++){var P=y*l[Q+D]+z*l[Q+I];l[Q+I]=-z*l[Q+D]+y*l[Q+I];l[Q+D]=P}D=u*Gb+w+k*k*pb*pb;for(I=v*Gb+x+k*k*pb*pb;0<=(D-=k*Gb);)for(I-=k*Gb,K=Gb;0<=(K-=pb);)Q=l[D+K]*B+l[I+K]*-E,l[I+K]=l[D+K]*E+l[I+K]*B,l[D+K]=Q;l[Gb*(k*u+v)+pb*w+x]=l[Gb*(k*v+u)+pb*x+w]=0;D=m+a*
(pb*u+w);I=m+a*(pb*v+x);Ta(c,a,D,I,y,z);Ta(g,a,D,I,B,-E)}}for(t=0;t<a;t++)h[p+t]=l[Gb*(k+1)*(t/pb|0)+t%pb*(pb+1)|0];se(a,c,g,m,h,p,n)}return[new fa(b,c),new fa(na()(b).call(b,0,-1),h),new fa(b,g)]}function Sd(g){var b;g=V(g);if(Jb()(b=g.dtype).call(b,"complex"))throw Error("svd_jac_1sided(A): A.dtype must be float.");b=g.shape;var a=b[b.length-2],c=b[b.length-1];if(a>c){b=rc(g);c=ea()(b,2);b=c[0];c=Sd(c[1]);c=ea()(c,3);var e=c[1];g=c[2];return[lc(b,c[0]),e,g]}if(a<c)return b=rc(g.T),c=ea()(b,2),b=
c[0],c=Sd(c[1]),g=ea()(c,3),c=g[0],e=g[1],g=g[2],nd(g),[g,e,lc(b,c).T];c="float32"===g.dtype?"float32":"float64";var h=Ka[c];e=A(c)*a;c=h.from(g.data);g=void 0;var k=new h(a*a);g=new h(c.length);var l=new h(c.length/a);new h(a);var n=Int32Array.from({length:a},function(Q,P){return P});if(1>a)throw Error("Assertion failed.");if(1===a){for(e=c.length;0<e--;)0>c[e]?(c[e]*=-1,l[e]=-1):l[e]=1;return[new fa(b,l),new fa(na()(b).call(b,0,-1),c),new fa(b,Ja()(g).call(g,1))]}var m=Int32Array.from(Ga.a.mark(function P(){var M;
return Ga.a.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:M=a;case 1:if(!(1<M)){N.next=7;break}M=M+1>>>1;N.next=5;return M;case 5:N.next=1;break;case 7:case "end":return N.stop()}},P)})()),p=new h(Ya()(m).call(m,function(P,M){return P+(M*M+M>>>1)},0));h=function(){for(var P=0,M=0,N=0,R=0,S=function(aa,W){var ba=function(ma,sa){ma+=N;sa+=R;U=aa;return p[aa+(ma*ma+ma>>>1)+sa]},ja=m[W];aa-=ja*ja+ja>>>1;W=ba(0,0);P=N;M=R;N+1<ja&&(ja=ba(1,0),ja>W&&(W=ja,P=N+1,M=R),ja=ba(1,1),ja>W&&(W=ja,P=N+1,M=
R+1));N!=R&&(ba=ba(0,1),ba>W&&(W=ba,P=N,M=R+1));N=2*P;R=2*M;U=aa},U=p.length,T=m.length;0<T--;)S(U,T);S=-Infinity;T=function(aa,W){aa+=N;W+=R;var ba=k[a*aa+W];aa=k[a*W+aa];return ba*ba+aa*aa};if(N+1<a){var Y=T(1,0);Y>S&&(S=Y,P=N+1,M=R)}R+1<a&&(Y=T(0,1),Y>S&&(S=Y,P=N,M=R+1));N!=R&&(Y=T(0,0),Y>S&&(S=Y,P=N,M=R),N+1<a&&T(1,1)>S&&(P=N+1,M=R+1));return[M,P]};for(var t=function(P){for(var M=P=P>>>1<<1;M<P+2&&M<a;M++){var N=M>>>1;N=N*N+N>>>1;for(var R=0;R<P+1;R++){var S=k[a*M+R],U=k[a*R+M];S=M===R?-Infinity:
S*S+U*U;U=N+(R>>>1);p[U]=M%2||R%2?Math.max(p[U],S):S}}M=0;for(N=1;N<m.length;N++)for(R=m[N-1],S=M,M+=R*R+R>>>1,U=P=P>>>2<<1;U<P+2&&U<R;U++){var T=S+(U*U+U>>>1),Y=U>>>1;Y=M+(Y*Y+Y>>>1);for(var aa=0;aa<=U;aa++){var W=Y+(aa>>>1),ba=p[T+aa];p[W]=U%2||aa%2?Math.max(p[W],ba):ba}}},v=function(P){P=P>>>1<<1;for(var M=Math.min(P+2,a),N=P;N<a;N++){var R=N>>>1;R=R*R+R>>>1;for(var S=P;S<M;S++){var U=k[a*N+S],T=k[a*S+N];U=N===S?-Infinity:U*U+T*T;T=R+(S>>>1);p[T]=N%2||S%2?Math.max(p[T],U):U}}M=0;for(N=1;N<m.length;N++)for(P=
P>>>2<<1,R=m[N-1],S=Math.min(P+2,R),U=M,M+=R*R+R>>>1,T=P;T<R;T++){var Y=U+(T*T+T>>>1),aa=T>>>1;aa=M+(aa*aa+aa>>>1);for(var W=P;W<S&&W<=T;W++){var ba=aa+(W>>>1),ja=p[Y+W];p[ba]=T%2||W%2?Math.max(p[ba],ja):ja}}},u=0,x=0;x<l.length;u+=a*a,x+=a){for(var w=0;w<a;w++)for(var y=0;y<a;y++)k[a*w+y]=c[u+a*w+y],c[u+a*w+y]=+(w===y);for(w=0;w<a;w++)for(y=0;y<a;y++)g[u+a*w+y]=+(w===y);for(w=0;w<a;w+=2)t(w);for(y=w=-1;;){var z=h(),B=ea()(z,2);z=B[0];B=B[1];if(z>=B)throw Error("Assertion failed.");if(w==B&&y==z)break;
w=B;y=z;var E=k[a*B+B],D=k[a*B+z],I=k[a*z+B],K=k[a*z+z];if(!(Math.max(Math.abs(D),Math.abs(I))>Math.sqrt(Math.abs(E*K))*e))break;E=pd(K,I,D,E);K=ea()(E,4);E=K[0];D=K[1];I=K[2];K=K[3];Ta(k,a,a*z,a*B,E,D);je(k,a,z,B,I,K);k[a*B+z]=0;k[a*z+B]=0;t(B);t(z);v(B);v(z);Ta(c,a,u+a*z,u+a*B,E,D);Ta(g,a,u+a*z,u+a*B,I,-K)}re(a,c,k,g,u,l,x,n)}return[new fa(b,c),new fa(na()(b).call(b,0,-1),l),new fa(b,g)]}function De(g,b,a,c,e,h,k,l){if(0!==g%1)throw Error("Assertion failed.");if(0!==b%1)throw Error("Assertion failed.");
if(0!==c%1)throw Error("Assertion failed.");if(0!==h%1)throw Error("Assertion failed.");for(var n=b;0<n--;)for(var m=b;0<m--;)if(0!==e[h+b*n+m])throw Error("Assertion failed.");g|=0;b|=0;c|=0;h|=0;if(!(g<=b))throw Error("Assertion failed.");if(g===b)for(g=b;0<g--;)e[h+b*g+k[l+g]]=1;else{for(n=b;0<n--;)e[h+b*n+n]=1;for(n=g;0<n--;)for(m=g;m<b;m++){var p=c+b*n+m,t=a[p];if(0!==t){var v=c+b*n+n;t=ib(a[v],t);var u=ea()(t,3);t=u[0];var x=u[1];u=u[2];if(0!==x){for(var w=n;0<w--;){var y=c+b*w+n,z=a[y],B=c+
b*w+m,E=a[B];a[y]=E*x+z*t;a[B]=E*t-z*x}Ta(e,1+m-n,h+b*n+n,h+b*m+n,t,x);a[v]=u}a[p]=0}}for(g=0;g<b;++g)for(;;){a=k[l+g];k[l+g]=k[l+a];k[l+a]=a;if(a<=g)break;for(c=b;0<c--;)n=e[h+b*c+g],e[h+b*c+g]=e[h+b*c+a],e[h+b*c+a]=n}}}function Dg(g){var b,a;g=Ce(g);var c=ea()(g,4);g=c[0];var e=c[1],h=c[2];c=c[3];var k=na()(b=e.shape).call(b,-2);k=ea()(k,2);b=k[0];k=k[1];var l=na()(a=e.shape).call(a);l[l.length-2]=k;h=h.data;a=c.data;for(var n=e.data,m=new Ka[e.dtype](n.length/b*k),p=0,t=0,v=0,u=0;u<a.length;p+=
b*k,t+=k*k,v+=k,u+=1){var x=a[u];if(x<k)for(var w=x;w<b;w++)for(var y=x;y<k;y++)n[p+k*w+y]=0;De(x,k,n,p,m,t,h,v)}return[g,e,new fa(l,m),c]}function Eg(g,b,a,c,e){function h(pa){if(pa===y-2){U=I*K;Y=K*Q;W=Q*P;ja=I*M;sa=1;S-=U;T-=Y;aa-=W;ba-=ja;ma-=sa;qa-=P*M;pa=c[ma];var ta=I,Sa=K,va=Q,Ba=P,La=M,Va=g,fb=S,xb=b,Da=T,Aa=a,Ua=aa,Oa=N,rb=qa,jb=e,Bb=ba,Cb=R;if(0!==pa%1)throw Error("Assertion failed.");if(0!==ta%1)throw Error("Assertion failed.");if(0!==Sa%1)throw Error("Assertion failed.");if(0!==va%1)throw Error("Assertion failed.");
if(0!==Ba%1)throw Error("Assertion failed.");if(0!==La%1)throw Error("Assertion failed.");if(0!==fb%1)throw Error("Assertion failed.");if(0!==Da%1)throw Error("Assertion failed.");if(0!==Ua%1)throw Error("Assertion failed.");if(0!==rb%1)throw Error("Assertion failed.");if(0!==Bb%1)throw Error("Assertion failed.");if(!(0<=ta))throw Error("Assertion failed.");if(!(0<=Sa))throw Error("Assertion failed.");if(!(0<=va))throw Error("Assertion failed.");if(!(0<=Ba))throw Error("Assertion failed.");if(!(0<=
La))throw Error("Assertion failed.");if(!(0<=fb))throw Error("Assertion failed.");if(!(0<=Da))throw Error("Assertion failed.");if(!(0<=Ua))throw Error("Assertion failed.");if(!(0<=rb))throw Error("Assertion failed.");if(!(0<=Bb))throw Error("Assertion failed.");if(!(fb<=Va.length-ta*Sa))throw Error("Assertion failed.");if(!(Da<=xb.length-Sa*va))throw Error("Assertion failed.");if(!(Ua<=Aa.length-va*Ba))throw Error("Assertion failed.");if(!(rb<=Oa.length-Ba*La))throw Error("Assertion failed.");if(!(Bb<=
jb.length-ta*La))throw Error("Assertion failed.");if(Cb.length<ta*La)throw Error("Assertion failed.");Ja()(Cb).call(Cb,0,0,ta*La);for(var Ob=0;Ob<ta;Ob++)for(var Kb=0;Kb<pa;Kb++)for(var Xb=0;Xb<La;Xb++)Cb[La*Kb+Xb]+=Va[fb+Sa*Ob+Kb]*jb[Bb+La*Ob+Xb];qc(pa,va,La,xb,Da,Cb,0);for(ta=0;ta<pa;ta++)for(Sa=0;Sa<Ba;Sa++)for(va=0;va<La;va++)Oa[rb+La*Sa+va]+=Aa[Ua+Ba*ta+Sa]*Cb[La*ta+va]}else{for(Ba=z[pa];;Ba--){h(pa+1);if(1==Ba)break;1<t[pa-y+t.length]||(S+=U);1<v[pa-y+v.length]||(T+=Y);1<u[pa-y+u.length]||(aa+=
W);1<x[pa-y+x.length]||(ba+=ja);1<w[pa-y+2+w.length]||(ma+=sa)}U*=t[pa-y+t.length]||1;Y*=v[pa-y+v.length]||1;W*=u[pa-y+u.length]||1;ja*=x[pa-y+x.length]||1;sa*=w[pa-y+2+w.length]||1}}var k,l,n,m;if(null==e){if(null!=c||null!=a)throw Error("urv_lstsq( U,R,V,ranks, Y ): Either 2 ([U,R,V,ranks], Y) or 5 arguments (U,R,V,ranks, Y) expected.");e=b;var p=g;p=ea()(p,4);g=p[0];b=p[1];a=p[2];c=p[3]}g=V(g);if(!(2<=g.ndim))throw Error("urv_lstsq(U,R,V, Y): U.ndim must be at least 2.");b=V(b);if(!(2<=b.ndim))throw Error("urv_lstsq(U,R,V, Y): R.ndim must be at least 2.");
a=V(a);if(!(2<=a.ndim))throw Error("urv_lstsq(U,R,V, Y): V.ndim must be at least 2.");e=V(e);if(!(2<=e.ndim))throw Error("urv_lstsq(U,R,V, Y): Y.ndim must be at least 2.");c=V(c);var t=g.shape,v=b.shape,u=a.shape,x=e.shape,w=c.shape;p=Hb()(k=[g,b,a,e]).call(k,function(pa){return"float32"===pa.dtype})?"float32":"float64";k=Ka[p];var y=Ya()(l=[g,b,a,e]).call(l,function(pa,ta){return Math.max(pa,ta.ndim)},c.ndim+2),z=new Int32Array(y);Ja()(z).call(z,1);l=0;for(p=[g,b,a,e];l<p.length;l++)for(var B=p[l],
E=y-2,D=B.ndim-2;0<E--&&0<D--;)if(1===z[E])z[E]=B.shape[D];else if(z[E]!=B.shape[D]&&1!=B.shape[D])throw Error("urv_lstsq( U,R,V,ranks, Y ): U,R,V,ranks, Y not broadcast-compatible.");l=y-2;for(p=c.ndim;0<l--&&0<p--;)if(1===z[l])z[l]=c.shape[p];else if(z[l]!=c.shape[p]&&1!=c.shape[p])throw Error("urv_lstsq( U,R,V,ranks, Y ): U,R,V,ranks, Y not broadcast-compatible.");l=na()(n=g.shape).call(n,-2);n=ea()(l,2);var I=n[0],K=n[1];n=na()(m=a.shape).call(m,-2);m=ea()(n,2);var Q=m[0],P=m[1],M=e.shape[e.ndim-
1];if(b.shape[b.ndim-2]!==K)throw Error("urv_lstsq( U,R,V,ranks, Y ): Matrix dimensions incompatible.");if(b.shape[b.ndim-1]!==Q)throw Error("urv_lstsq( U,R,V,ranks, Y ): Matrix dimensions incompatible.");if(e.shape[e.ndim-2]!==I)throw Error("urv_lstsq( U,R,V,ranks, Y ): Matrix dimensions incompatible.");if(K!==Q&&I<P){if(I!==K)throw Error("Assertion failed.");if(Q!==P)throw Error("Assertion failed.");}if(!(I>=K))throw Error("Assertion failed.");if(!(Q<=P))throw Error("Assertion failed.");z[y-2]=
P;z[y-1]=M;c=c.data;g=g.data;b=b.data;a=a.data;e=e.data;var N=new k(Ya()(z).call(z,function(pa,ta){return pa*ta})),R=new k(I*M),S=g.length,U=1,T=b.length,Y=1,aa=a.length,W=1,ba=e.length,ja=1,ma=c.length,sa=1,qa=N.length;h(0);return new fa(z,N)}function qd(g){var b=Fg();return function(){var a=Eb()(g);if(b){var c=Eb()(this).constructor;a=gb()(a,arguments,c)}else a=a.apply(this,arguments);return Vb()(this,a)}}function Fg(){if("undefined"===typeof Reflect||!gb.a||gb.a.sham)return!1;if("function"===typeof Proxy)return!0;
try{return Boolean.prototype.valueOf.call(gb()(Boolean,[],function(){})),!0}catch(g){return!1}}function mc(g){g*=1;if(0===g)return+Number.MIN_VALUE;if(!(Infinity>g))return g;$c[0]=g;var b=1-pc,a=1*pc;0<g?(Db[a]+=-1===Db[b],Db[b]+=1):(Db[a]-=0===Db[b],--Db[b]);return $c[0]}function Fc(g){g*=1;if(0===g)return-Number.MIN_VALUE;if(!(-Infinity<g))return g;$c[0]=g;var b=1-pc,a=1*pc;0<g?(Db[a]-=0===Db[b],--Db[b]):(Db[a]+=-1===Db[b],Db[b]+=1);return $c[0]}function Ee(g,b,a){if(isNaN(g))throw Error("roots_quad_poly(a,b,c): a must be number.");
if(isNaN(b))throw Error("roots_quad_poly(a,b,c): b must be number.");if(isNaN(a))throw Error("roots_quad_poly(a,b,c): c must be number.");if(0===a)return a=-g/b,[a,a];g/=a;b/=a;if(0===b)return a=Math.sqrt(-g),[-a,+a];if(0===g)return 0<=b?[-b,0]:[0,-b];a=Math.sqrt(Math.abs(g))*Ib()(b);b/=2*a;var c=65536*Ec.a;if(0<g){if(b<1-c)throw Error("Complex roots not yet supported: "+b);1>b&&(b=1);g=-b-Math.sqrt((b+1)*(b-1));b=1/g}else g=-b-Math.sqrt(b*b+1),b=-1/g;g*=a;b*=a;return g<=b?[g,b]:[b,g]}function rd(g,
b,a,c){g*=1;if(!isFinite(g))throw Error("Assertion failed.");b*=1;if(!isFinite(b))throw Error("Assertion failed.");a*=1;if(!isFinite(a))throw Error("Assertion failed.");c*=1;if(!isFinite(c))throw Error("Assertion failed.");b-=g;c-=a;if(!(0<Ib()(b)*c))throw Error("Assertion failed: Bad curvature (i.e. no minimum).");return g-b/c*a}function ad(g,b,a,c,e){g*=1;if(!isFinite(g))throw Error("Assertion failed.");b*=1;if(!isFinite(b))throw Error("Assertion failed.");a*=1;if(!isFinite(a))throw Error("Assertion failed.");
c*=1;if(!isFinite(c))throw Error("Assertion failed.");e*=1;if(!isFinite(e))throw Error("Assertion failed.");if(g===b)throw Error("Assertion failed.");b-=g;return g+.5*b*e/(e-(c-a)/b)}function sd(g,b,a,c,e,h){g*=1;if(!isFinite(g))throw Error("Assertion failed.");b*=1;if(!isFinite(b))throw Error("Assertion failed.");a*=1;if(!isFinite(a))throw Error("Assertion failed.");c*=1;if(!isFinite(c))throw Error("Assertion failed.");e*=1;if(!isFinite(e))throw Error("Assertion failed.");h*=1;if(!isFinite(h))throw Error("Assertion failed.");
if(g===b)throw Error("Assertion failed.");b-=g;a=2*(3*(c-a)/b-h-2*e);h=(h-e-a)/b;e=Ee(e*b,a,h);a=ea()(e,2);e=a[0];a=a[1];return(0>Ib()(b)*h?e:a)+g}function Fe(g,b){var a=Td()(g);if(Ge.a){var c=Ge()(g);b&&(c=He()(c).call(c,function(e){return Ie()(g,e).enumerable}));a.push.apply(a,c)}return a}function Gg(g){for(var b=1;b<arguments.length;b++){var a=null!=arguments[b]?arguments[b]:{};if(b%2){var c;Ud()(c=Fe(Object(a),!0)).call(c,function(h){Je()(g,h,a[h])})}else if(Ke.a)Hg()(g,Ke()(a));else{var e;Ud()(e=
Fe(Object(a))).call(e,function(h){yc()(g,h,Ie()(a,h))})}}return g}function Ig(g){var b=Jg();return function(){var a=Eb()(g);if(b){var c=Eb()(this).constructor;a=gb()(a,arguments,c)}else a=a.apply(this,arguments);return Vb()(this,a)}}function Jg(){if("undefined"===typeof Reflect||!gb.a||gb.a.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(gb()(Boolean,[],function(){})),!0}catch(g){return!1}}function Vd(g,b,a){b*=1;a*=1;if(isNaN(b))throw Error("root1d_bisect(F,x1,x2): x1 must be a number.");
if(isNaN(a))throw Error("root1d_bisect(F,x1,x2): x2 must be a number.");if(!(g instanceof Function))throw Error("root1d_bisect(F,x1,x2): F must be a function.");var c=g(b),e=g(a);if(0===c)return b;if(0===e)return a;c>e&&(e=[e,c],c=e[0],e=e[1],a=[a,b],b=a[0],a=a[1]);if(!(0>c))throw Error("root1d_bisect(F,x1,x2): F(x1) and F(x2) must have opposite signs.");if(!(0<e))throw Error("root1d_bisect(F,x1,x2): F(x1) and F(x2) must have opposite signs.");for(;;){var h=b;var k=a;h*=1;k*=1;if(isNaN(h))throw Error("mid(x,y): x must be number.");
if(isNaN(k))throw Error("mid(x,y): x must be number.");if(0>Ib()(h)*k){var l=(h+k)/2;if(!(l<Math.max(h,k)))throw Error("Assertion failed.");if(!(l>Math.min(h,k)))throw Error("Assertion failed.");h=l}else{l=Math.abs(h)<=Math.abs(k)?[h,k]:[k,h];l=ea()(l,2);var n=l[0];l=n+.5*(l[1]-n);if(!(l<=Math.max(h,k)))throw Error("Assertion failed.");if(!(l>=Math.min(h,k)))throw Error("Assertion failed.");h=l===k?h:l}k=g(h);if(0===k)return h;if(b===h)break;if(isNaN(k))throw Error("NaN encountered.");0>k&&(b=h,c=
k);0<k&&(a=h,e=k)}return Math.abs(c)<=Math.abs(e)?b:a}function Kg(g){var b=Lg();return function(){var a=Eb()(g);if(b){var c=Eb()(this).constructor;a=gb()(a,arguments,c)}else a=a.apply(this,arguments);return Vb()(this,a)}}function Lg(){if("undefined"===typeof Reflect||!gb.a||gb.a.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(gb()(Boolean,[],function(){})),!0}catch(g){return!1}}function Mg(g){var b=Ng();return function(){var a=Eb()(g);if(b){var c=Eb()(this).constructor;
a=gb()(a,arguments,c)}else a=a.apply(this,arguments);return Vb()(this,a)}}function Ng(){if("undefined"===typeof Reflect||!gb.a||gb.a.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(gb()(Boolean,[],function(){})),!0}catch(g){return!1}}function Le(g){var b=Og();return function(){var a=Eb()(g);if(b){var c=Eb()(this).constructor;a=gb()(a,arguments,c)}else a=a.apply(this,arguments);return Vb()(this,a)}}function Og(){if("undefined"===typeof Reflect||!gb.a||
gb.a.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(gb()(Boolean,[],function(){})),!0}catch(g){return!1}}function Me(g){var b,a,c,e,h,k,l,n,m,p=arguments;return Ga.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:b=1<p.length&&void 0!==p[1]?p[1]:function(v,u){return(v>u)-(v<u)};if(0===g.length%1){t.next=3;break}throw Error("Assertion failed.");case 3:if(0<=g.length){t.next=5;break}throw Error("Assertion failed.");case 5:if(b instanceof Function){t.next=
7;break}throw Error("Assertion failed.");case 7:for(a=0,c=g.length,e=function(v,u){return 0>b(g[v],g[u])},h=function(v,u){var x=g[v];g[v]=g[u];g[u]=x},k=function(v){return c-1-(c-2-v>>1)},l=function(v){return c-2-(c-1-v<<1)},n=function x(u){var w=l(u);w>a?(e(w,w-1)||--w,e(w,u)&&(h(w,u),x(w))):w===a&&e(w,u)&&h(w,u)},m=k(0);m<c;m++)n(m);case 13:if(!(a<c)){t.next=20;break}h(a,c-1);t.next=17;return g[a++];case 17:n(c-1);t.next=13;break;case 20:case "end":return t.stop()}},Pg)}function $b(g,b){var a="undefined"!==
typeof Sb.a&&Tb()(g)||g["@@iterator"];if(!a){if(Ub()(g)||(a=Qg(g))||b&&g&&"number"===typeof g.length){a&&(g=a);var c=0;b=function(){};return{s:b,n:function(){return c>=g.length?{done:!0}:{done:!1,value:g[c++]}},e:function(l){throw l;},f:b}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var e=!0,h=!1,k;return{s:function(){a=a.call(g)},n:function(){var l=a.next();e=l.done;return l},e:function(l){h=
!0;k=l},f:function(){try{if(!e&&null!=a["return"])a["return"]()}finally{if(h)throw k;}}}}function Qg(g,b){var a;if(g){if("string"===typeof g)return Ne(g,b);var c=na()(a=Object.prototype.toString.call(g)).call(a,8,-1);"Object"===c&&g.constructor&&(c=g.constructor.name);if("Map"===c||"Set"===c)return qb()(g);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Ne(g,b)}}function Ne(g,b){if(null==b||b>g.length)b=g.length;for(var a=0,c=Array(b);a<b;a++)c[a]=g[a];return c}function Oe(g){var b=
function l(c,e,h,k){var n,m,p,t=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};if(!(h instanceof Function))throw Error("".concat(u,"(x,y, fgg,p0): fgg must be function."));c=ia("float64",c);e=ia("float64",e);k=V("float64",k);var v="dx0"in t?ia("float64",t.dx0):c.mapElems("float64",function(){return 0}),u=l.name;if(1!==k.ndim)throw Error("".concat(u,"(x,y, fgg,p0): p0.ndim must be 1."));if(1!==c.ndim&&2!==c.ndim)throw Error("".concat(u,"(x,y, fgg,p0): x.ndim must be 1 or 2."));if(1!==e.ndim&&
2!==e.ndim)throw Error("".concat(u,"(x,y, fgg,p0): y.ndim must be 1 or 2."));if(c.ndim!==v.ndim)throw Error("".concat(u,"(x,y, fgg,p0, opt): opt.dx0 and x must have same ndim."));var x=ea()(c.shape,2),w=x[0];x=x[1];var y=void 0===x?1:x,z=ea()(e.shape,2);x=z[0];z=z[1];var B=void 0===z?1:z,E=ea()(k.shape,1)[0];if(2==c.ndim&&y!==v.shape[1])throw Error("".concat(u,"(x,y, fgg,p0, opt): opt.dx0 and x must have same shape."));if(w!==v.shape[0])throw Error("".concat(u,"(x,y, fgg,p0, opt): opt.dx0 and x must have same shape."));
if(w!==x)throw Error("".concat(u,"(x,y, fgg,p0, opt): x.shape[0] must equal y.shape[0]."));var D=c.ndim,I=e.ndim,K=na()(n=c.shape).call(n,1),Q=new Float64Array(w*B),P=new Float64Array(w*B*E),M=new Float64Array(w*B*y),N=new fa(e.shape,Q),R=new fa(Int32Array.of.apply(Int32Array,Wa()(m=Za()(e.shape)).call(m,[E])),P),S=new fa(Int32Array.of.apply(Int32Array,Wa()(p=Za()(e.shape)).call(p,Za()(c.shape.subarray(1)))),M);c=c.data;e=e.data;return g(new Wd(function(U,T){var Y,aa;if(!Jb()(Y=U.dtype).call(Y,"float"))throw Error("Assertion failed.");
if(!Jb()(aa=T.dtype).call(aa,"float"))throw Error("Assertion failed.");if(1!==U.ndim)throw Error("Assertion failed.");if(U.shape[0]!==E)throw Error("Assertion failed.");if(D!==T.ndim)throw Error("Assertion failed.");if(1!==D&&T.shape[1]!==y)throw Error("Assertion failed.");if(T.shape[0]!==w)throw Error("Assertion failed.");U=h(U);T=T.data;for(Y=0;Y<w;Y++){aa=na()(T).call(T,y*Y,y*(Y+1));for(var W=y;0<W--;)aa[W]+=c[y*Y+W];aa=U(new fa(K,aa));W=ea()(aa,3);var ba=W[0];aa=W[1];W=W[2];ba=V("float",ba);aa=
V("float",aa);W=V("float",W);if(ba.ndim!==I-1)throw Error("Assertion failed.");if(aa.ndim!==I)throw Error("Assertion failed.");if(W.ndim!==I-2+D)throw Error("Assertion failed.");if(1!==I){if(ba.shape[0]!==B)throw Error("Assertion failed.");if(aa.shape[0]!==B)throw Error("Assertion failed.");if(W.shape[0]!==B)throw Error("Assertion failed.");}if(1!==D&&W.shape[I-1]!==y)throw Error("Assertion failed.");if(aa.shape[I-1]!==E)throw Error("Assertion failed.");ba=ba.data;aa=aa.data;W=W.data;for(var ja=B;0<
ja--;)Q[B*Y+ja]=ba[ja]-e[B*Y+ja];for(ba=E*B;0<ba--;)P[E*B*Y+ba]=aa[ba];for(aa=y*B;0<aa--;)M[y*B*Y+aa]=W[aa]}return[N,R,S]},k,v),t)};yc()(b,"name",{value:"odr".concat(g.name,"_gen")});return b}function Rg(g,b){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},c=a.updateTol,e=a.historySize,h=a.scaleInit;return bd(new Sg(g,b,{updateTol:void 0===c?1E-14:c,historySize:void 0===e?8:e,scaleInit:void 0===h?.01:h}),a)}function bd(g){var b,a,c,e,h,k,l,n,m,p,t,v,u,x,w,y,z,B,E,D,I,K,Q,P,M,N,R,S,
U,T,Y,aa,W,ba,ja,ma,sa,qa,pa,ta,Sa,va,Ba,La,Va,fb,xb,Da,Aa,Ua,Oa,rb,jb,Bb,Cb,Ob,Kb,Xb=arguments;return Ga.a.wrap(function(mb){for(;;)switch(mb.prev=mb.next){case 0:b=1<Xb.length&&void 0!==Xb[1]?Xb[1]:{};a=b.r0;c=void 0===a?1.1:a;e=b.rMin;h=void 0===e?0:e;k=b.rMax;l=void 0===k?Infinity:k;n=b.rNewton;m=void 0===n?2:n;p=b.shrinkLower;t=void 0===p?.05:p;v=b.shrinkUpper;u=void 0===v?.95:v;x=b.grow;w=void 0===x?1.4142135623730951:x;y=b.expectGainMin;z=void 0===y?.25:y;B=b.expectGainMax;E=void 0===B?.75:
B;D=b.stuckLimit;I=void 0===D?64:D;if(0<c){mb.next=3;break}throw Error("dogleg_gen(fJ, x0, opt): opt.r0 must be positive number.");case 3:if(0<=h){mb.next=5;break}throw Error("dogleg_gen(fJ, x0, opt): opt.rMin must be non-negative.");case 5:if(h<=l){mb.next=7;break}throw Error("dogleg_gen(fJ, x0, opt): opt.rMin must not be greater than opt.rMax.");case 7:if(h<=c){mb.next=9;break}throw Error("dogleg_gen(fJ, x0, opt): opt.r0 must not be less than opt.rMin.");case 9:if(l>=c){mb.next=11;break}throw Error("dogleg_gen(fJ, x0, opt): opt.r0 must not be greater than opt.rMax.");
case 11:if(1<m){mb.next=13;break}throw Error("dogleg_gen(fJ, x0, opt): opt.rGN must be greater than 1.");case 13:if(0<t){mb.next=15;break}throw Error("dogleg_gen(fJ, x0, opt): opt.shrinkLower must be positive number.");case 15:if(t<=u){mb.next=17;break}throw Error("dogleg_gen(fJ, x0, opt): opt.shrinkLower must not be greater than opt.shrinkUpper.");case 17:if(1>u){mb.next=19;break}throw Error("dogleg_gen(fJ, x0, opt): opt.shrinkUpper must be less than 1.");case 19:if(1<w){mb.next=21;break}throw Error("dogleg_gen(fJ, x0, opt): opt.grow must be number greater than 1.");
case 21:if(0<z){mb.next=23;break}throw Error("dogleg_gen(fJ, x0, opt): opt.expectGainMin must be positive number.");case 23:if(z<E){mb.next=25;break}throw Error("dogleg_gen(fJ, x0, opt): opt.expectGainMin must be less than expectGainMax.");case 25:1>E||console.warn("dogleg_gen(fJ, x0, opt): opt.expectGainMax should be less than 1.");if(0===I%1){mb.next=28;break}throw Error("dogleg_gen(fJ, x0, opt): opt.stuckLimit must be an integer.");case 28:if(0<=I){mb.next=30;break}throw Error("dogleg_gen(fJ, x0, opt): opt.stuckLimit must not be negative.");
case 30:K=g.N,Q=g.D,P=g.newton_dX,M=g.G0,N=new Float64Array(K),R=g.scaledNorm(M),S=g.cauchyTravel(),U=c*-R*S,T=g.loss,Y=0;case 32:if(0>=S){mb.next=34;break}throw Error("Assertion failed.");case 34:if(0!==Y){mb.next=37;break}mb.next=37;return g.report();case 37:aa=Math.max(-U/R,S);for(W=K;0<W--;)N[W]=aa*M[W];ba=!1;if(!(-R*S<U)){mb.next=52;break}g.computeNewton();sa=ma=ja=0;for(qa=K;0<qa--;)pa=Q[qa],ta=pa*N[qa],Sa=pa*(P[qa]-N[qa]),ja+=ta*ta,ma+=ta*Sa,sa+=Sa*Sa;ja-=U*U;ma*=2;va=Ee(ja,ma,sa)[1];if(0<=
va){mb.next=50;break}throw Error("Assertion failed.");case 50:for(1<va&&(va=1,ba=!0),Ba=K;0<Ba--;)La=P[Ba]-N[Ba],N[Ba]+=La*va;case 52:if(ba){mb.next=57;break}if(Math.abs(g.scaledNorm(N)-U)<=1E-5*U+1E-8){mb.next=55;break}throw Error("Assertion failed: "+Rc()({cp:S,err:Math.abs(g.scaledNorm(N)-U),D:Za()(Q),G:Za()(M),dX:Za()(N)}));case 55:mb.next=59;break;case 57:if(g.scaledNorm(N)<=1.00001*U){mb.next=59;break}throw Error("Assertion failed.");case 59:Va=g.considerMove(N);fb=ea()(Va,2);xb=fb[0];Da=fb[1];
Aa=function(){return 1};Ua=T-xb;Oa=T-Da;if(!(Oa<Ua*z)){mb.next=74;break}rb=0;for(jb=K;0<jb--;)rb+=N[jb]*M[jb];Bb=rb/(2*rb+T-Da);Bb>=t||(Bb=t);Bb<=u||(Bb=u);Cb=Math.max(h*Aa(),U*Bb);if(Cb!==U||T>Da){mb.next=71;break}throw new Gc;case 71:U=Cb;mb.next=75;break;case 74:if(ba)Ob=g.scaledNorm(N),Kb=Aa(),U=Math.max(h*Kb,Math.min(l*Kb,m*Ob));else if(Oa>Ua*E||0===Oa)U=Math.min(l*Aa(),Math.max(mc(U),U*w));case 75:T>Da?(T=Da,g.makeConsideredMove(),Y=0):++Y>I&&g.wiggle(),R=g.scaledNorm(M),S=g.cauchyTravel();
case 78:mb.next=32;break;case 80:case "end":return mb.stop()}},Tg)}function Pe(g,b,a,c,e){var h,k,l,n,m,p,t,v,u,x,w,y;return Ga.a.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(a instanceof Function){z.next=2;break}throw Error("fit_dogleg_gen(x,y, fg, p0): fg must be a function.");case 2:g=ia(g);b=ia("float64",b);c=ia("float64",c);k=Float64Array;if(2===g.ndim){z.next=8;break}throw Error("fit_dogleg_gen(x,y, fg, p0): x.ndim must be 2.");case 8:if(1===b.ndim){z.next=10;break}throw Error("fit_dogleg_gen(x,y, fg, p0): y.ndim must be 1.");
case 10:if(1===c.ndim){z.next=12;break}throw Error("fit_dogleg_gen(x,y, fg, p0): p0.ndim must be 1.");case 12:l=ea()(c.shape,1);n=l[0];m=ea()(g.shape,2);p=m[0];t=m[1];v=Int32Array.of(t);if(p==b.shape[0]){z.next=15;break}throw Error("fit_dogleg_gen(x,y, fg, p0): x.shape[0] must be equal to y.shape[0].");case 15:return g=na()(h=g.data).call(h),b=b.data,ab()(g.buffer),g=qb()({length:p},function(B,E){return ab()(new fa(v,g.subarray(t*E,t*E+t)))}),ab()(g),u=new k(p),x=new k(p*n),w=[new fa(Int32Array.of(p),
u),new fa(Int32Array.of(p,n),x)],y=function(B){B=a(B);if(!(B instanceof Function))throw Error();for(var E=p;0<E--;){var D=B(g[E]),I=ea()(D,2);D=I[0];I=I[1];D=V(D);I=V(I);if(0!==D.ndim)throw Error("fit_dogleg_gen(x,y, fg, p0): fg must have signature float[nParams] => float[nDim] => [float, float[nParams]].");if(1!==I.ndim)throw Error("fit_dogleg_gen(x,y, fg, p0): fg must have signature float[nParams] => float[nDim] => [float, float[nParams]].");if(I.shape[0]!==n)throw Error("fit_dogleg_gen(x,y, fg, p0): fg must have signature float[nParams] => float[nDim] => [float, float[nParams]].");
D=D.data[0];I=I.data;if(isNaN(D))throw Error("fit_dogleg_gen(x,y, fg, p0): NaN encountered.");if(Wb()(I).call(I,isNaN))throw Error("fit_dogleg_gen(x,y, fg, p0): NaN encountered.");u[E]=D-b[E];for(D=n;0<D--;)x[n*E+D]=I[D]}return w},z.delegateYield(Qe(y,c,e),"t0",23);case 23:case "end":return z.stop()}},Ug)}function Vg(g,b,a,c){if(null==c)c=a,a=0;else if(null==a)a=0;else if(!(0<=a&&Infinity>a))throw Error("fit_lin(x,y, regularization, funcs): Invalid regularization: ".concat(a,"."));c=Za()(c);g=V("float64",
g);b=V("float64",b);if(1!==b.ndim)throw Error("fit_lin(x,y, (regularization,) funcs): y.ndim must be 1.");var e=b.shape[0],h=c.length;if(1!==g.ndim&&2!==g.ndim)throw Error("fit_lin(x,y, (regularization,) funcs): x.ndim must be 1 or 2.");if(g.shape[0]!==b.shape[0])throw Error("fit_lin(x,y, (regularization,) funcs): x.shape[0] and y.shape[0] must equal.");if(1===g.ndim)g=g.data;else{var k,l,n=na()(k=g.shape).call(k,1),m=ea()(n,1)[0];g=na()(l=g.data).call(l);ab()(g.buffer);g=qb()({length:e},function(v,
u){return ab()(new fa(n,g.subarray(m*u,m*(u+1))))})}k=Int32Array.of((0!==a)*h+e,h);l=new Float64Array(k[0]*k[1]);if(0!==a){a=Math.sqrt(a);for(var p=h;0<p--;)l[e*h+h*p+p]=a}for(p=e;0<p--;)for(var t=h;0<t--;)l[h*p+t]=c[t](g[p]);if(0!==a){b=b.data;a=new Float64Array(e+h);for(p=e;0<p--;)a[p]=b[p];b=new fa(Int32Array.of(e+h,1),a)}else b=new fa(Int32Array.of(e,1),b.data);l=new fa(k,l);b=ue(l,b).data;e=function x(u){var w=x.coeffs,y=x.funcs;if(w.length!==y.length)throw Error("Assertion failed.");for(var z=
0,B=w.length;0<B--;)z+=w[B]*y[B](u);return z};Pb()(e,{coeffs:b,funcs:c});return e}function Wg(g,b,a){if(b>a)throw Error("opt1d_golden(F,x_min,x_max): x_max must not be less than x_min.");for(var c=b+(a-b)*Re,e=g(c);;){var h=a-(a-b)*Re;if(h===a)return(a+b)/2;var k=g(h);e<k?(a=b,b=h):(b=c,c=h,e=k)}}function Se(g,b){var a,c,e,h,k,l,n,m,p,t,v,u,x,w,y,z,B,E,D,I,K,Q,P,M,N,R=arguments;return Ga.a.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:a=2<R.length&&void 0!==R[2]?R[2]:{};c=a.historySize;e=void 0===
c?8:c;h=a.lineSearch;k=void 0===h?td():h;l=a.updateTol;n=void 0===l?1E-14:l;m=a.negDir0;p=void 0===m?function(U){return U}:m;t=a.scaling;v=void 0===t?function(){var U=1024;return{update:function(T,Y){if(1!==T.ndim)throw Error("Assertion failed.");if(1!==Y.ndim)throw Error("Assertion failed.");T=T.data;Y=Y.data;if(T.length!==Y.length)throw Error("Assertion failed.");for(var aa=Ya()(Y).call(Y,function(qa,pa){return Math.max(qa,Math.abs(pa))},0),W=0,ba=0,ja=Y.length;0<ja--;){var ma=Y[ja]/aa,sa=T[ja]/
aa;W+=ma*ma;ba+=sa*ma}U=W/ba;if(!isFinite(U))throw Error("Assertion failed.");},apply:function(T){if(1!==T.ndim)throw Error("Assertion failed.");for(var Y=T.data,aa=Y.length;0<aa--;)Y[aa]/=U;return T}}}():t;if(0===e%1){S.next=3;break}throw Error("min_lbfgs_gen(fg, x0, opt): opt.historySize must be an integer.");case 3:if(0<e){S.next=5;break}throw Error("min_lbfgs_gen(fg, x0, opt): opt.historySize must be positive.");case 5:u=ia("float64",b);b=void 0;if(1===u.ndim){S.next=9;break}throw Error("min_lbfgs_gen(fg, x0, opt): x0.ndim must be 1.");
case 9:x=ea()(u.shape,1);w=x[0];y=u.shape;z=g(u);B=ea()(z,2);E=B[0];D=B[1];D=ia("float64",D);E*=1;if(!isNaN(E)){S.next=15;break}throw Error("min_lbfgs_gen(fg, x0, opt): fg must return [float,float[]].");case 15:if(1===D.ndim){S.next=17;break}throw Error("min_lbfgs_gen(fg, x0, opt): fg must return [float,float[]].");case 17:if(D.shape[0]===w){S.next=19;break}throw Error("min_lbfgs_gen(fg, x0, opt): fg must return [float,float[]].");case 19:k=k(g),I=new Te(e,w),K=new Float64Array(w),Q=new Float64Array(w),
P=function(){var U=Float64Array.from(D.data);I.compute_Hv_phase1(U);U=p(new fa(y,U));U=ia("float64",U);U=v.apply(U);U=ia("float64",U);I.compute_Hv_phase2(U.data);var T=!0;try{var Y,aa,W=k(new fa(y,na()(Y=u.data).call(Y)),E,new fa(y,na()(aa=D.data).call(aa)),U),ba=ea()(W,3);var ja=ba[0];var ma=ba[1];var sa=ba[2]}catch(qa){if(!(qa instanceof zc))throw qa;ja=qa.x;ma=qa.f;sa=qa.g;T=!1}ja=ia("float64",ja);sa=ia("float64",sa);ma*=1;if(1!==ja.ndim)throw Error("Assertion failed.");if(1!==sa.ndim)throw Error("Assertion failed.");
if(ja.shape[0]!==w)throw Error("Assertion failed.");if(sa.shape[0]!==w)throw Error("Assertion failed.");if(isNaN(ma))throw Error("Assertion failed.");for(U=w;0<U--;)Q[U]=sa.data[U]-D.data[U];for(U=w;0<U--;)K[U]=ja.data[U]-u.data[U];if(Hb()(K).call(K,function(qa){return 0===qa}))throw new Lb;if(T=T||function(){for(var qa=Ya()(Q).call(Q,function(La,Va){return Math.max(La,Math.abs(Va))},0),pa=0,ta=0,Sa=Q.length;0<Sa--;){var va=Q[Sa]/qa,Ba=K[Sa]/qa;pa+=va*va;ta+=Ba*va}return n*pa<ta}())I.update(K,Q),
v.update(new fa(y,na()(K).call(K)),new fa(y,na()(Q).call(Q)));u=ja;E=ma;D=sa};case 23:if(u instanceof fa){S.next=25;break}throw Error("Assertion failed.");case 25:if(D instanceof fa){S.next=27;break}throw Error("Assertion failed.");case 27:if(!isNaN(E)){S.next=29;break}throw Error("Assertion#5 failed.");case 29:if(1===u.ndim){S.next=31;break}throw Error("Assertion#4 failed.");case 31:if(1===D.ndim){S.next=33;break}throw Error("Assertion#6 failed.");case 33:if(u.shape[0]===w){S.next=35;break}throw Error("Assertion#7 failed.");
case 35:if(D.shape[0]===w){S.next=37;break}throw Error("Assertion#8 failed.");case 37:return S.next=39,[new fa(y,na()(M=u.data).call(M)),E,new fa(y,na()(N=D.data).call(N))];case 39:return S.prev=39,P(),S.abrupt("break",53);case 44:S.prev=44;S.t0=S["catch"](39);if(!(S.t0 instanceof ac&&0<I.m)){S.next=50;break}I.forget(I.m+1>>>1);S.next=51;break;case 50:throw S.t0;case 51:S.next=39;break;case 53:S.next=23;break;case 55:case "end":return S.stop()}},Xg,null,[[39,44]])}function Xd(g,b){var a,c,e,h,k,l,
n,m,p,t,v,u,x,w,y,z,B,E,D,I,K,Q,P,M,N,R,S,U,T,Y,aa,W,ba,ja,ma,sa=arguments;return Ga.a.wrap(function(qa){for(;;)switch(qa.prev=qa.next){case 0:a=2<sa.length&&void 0!==sa[2]?sa[2]:{};c=a.historySize;e=void 0===c?8:c;h=a.lineSearch;k=void 0===h?td():h;l=a.updateTol;n=void 0===l?1E-13:l;if(0===e%1){qa.next=3;break}throw Error("min_lbfgs_gen(fg, x0, opt): opt.historySize must be an integer.");case 3:if(0<e){qa.next=5;break}throw Error("min_lbfgs_gen(fg, x0, opt): opt.historySize must be positive.");case 5:m=
ia("float64",b);b=void 0;if(1===m.ndim){qa.next=9;break}throw Error("min_lbfgs_gen(fg, x0, opt): x0.ndim must be 1.");case 9:p=g(m);t=ea()(p,2);v=t[0];u=t[1];v=ia("float64",v);u=ia("float64",u);if(1===v.ndim){qa.next=14;break}throw Error("lsq_lbfgs_gen(fg, x0: float[L], opt): fg must return [float[K],float[K,L]].");case 14:if(2===u.ndim){qa.next=16;break}throw Error("lsq_lbfgs_gen(fg, x0: float[L], opt): fg must return [float[K],float[K,L]].");case 16:x=ea()(u.shape,2);w=x[0];y=x[1];z=m.shape;B=v.shape;
E=u.shape;Int32Array.of();if(v.shape[0]===w){qa.next=19;break}throw Error("lsq_lbfgs_gen(fg, x0: float[L], opt): fg must return [float[K],float[K,L]].");case 19:if(m.shape[0]===y){qa.next=21;break}throw Error("lsq_lbfgs_gen(fg, x0: float[L], opt): fg must return [float[K],float[K,L]].");case 21:g=function(){var pa=g;return function(ta){var Sa,va;ta=new fa(z,ta.data);ta=pa(ta);var Ba=ea()(ta,2);ta=Ba[0];Ba=Ba[1];ta=ia("float64",ta);Ba=ia("float64",Ba);if(Wb()(Sa=ta.data).call(Sa,isNaN))throw Error("Assertion failed.");
if(Wb()(va=Ba.data).call(va,isNaN))throw Error("Assertion failed.");if(1!==ta.ndim)throw Error("lsq_lbfgs_gen(fg, x0: float[L], opt): fJ(x: float[L]) must return [float[K],float[K,L]].");if(2!==Ba.ndim)throw Error("lsq_lbfgs_gen(fg, x0: float[L], opt): fJ(x: float[L]) must return [float[K],float[K,L]].");if(ta.shape[0]!==w)throw Error("lsq_lbfgs_gen(fg, x0: float[L], opt): fJ(x: float[L]) must return [float[K],float[K,L]].");if(Ba.shape[0]!==w)throw Error("lsq_lbfgs_gen(fg, x0: float[L], opt): fJ(x: float[L]) must return [float[K],float[K,L]].");
if(Ba.shape[1]!==y)throw Error("lsq_lbfgs_gen(fg, x0: float[L], opt): fJ(x: float[L]) must return [float[K],float[K,L]].");return[ta,Ba]}}(),D=function(pa,ta){pa=pa.data;ta=ta.data;for(var Sa=0,va=new Float64Array(y),Ba=w;0<Ba--;)Sa+=pa[Ba]*pa[Ba]/w;for(Ba=w;0<Ba--;)for(var La=y;0<La--;)va[La]+=2*pa[Ba]*ta[y*Ba+La]/w;return[Sa,new fa(z,va)]},k=k(function(pa){I=ia("float64",pa);if(1!==I.ndim)throw Error("Assertion failed.");if(I.shape[0]!==y)throw Error("Assertion failed.");pa=g(I);pa=ea()(pa,2);K=
pa[0];Q=pa[1];return D(K,Q)}),P=function(pa){for(var ta=Y.data,Sa=u.data,va=0,Ba=y;0<Ba--;)va+=ta[Ba]*pa[Ba];if(0<va){ta=0;for(Ba=w;0<Ba--;){for(var La=0,Va=y;0<Va--;)La+=Sa[y*Ba+Va]*pa[Va];ta+=La*La*2/w}if(!(0<ta))throw Error("Assertion failed.");va/=ta;for(Sa=y;0<Sa--;)pa[Sa]*=va}},M=new Float64Array(y),N=new Float64Array(y),R=new Te(e,y),S=D(v,u),U=ea()(S,2),T=U[0],Y=U[1],aa=function(){var pa,ta=Float64Array.from(Y.data);R.compute_Hv_phase1(ta);P(ta);R.compute_Hv_phase2(ta);var Sa=!0;try{var va,
Ba,La=k(new fa(z,na()(va=m.data).call(va)),T,new fa(z,na()(Ba=Y.data).call(Ba)),new fa(z,ta)),Va=ea()(La,3);var fb=Va[0];var xb=Va[1];var Da=Va[2]}catch(Aa){if(!(Aa instanceof zc))throw Aa;fb=Aa.x;xb=Aa.f;Da=Aa.g;Sa=!1}m=ia("float64",m);T*=1;Y=ia("float64",Y);if(1!==m.ndim)throw Error("Assertion failed.");if(1!==Y.ndim)throw Error("Assertion failed.");if(m.shape[0]!==y)throw Error("Assertion failed.");if(Y.shape[0]!==y)throw Error("Assertion failed.");if(isNaN(T))throw Error("Assertion failed.");
ta=K;va=Q;Wb()(pa=I.data).call(pa,function(Aa,Ua){return Aa!==fb.data[Ua]})&&(pa=g(fb),pa=ea()(pa,2),ta=pa[0],va=pa[1]);for(pa=y;0<pa--;)M[pa]=fb.data[pa]-m.data[pa];for(pa=y;0<pa--;)N[pa]=Da.data[pa]-Y.data[pa];if(Hb()(M).call(M,function(Aa){return 0===Aa}))throw new Lb;(Sa=Sa||function(){for(var Aa=Ya()(N).call(N,function(Cb,Ob){return Math.max(Cb,Math.abs(Ob))},0),Ua=0,Oa=0,rb=N.length;0<rb--;){var jb=N[rb]/Aa,Bb=M[rb]/Aa;Ua+=jb*jb;Oa+=Bb*jb}return n*Ua<Oa}())&&R.update(M,N);m=fb;T=xb;Y=Da;v=ta;
u=va};case 28:return qa.next=30,[new fa(z,na()(W=m.data).call(W)),T,new fa(z,na()(ba=Y.data).call(ba)),new fa(B,na()(ja=v.data).call(ja)),new fa(E,na()(ma=u.data).call(ma))];case 30:return qa.prev=30,aa(),qa.abrupt("break",44);case 35:qa.prev=35;qa.t0=qa["catch"](30);if(!(qa.t0 instanceof ac&&0<R.m)){qa.next=41;break}R.forget(R.m+1>>>1);qa.next=42;break;case 41:throw qa.t0;case 42:qa.next=30;break;case 44:qa.next=28;break;case 46:case "end":return qa.stop()}},Yg,null,[[30,35]])}function Ue(g,b,a,
c,e){var h,k,l,n,m,p,t,v,u,x,w,y;return Ga.a.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(a instanceof Function){z.next=2;break}throw Error("fit_lbfgs_gen(x,y, fg, p0): fg must be a function.");case 2:g=ia(g);b=ia("float64",b);c=ia("float64",c);k=Float64Array;if(2===g.ndim){z.next=8;break}throw Error("fit_lbfgs_gen(x,y, fg, p0): x.ndim must be 2.");case 8:if(1===b.ndim){z.next=10;break}throw Error("fit_lbfgs_gen(x,y, fg, p0): y.ndim must be 1.");case 10:if(1===c.ndim){z.next=12;break}throw Error("fit_lbfgs_gen(x,y, fg, p0): p0.ndim must be 1.");
case 12:l=ea()(c.shape,1);n=l[0];m=ea()(g.shape,2);p=m[0];t=m[1];v=Int32Array.of(t);if(p==b.shape[0]){z.next=15;break}throw Error("fit_lbfgs_gen(x,y, fg, p0): x.shape[0] must be equal to y.shape[0].");case 15:return g=na()(h=g.data).call(h),b=b.data,ab()(g.buffer),g=qb()({length:p},function(B,E){return ab()(new fa(v,g.subarray(t*E,t*E+t)))}),ab()(g),u=new k(p),x=new k(p*n),w=[new fa(Int32Array.of(p),u),new fa(Int32Array.of(p,n),x)],y=function(B){B=a(B);if(!(B instanceof Function))throw Error();for(var E=
p;0<E--;){var D=B(g[E]),I=ea()(D,2);D=I[0];I=I[1];D=V(D);I=V(I);if(0!==D.ndim)throw Error("fit_lbfgs_gen(x,y, fg, p0): fg must have signature float[nParams] => float[nDim] => [float, float[nParams]].");if(1!==I.ndim)throw Error("fit_lbfgs_gen(x,y, fg, p0): fg must have signature float[nParams] => float[nDim] => [float, float[nParams]].");if(I.shape[0]!==n)throw Error("fit_lbfgs_gen(x,y, fg, p0): fg must have signature float[nParams] => float[nDim] => [float, float[nParams]].");D=D.data[0];I=I.data;
if(isNaN(D))throw Error("fit_lbfgs_gen(x,y, fg, p0): NaN encountered.");if(Wb()(I).call(I,isNaN))throw Error("fit_lbfgs_gen(x,y, fg, p0): NaN encountered.");u[E]=D-b[E];for(D=n;0<D--;)x[n*E+D]=I[D]}return w},z.delegateYield(Xd(y,c,e),"t0",23);case 23:case "end":return z.stop()}},Zg)}function $g(g,b){var a="undefined"!==typeof Sb.a&&Tb()(g)||g["@@iterator"];if(!a){if(Ub()(g)||(a=ah(g))||b&&g&&"number"===typeof g.length){a&&(g=a);var c=0;b=function(){};return{s:b,n:function(){return c>=g.length?{done:!0}:
{done:!1,value:g[c++]}},e:function(l){throw l;},f:b}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var e=!0,h=!1,k;return{s:function(){a=a.call(g)},n:function(){var l=a.next();e=l.done;return l},e:function(l){h=!0;k=l},f:function(){try{if(!e&&null!=a["return"])a["return"]()}finally{if(h)throw k;}}}}function ah(g,b){var a;if(g){if("string"===typeof g)return Ve(g,b);var c=na()(a=Object.prototype.toString.call(g)).call(a,
8,-1);"Object"===c&&g.constructor&&(c=g.constructor.name);if("Map"===c||"Set"===c)return qb()(g);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Ve(g,b)}}function Ve(g,b){if(null==b||b>g.length)b=g.length;for(var a=0,c=Array(b);a<b;a++)c[a]=g[a];return c}function We(g,b,a){var c,e,h,k,l,n,m,p,t,v,u,x,w,y,z,B,E,D,I,K,Q,P,M,N,R,S=arguments;return Ga.a.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:e=3<S.length&&void 0!==S[3]?S[3]:{};h=e.historySize;k=void 0===h?8:
h;l=e.lineSearch;n=void 0===l?Yd({fRed:.001,gRed:.8}):l;m=e.updateTol;p=void 0===m?1E-14:m;t=e.scaleInit;v=void 0===t?.001:t;if(0===k%1){U.next=3;break}throw Error("min_lbfgsb_gen(fg, x0, opt): opt.historySize must be an integer.");case 3:if(0<k){U.next=5;break}throw Error("min_lbfgsb_gen(fg, x0, opt): opt.historySize must be positive.");case 5:if(g instanceof Function){U.next=7;break}throw Error("min_lbfgsb_gen(fg,x0,bounds): fg must be a function.");case 7:b=ia("float64",b);a=V(a);u=ea()(b.shape,
1);x=u[0];w=b.shape;if(1===b.ndim){U.next=12;break}throw Error("min_lbfgsb_gen(fg,x0,bounds): x0.ndim must be 1.");case 12:if(2===a.ndim){U.next=14;break}throw Error("min_lbfgsb_gen(fg,x0,bounds): bounds.ndim must be 2.");case 14:if(a.shape[0]===x){U.next=16;break}throw Error("min_lbfgsb_gen(fg,x0,bounds): bounds.shape[0] must be x0.shape[0].");case 16:if(2===a.shape[1]){U.next=18;break}throw Error("min_lbfgsb_gen(fg,x0,bounds): bounds.shape[1] must be 2.");case 18:p*=1;v*=1;if(0<=p){U.next=22;break}throw Error("min_lbfgsb_gen(fg,x0,bounds,opt): opt.updateTol most be non-negative.");
case 22:if(0<v){U.next=24;break}throw Error("min_lbfgsb_gen(fg,x0,bounds,opt): opt.scaleInit most be greater than 0.");case 24:a=a.data,p*=1,y=a.length;case 27:if(!(0<=(y-=2))){U.next=32;break}if(a[y+0]<=a[y+1]){U.next=30;break}throw Error("Assertion failed.");case 30:U.next=27;break;case 32:z=b;b=void 0;B=g(z);E=ea()(B,2);D=E[0];I=E[1];D*=1;I=ia("float64",I);if(isFinite(D)){U.next=39;break}throw Error("min_lbfgsb_gen(fg, x0, bounds): fg must return [float,float[]].");case 39:if(Jb()(c=I.dtype).call(c,
"float")){U.next=41;break}throw Error("min_lbfgsb_gen(fg, x0, bounds): fg must return [float,float[]].");case 41:n=n(g),K=new Xe(k,x),K.scale=1/v,Q=Int32Array.from({length:x},function(T,Y){return Y}),P=new Float64Array(x),M=new Float64Array(x),N=function(){var T,Y,aa,W=na()(T=I.data).call(T),ba=na()(Y=z.data).call(Y),ja=new Float64Array(x);T=K.compute_cauchyGeneralized(W,ba,a,Q,!1);T=ea()(T,2);var ma=T[0];T=T[1];K.compute_subspace_Hv(W,ja,Q,ma);if(!Hb()(aa=Q.subarray(0,ma)).call(aa,function(va){return 0===
ja[va]}))throw Error("Assertion failed.");aa=function(){var va=Infinity,Ba=$g(Q.subarray(ma)),La;try{for(Ba.s();!(La=Ba.n()).done;){var Va=La.value;if(0!==ja[Va]){var fb=a[2*Va+(0>ja[Va])],xb=(ba[Va]-fb)/ja[Va];if(!(0<=xb))throw Error("Assertion failed: "+xb);for(var Da=0;0>Ib()(ja[Va])*(ba[Va]-xb*ja[Va]-fb);){if(2<++Da)throw Error("Assertion failed.");xb=Fc(xb)}if(0>ja[Va]&&ba[Va]-xb*ja[Va]>fb)throw Error("Assertion failed.");if(0<ja[Va]&&ba[Va]-xb*ja[Va]<fb)throw Error("Assertion failed.");va=Math.min(va,
xb)}}}catch(Aa){Ba.e(Aa)}finally{Ba.f()}return va}();try{var sa=n(new fa(w,na()(ba).call(ba)),D+T,new fa(w,W),new fa(w,ja),void 0,void 0,aa),qa=ea()(sa,3);var pa=qa[0];var ta=qa[1];var Sa=qa[2]}catch(va){if(va instanceof Sc||va instanceof zc)pa=va.x,ta=va.f,Sa=va.g;else if(va instanceof Lb&&0>T)pa=new fa(w,ba),ta=g(new fa(w,na()(ba).call(ba))),Sa=ea()(ta,2),ta=Sa[0],Sa=Sa[1];else throw va;}ta*=1;pa=ia("float64",pa);Sa=ia("float64",Sa);for(W=x;0<W--;)P[W]=pa.data[W]-z.data[W];for(W=x;0<W--;)M[W]=Sa.data[W]-
I.data[W];if(Hb()(P).call(P,function(va){return 0===va}))throw new Lb;W=Ya()(M).call(M,function(va,Ba){return Math.max(va,Math.abs(Ba))},0);qa=sa=0;for(aa=M.length;0<aa--;)T=P[aa]/W,Y=M[aa]/W,sa+=Y*Y,qa+=T*Y;p*sa<qa&&(K.update(P,M),K.scale=sa/qa);z=pa;D=ta;I=Sa},R=Ga.a.mark(function Y(){var aa,W,ba,ja,ma;return Ga.a.wrap(function(sa){for(;;)switch(sa.prev=sa.next){case 0:if(z instanceof fa){sa.next=2;break}throw Error("Assertion failed.");case 2:if(I instanceof fa){sa.next=4;break}throw Error("Assertion failed.");
case 4:if(z.shape[0]===x){sa.next=6;break}throw Error("Assertion#7 failed.");case 6:if(I.shape[0]===x){sa.next=8;break}throw Error("Assertion#8 failed.");case 8:if(1===z.ndim){sa.next=10;break}throw Error("Assertion#4 failed.");case 10:if(1===I.ndim){sa.next=12;break}throw Error("Assertion#6 failed.");case 12:if(!isNaN(D)){sa.next=14;break}throw Error("Assertion#5 failed.");case 14:return ma=na()(aa=I.data).call(aa),Ud()(W=z.data).call(W,function(qa,pa){var ta=a.subarray(2*pa,2+2*pa),Sa=ea()(ta,2);
ta=Sa[0];Sa=Sa[1];var va=ma[pa];0<va&&qa===ta?ma[pa]=0:0>va&&qa===Sa&&(ma[pa]=0)}),sa.next=18,[new fa(w,na()(ba=z.data).call(ba)),D,new fa(w,ma),new fa(w,na()(ja=I.data).call(ja))];case 18:return sa.prev=18,N(),sa.abrupt("break",32);case 23:sa.prev=23;sa.t0=sa["catch"](18);if(!(sa.t0 instanceof ac&&0<K.m)){sa.next=29;break}K.forget(K.m+1>>>1);sa.next=30;break;case 29:throw sa.t0;case 30:sa.next=18;break;case 32:case "end":return sa.stop()}},Y,null,[[18,23]])});case 47:return U.delegateYield(R(),"t0",
48);case 48:U.next=47;break;case 50:case "end":return U.stop()}},bh)}function ud(g){var b,a,c,e,h,k,l,n,m,p,t,v,u,x,w,y,z,B,E,D,I,K,Q,P,M,N,R,S,U,T,Y,aa,W,ba,ja,ma,sa,qa,pa,ta,Sa,va,Ba,La,Va,fb,xb,Da,Aa,Ua,Oa,rb,jb,Bb,Cb,Ob,Kb,Xb,mb,Zd=arguments;return Ga.a.wrap(function($a){for(;;)switch($a.prev=$a.next){case 0:b=1<Zd.length&&void 0!==Zd[1]?Zd[1]:{};a=b.r0;c=void 0===a?1.1:a;e=b.rMin;h=void 0===e?0:e;k=b.rMax;l=void 0===k?Infinity:k;n=b.rNewton;m=void 0===n?2:n;p=b.rTol;t=void 0===p?.05:p;v=b.lmLower;
u=void 0===v?.001:v;x=b.shrinkLower;w=void 0===x?.05:x;y=b.shrinkUpper;z=void 0===y?.95:y;B=b.grow;E=void 0===B?1.4142135623730951:B;D=b.expectGainMin;I=void 0===D?.25:D;K=b.expectGainMax;Q=void 0===K?.75:K;P=b.stuckLimit;M=void 0===P?64:P;if(0<=u){$a.next=3;break}throw Error("lsq_lm_gen(fJ, x0, opt): opt.lmLower must be within [0,1).");case 3:if(1>u){$a.next=5;break}throw Error("lsq_lm_gen(fJ, x0, opt): opt.lmLower must be within [0,1).");case 5:if(1>t){$a.next=7;break}throw Error("lsq_lm_gen(fJ, x0, opt): opt.rTol must be less than 1.");
case 7:if(0<t){$a.next=9;break}throw Error("lsq_lm_gen(fJ, x0, opt): opt.rTol must be positive number.");case 9:if(0<c){$a.next=11;break}throw Error("lsq_lm_gen(fJ, x0, opt): opt.r0 must be positive number.");case 11:if(0<=h){$a.next=13;break}throw Error("lsq_lm_gen(fJ, x0, opt): opt.rMin must be non-negative.");case 13:if(h<=l){$a.next=15;break}throw Error("lsq_lm_gen(fJ, x0, opt): opt.rMin must not be greater than opt.rMax.");case 15:if(h<=c){$a.next=17;break}throw Error("lsq_lm_gen(fJ, x0, opt): opt.r0 must not be less than opt.rMin.");
case 17:if(l>=c){$a.next=19;break}throw Error("lsq_lm_gen(fJ, x0, opt): opt.r0 must not be greater than opt.rMax.");case 19:if(1/(1+t)<m){$a.next=21;break}throw Error("lsq_lm_gen(fJ, x0, opt): opt.rGN must be greater than 1/(1+rTol).");case 21:if(0<w){$a.next=23;break}throw Error("lsq_lm_gen(fJ, x0, opt): opt.shrinkLower must be positive number.");case 23:if(w<=z){$a.next=25;break}throw Error("lsq_lm_gen(fJ, x0, opt): opt.shrinkLower must not be greater than opt.shrinkUpper.");case 25:if(1>z){$a.next=
27;break}throw Error("lsq_lm_gen(fJ, x0, opt): opt.shrinkUpper must be less than 1.");case 27:if(1<E){$a.next=29;break}throw Error("lsq_lm_gen(fJ, x0, opt): opt.grow must be number greater than 1.");case 29:if(0<I){$a.next=31;break}throw Error("lsq_lm_gen(fJ, x0, opt): opt.expectGainMin must be positive number.");case 31:if(I<Q){$a.next=33;break}throw Error("lsq_lm_gen(fJ, x0, opt): opt.expectGainMin must be less than expectGainMax.");case 33:1>Q||console.warn("lsq_lm_gen(fJ, x0, opt): opt.expectGainMax should be less than 1.");
if(0===M%1){$a.next=36;break}throw Error("lsq_lm_gen(fJ, x0, opt): opt.stuckLimit must be an integer.");case 36:if(0<=M){$a.next=38;break}throw Error("lsq_lm_gen(fJ, x0, opt): opt.stuckLimit must not be negative.");case 38:N=g.N,R=g.D,S=g.regularized_dX,U=g.G0,T=new Mb,Y=-c*g.cauchyTravel()*g.scaledNorm(U),aa=g.loss,W=0;case 40:if(0!==W){$a.next=43;break}$a.next=43;return g.report();case 43:ba=g.computeNewtonRegularized(0);ja=ea()(ba,2);ma=ja[0];sa=ja[1];if(isFinite(ma)){$a.next=46;break}throw Error("Assertion failed.");
case 46:if(qa=ma<=Y*(1+t)){$a.next=85;break}T.reset();for(pa=N;0<pa--;)ta=R[pa],Sa=U[pa],0!==ta&&(Sa/=ta),T.include(Sa);ma-=Y;if(isFinite(ma)){$a.next=53;break}throw Error("Assertion failed.");case 53:if(0<ma){$a.next=55;break}throw Error("Assertion failed.");case 55:if(0>sa){$a.next=57;break}throw Error("Assertion failed.");case 57:va=-ma/sa,Ba=T.result/Y,La=0,Va=-1;case 59:if(!(64<++Va)){$a.next=61;break}throw Error("Assertion failed.");case 61:if(0<=va){$a.next=63;break}throw Error("Assertion failed.");
case 63:if(0<=Ba){$a.next=65;break}throw Error("Assertion failed.");case 65:if(va<Ba){$a.next=67;break}throw Error("Assertion failed.");case 67:va<La&&La<Ba||(La=Math.max(u*Ba,Math.sqrt(va*Ba)));if(va<La&&La<Ba){$a.next=70;break}throw Error("Assertion failed.");case 70:fb=g.computeNewtonRegularized(La);xb=ea()(fb,2);ma=xb[0];sa=xb[1];if(isFinite(ma)){$a.next=76;break}throw Error("Assertion failed.");case 76:if(!(Math.abs(Y-ma)<=Y*t)){$a.next=78;break}return $a.abrupt("break",83);case 78:ma<Y&&(Ba=
La),va=Math.max(va,La+(Y-ma)/sa),La+=(Y-ma)/sa*(ma/Y);case 81:$a.next=59;break;case 83:if(Math.abs(g.scaledNorm(S)-Y)<=Y*t){$a.next=85;break}throw Error("Assertion failed.");case 85:if(g.scaledNorm(S)<=Y*(1+t)){$a.next=87;break}throw Error("Assertion failed.");case 87:Da=g.considerMove(S);Aa=ea()(Da,2);Ua=Aa[0];Oa=Aa[1];rb=function(){return 1};jb=aa-Ua;Bb=aa-Oa;if(!(Bb<jb*I)){$a.next=103;break}Cb=0;for(Ob=N;0<Ob--;)Cb+=S[Ob]*U[Ob];Cb*=2;Kb=Cb/(2*Cb+aa-Oa);Kb>=w||(Kb=w);Kb<=z||(Kb=z);Xb=Math.max(h*
rb(),Y*Kb);if(Xb!==Y||aa>Oa){$a.next=100;break}throw new Gc;case 100:Y=Xb;$a.next=104;break;case 103:if(qa)mb=rb(),Y=Math.max(mb*h,Math.min(mb*l,m*ma));else if(Bb>jb*Q||0===Bb)Y=Math.min(l*rb(),Math.max(mc(Y),Y*E));case 104:if(!(aa>Oa)){$a.next=110;break}aa=Oa;g.makeConsideredMove();W=0;$a.next=112;break;case 110:if(!(++W>M)){$a.next=112;break}throw new Gc("Too many unsuccessfull iterations.");case 112:$a.next=40;break;case 114:case "end":return $a.stop()}},ch)}function Ye(g,b,a,c,e){var h,k,l,n,
m,p,t,v,u,x,w,y;return Ga.a.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(a instanceof Function){z.next=2;break}throw Error("fit_lm_gen(x,y, fg, p0): fg must be a function.");case 2:g=V(g);b=V("float64",b);c=V("float64",c);k=Float64Array;if(2===g.ndim){z.next=8;break}throw Error("fit_lm_gen(x,y, fg, p0): x.ndim must be 2.");case 8:if(1===b.ndim){z.next=10;break}throw Error("fit_lm_gen(x,y, fg, p0): y.ndim must be 1.");case 10:if(1===c.ndim){z.next=12;break}throw Error("fit_lm_gen(x,y, fg, p0): p0.ndim must be 1.");
case 12:l=ea()(c.shape,1);n=l[0];m=ea()(g.shape,2);p=m[0];t=m[1];v=Int32Array.of(t);if(p==b.shape[0]){z.next=15;break}throw Error("fit_lm_gen(x,y, fg, p0): x.shape[0] must be equal to y.shape[0].");case 15:return g=na()(h=g.data).call(h),b=b.data,ab()(g.buffer),g=qb()({length:p},function(B,E){return ab()(new fa(v,g.subarray(t*E,t*E+t)))}),ab()(g),u=new k(p),x=new k(p*n),w=[new fa(Int32Array.of(p),u),new fa(Int32Array.of(p,n),x)],y=function(B){B=a(B);if(!(B instanceof Function))throw Error();for(var E=
p;0<E--;){var D=B(g[E]),I=ea()(D,2);D=I[0];I=I[1];D=V(D);I=V(I);if(0!==D.ndim)throw Error("fit_lm_gen(x,y, fg, p0): fg must have signature float[nParams] => float[nDim] => [float, float[nParams]].");if(1!==I.ndim)throw Error("fit_lm_gen(x,y, fg, p0): fg must have signature float[nParams] => float[nDim] => [float, float[nParams]].");if(I.shape[0]!==n)throw Error("fit_lm_gen(x,y, fg, p0): fg must have signature float[nParams] => float[nDim] => [float, float[nParams]].");D=D.data[0];I=I.data;if(isNaN(D))throw Error("fit_lm_gen(x,y, fg, p0): NaN encountered.");
if(Wb()(I).call(I,isNaN))throw Error("fit_lm_gen(x,y, fg, p0): NaN encountered.");u[E]=D-b[E];for(D=n;0<D--;)x[n*E+D]=I[D]}return w},z.delegateYield(Ze(y,c,e),"t0",23);case 23:case "end":return z.stop()}},dh)}function eh(g,b,a){b*=1;a*=1;if(isNaN(b))throw Error("root1d_bisect(F,a,b): a must be a number.");if(isNaN(a))throw Error("root1d_bisect(F,a,b): b must be a number.");if(!(g instanceof Function))throw Error("root1d_bisect(F,a,b): F must be a function.");var c=g(b),e=g(a);if(!(0>=$e(c)*e))throw Error("root1d_falsi(F,a,b): F(a) and F(b) must have opposite signs.");
a:for(;;){var h=b,k=c,l=a-b,n=l;do{Math.abs(k)<Math.abs(e)&&(b=a,a=h,h=b,c=e,e=k,k=c);var m=mc(Math.min(a,h)),p=Fc(Math.max(a,h));if(p<m||0===e)break a;var t=h-a;if(Math.abs(n)<Ec.a*Math.abs(a)||Math.abs(c)<=Math.abs(e))n=l=t/2;else{var v=e/c;if(b===h)b=t*v,c=1-v;else{var u=e/k;c/=k;b=v*(t*c*(c-u)-(a-b)*(u-1));c=(c-1)*(u-1)*(v-1)}0>=b?b=-b:c=-c;v=n;n=l;4*b>=3*t*c||b>=Math.abs(.5*v*c)?n=l=t/2:l=b/c}b=a;c=e;a+=l;a>=m||(a=m);a<=p||(a=p);e=g(a)}while(0>=$e(e)*k)}return a}function fh(g,b,a){b*=1;a*=1;
if(isNaN(b))throw Error("root1d_falsi(F,x1,x2): x1 must be a number.");if(isNaN(a))throw Error("root1d_falsi(F,x1,x2): x2 must be a number.");if(!(g instanceof Function))throw Error("root1d_falsi(F,x1,x2): F must be a function.");var c=g(b),e=g(a),h=c;if(0===c)return b;if(0===e)return a;if(!(0>Ib()(c)*e))throw Error("root1d_falsi(F,x1,x2): F(x1) and F(x2) must have opposite signs.");for(;;){var k=mc(Math.min(b,a)),l=Fc(Math.max(b,a));if(l<k)break;var n=(b*e-a*c)/(e-c);n>=k||(n=k);n<=l||(n=l);k=g(n);
if(0===k)return n;if(isNaN(k))throw Error("NaN encountered.");0>Ib()(e)*k?(b=a,a=n,c=e,e=k,h=c):(a=1-k/e/(1-k/c),0<a||(a=.5),c*=a,a=n,e=k)}return Math.abs(h)<=Math.abs(e)?b:a}function gh(g){var b=hh();return function(){var a=Eb()(g);if(b){var c=Eb()(this).constructor;a=gb()(a,arguments,c)}else a=a.apply(this,arguments);return Vb()(this,a)}}function hh(){if("undefined"===typeof Reflect||!gb.a||gb.a.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(gb()(Boolean,
[],function(){})),!0}catch(g){return!1}}function $d(g,b){g>>>=0;g=cd()(g,1759714724)>>>0;g=g+b>>>0;g=((g^g>>>8)>>>0)+3039394381>>>0;g=(g^g<<8)>>>0;g=cd()(g,458671337)>>>0;return(g^g>>>8)>>>0}function af(g){if(g.toString()===(g>>>0).toString())g>>>=0;else for(var b=g.toString(),a=g=0;a<b.length;a++)g=$d(b.charCodeAt(a),g);return g}function ih(g,b){var a="undefined"!==typeof Sb.a&&Tb()(g)||g["@@iterator"];if(!a){if(Ub()(g)||(a=jh(g))||b&&g&&"number"===typeof g.length){a&&(g=a);var c=0;b=function(){};
return{s:b,n:function(){return c>=g.length?{done:!0}:{done:!1,value:g[c++]}},e:function(l){throw l;},f:b}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var e=!0,h=!1,k;return{s:function(){a=a.call(g)},n:function(){var l=a.next();e=l.done;return l},e:function(l){h=!0;k=l},f:function(){try{if(!e&&null!=a["return"])a["return"]()}finally{if(h)throw k;}}}}function jh(g,b){var a;if(g){if("string"===
typeof g)return bf(g,b);var c=na()(a=Object.prototype.toString.call(g)).call(a,8,-1);"Object"===c&&g.constructor&&(c=g.constructor.name);if("Map"===c||"Set"===c)return qb()(g);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return bf(g,b)}}function bf(g,b){if(null==b||b>g.length)b=g.length;for(var a=0,c=Array(b);a<b;a++)c[a]=g[a];return c}d.r(r);d.d(r,"math",function(){return eb});d.d(r,"concat",function(){return Fa});d.d(r,"array",function(){return ia});d.d(r,"asarray",function(){return V});
d.d(r,"NDArray",function(){return fa});d.d(r,"rand_normal",function(){return we});d.d(r,"stack",function(){return Ca});d.d(r,"tabulate",function(){return Ea});d.d(r,"zip_elems",function(){return Z});d.d(r,"dt",function(){return ec});d.d(r,"geom",function(){return ae});d.d(r,"integrate",function(){return be});d.d(r,"io",function(){return Qb});d.d(r,"iter",function(){return bc});d.d(r,"la",function(){return Pa});d.d(r,"opt",function(){return nb});d.d(r,"rand",function(){return vd});d.d(r,"spatial",
function(){return ce});var ec={};d.r(ec);d.d(ec,"Complex",function(){return ub});d.d(ec,"Complex128Array",function(){return de});d.d(ec,"ARRAY_TYPES",function(){return Ka});d.d(ec,"eps",function(){return A});d.d(ec,"cast_scalar",function(){return C});d.d(ec,"_check_dtype",function(){return F});d.d(ec,"dtypeof",function(){return H});d.d(ec,"super_dtype",function(){return jd});d.d(ec,"is_subdtype",function(){return J});var ae={};d.r(ae);d.d(ae,"regular_simplex",function(){return Ia});var be={};d.r(be);
d.d(be,"odeint_rk4",function(){return wa});var Qb={};d.r(Qb);d.d(Qb,"IS_LITTLE_ENDIAN",function(){return pc});d.d(Qb,"WHITESPACES",function(){return kh});d.d(Qb,"b64_decode",function(){return vb});d.d(Qb,"b64_decode_gen",function(){return ob});d.d(Qb,"b64_encode",function(){return cb});d.d(Qb,"b64_encode_gen",function(){return kb});d.d(Qb,"istr_parse",function(){return la});d.d(Qb,"istr_stringify",function(){return ra});d.d(Qb,"istr_stringify_gen",function(){return Na});d.d(Qb,"npy_serialize",function(){return yb});
d.d(Qb,"npy_serialize_gen",function(){return tb});d.d(Qb,"npy_deserialize",function(){return Ac});var bc={};d.r(bc);d.d(bc,"argmin",function(){return Uc});d.d(bc,"argmax",function(){return kc});d.d(bc,"min",function(){return Vc});d.d(bc,"max",function(){return Ad});d.d(bc,"linspace",function(){return Kc});d.d(bc,"range",function(){return Lc});d.d(bc,"cartesian_prod",function(){return Cc});d.d(bc,"enumerate",function(){return Mc});d.d(bc,"zip",function(){return Dc});d.d(bc,"repeat",function(){return Wc});
var dd={};d.r(dd);d.d(dd,"CSCMatrix",function(){return cf});d.d(dd,"CSRMatrix",function(){return df});d.d(dd,"DOKMatrix",function(){return lh});var Pa={};d.r(Pa);d.d(Pa,"sparse",function(){return dd});d.d(Pa,"_bidiag_decomp_horiz",function(){return Fd});d.d(Pa,"bidiag_decomp",function(){return Jf});d.d(Pa,"cholesky_decomp",function(){return Pf});d.d(Pa,"cholesky_solve",function(){return Qf});d.d(Pa,"diag_mat",function(){return Rf});d.d(Pa,"diag",function(){return Sf});d.d(Pa,"det_tri",function(){return ef});
d.d(Pa,"slogdet_tri",function(){return ff});d.d(Pa,"det",function(){return mh});d.d(Pa,"slogdet",function(){return nh});d.d(Pa,"eigen",function(){return dg});d.d(Pa,"eigenvals",function(){return eg});d.d(Pa,"eigen_balance_pre",function(){return Kd});d.d(Pa,"eigen_balance_post",function(){return fg});d.d(Pa,"eye",function(){return gg});d.d(Pa,"hessenberg_decomp",function(){return oe});d.d(Pa,"ldl_decomp",function(){return hg});d.d(Pa,"ldl_solve",function(){return ig});d.d(Pa,"lstsq",function(){return ue});
d.d(Pa,"lu_decomp",function(){return ng});d.d(Pa,"lu_solve",function(){return og});d.d(Pa,"matmul2",function(){return lc});d.d(Pa,"matmul",function(){return bg});d.d(Pa,"norm",function(){return If});d.d(Pa,"permute_rows",function(){return pg});d.d(Pa,"permute_cols",function(){return qg});d.d(Pa,"unpermute_rows",function(){return rg});d.d(Pa,"unpermute_cols",function(){return sg});d.d(Pa,"pldlp_decomp",function(){return tg});d.d(Pa,"pldlp_solve",function(){return xg});d.d(Pa,"pldlp_l",function(){return ug});
d.d(Pa,"pldlp_d",function(){return vg});d.d(Pa,"pldlp_p",function(){return wg});d.d(Pa,"qr_decomp",function(){return rc});d.d(Pa,"qr_decomp_full",function(){return ne});d.d(Pa,"qr_lstsq",function(){return Tf});d.d(Pa,"rand_ortho",function(){return yg});d.d(Pa,"rank",function(){return zg});d.d(Pa,"rrqr_decomp",function(){return ze});d.d(Pa,"rrqr_decomp_full",function(){return xe});d.d(Pa,"rrqr_rank",function(){return Ag});d.d(Pa,"rrqr_lstsq",function(){return Be});d.d(Pa,"rrqr_solve",function(){return Ae});
d.d(Pa,"srrqr_decomp_full",function(){return Ce});d.d(Pa,"schur_eigenvals",function(){return pe});d.d(Pa,"schur_eigen",function(){return qe});d.d(Pa,"schur_decomp",function(){return Id});d.d(Pa,"SingularMatrixSolveError",function(){return Nd});d.d(Pa,"solve",function(){return Cg});d.d(Pa,"svd_decomp",function(){return Yc});d.d(Pa,"svd_rank",function(){return te});d.d(Pa,"svd_solve",function(){return mg});d.d(Pa,"svd_lstsq",function(){return Md});d.d(Pa,"svd_dc",function(){return Yc});d.d(Pa,"svd_jac_2sided",
function(){return Qd});d.d(Pa,"svd_jac_2sided_blocked",function(){return Rd});d.d(Pa,"svd_jac_classic",function(){return Sd});d.d(Pa,"tril",function(){return Kf});d.d(Pa,"triu",function(){return Lf});d.d(Pa,"tril_solve",function(){return Mf});d.d(Pa,"triu_solve",function(){return Nf});d.d(Pa,"urv_decomp_full",function(){return Dg});d.d(Pa,"urv_lstsq",function(){return Eg});var tc={};d.r(tc);d.d(tc,"LineSearchError",function(){return ac});d.d(tc,"LineSearchNoProgressError",function(){return Lb});d.d(tc,
"LineSearchBisectionError",function(){return zc});d.d(tc,"LineSearchBoundReachedError",function(){return Sc});d.d(tc,"more_thuente_abc",function(){return td});d.d(tc,"more_thuente_u123",function(){return Yd});d.d(tc,"strong_wolfe",function(){return gf});var nc={};d.r(nc);d.d(nc,"beale",function(){return fc});d.d(nc,"brown_badscale",function(){return gc});d.d(nc,"freudenstein_roth",function(){return hc});d.d(nc,"helical_valley",function(){return ic});d.d(nc,"JennrichSampson",function(){return oh});
d.d(nc,"powell_badscale",function(){return cc});d.d(nc,"Rastrigin",function(){return ph});d.d(nc,"Rosenbrock",function(){return qh});var nb={};d.r(nb);d.d(nb,"line_search",function(){return tc});d.d(nb,"test_fn",function(){return nc});d.d(nb,"min_dogleg_gen",function(){return Rg});d.d(nb,"lsq_dogleg_gen",function(){return Qe});d.d(nb,"tls_dogleg_gen",function(){return rh});d.d(nb,"odr_dogleg_gen",function(){return sh});d.d(nb,"fit_dogleg_gen",function(){return Pe});d.d(nb,"fit_lin",function(){return Vg});
d.d(nb,"min1d_gss",function(){return Wg});d.d(nb,"min_lbfgs_gen",function(){return Se});d.d(nb,"lsq_lbfgs_gen",function(){return Xd});d.d(nb,"fit_lbfgs_gen",function(){return Ue});d.d(nb,"min_lbfgsb_gen",function(){return We});d.d(nb,"LineSearchError",function(){return ac});d.d(nb,"LineSearchNoProgressError",function(){return Lb});d.d(nb,"LineSearchBisectionError",function(){return zc});d.d(nb,"LineSearchBoundReachedError",function(){return Sc});d.d(nb,"more_thuente_abc",function(){return td});d.d(nb,
"more_thuente_u123",function(){return Yd});d.d(nb,"strong_wolfe",function(){return gf});d.d(nb,"lsq_lm_gen",function(){return Ze});d.d(nb,"tls_lm_gen",function(){return th});d.d(nb,"odr_lm_gen",function(){return uh});d.d(nb,"fit_lm_gen",function(){return Ye});d.d(nb,"num_grad",function(){return vh});d.d(nb,"num_grad_forward",function(){return wh});d.d(nb,"OptimizationError",function(){return hf});d.d(nb,"OptimizationNoProgressError",function(){return Gc});d.d(nb,"root1d_bisect",function(){return Vd});
d.d(nb,"root1d_brent",function(){return eh});d.d(nb,"root1d_illinois",function(){return fh});var vd={};d.r(vd);d.d(vd,"AleaRNG",function(){return Jd});d.d(vd,"squirrel3",function(){return Tc});var ce={};d.r(ce);d.d(ce,"KDTree",function(){return xh});var yh=d(49),Ec=d.n(yh),zh=d(106),he=d.n(zh),Ah=d(180),uf=d.n(Ah),Bh=d(4),Ya=d.n(Bh),Ch=d(9),sb=d.n(Ch),Dh=d(12),Ab=d.n(Dh),Eh=d(8),ab=d.n(Eh),Fh=d(32),Nb=d.n(Fh),Gh=d(5),Wa=d.n(Gh),Hh=d(60),wd=d.n(Hh),eb={nextUp:function(g){var b=Ec.a,a=Number.MIN_VALUE;
b=g*(0>g?1-b/2:1+b);if(!isFinite(g))throw Error("Assertion failed!");if(!isFinite(b))throw Error("Assertion failed!");b===g&&(b+=a);a=g+(b-g)/2;g<a&&a<b&&(b=a);a=(b+g)/2;g<a&&a<b&&(b=a);return 0===b?-0:b},add:function(g,b){return g instanceof ub?g.add(b):b instanceof ub?b.add(g):g+b},sub:function(g,b){return g instanceof ub?g.sub(b):b instanceof ub?(new ub(g)).sub(b):g-b},mul:function(g,b){return g instanceof ub?g.mul(b):b instanceof ub?b.mul(g):g*b},div:function(g,b){return g instanceof ub?g.div(b):
b instanceof ub?(new ub(g)).div(b):g/b},zero:function(g){return eb.cast(0,g)},one:function(g){return eb.cast(1,g)},cast:function(g,b){switch(b){case "float32":return he()(g);case "float64":return Number(g);case "int32":return g|0;case "complex128":return new ub(g);default:throw Error("nd.math.cast(x,dtype): invalid dtype.");}},neg:function(g){return g instanceof ub?g.neg():-g},abs:function(g){return g instanceof ub?g.abs():Math.abs(g)},sqrt:function(g){return g instanceof ub?g.sqrt():0<=g?Math.sqrt(g):
(new ub(g)).sqrt()},exp:function(g){return g instanceof ub?g.exp():Math.exp(g)},min:function(g,b){return Math.min(g,b)},max:function(g,b){return Math.max(g,b)},hypot:function(g,b){return Nb()(g,b)},atan2:function(g,b){return Math.atan2(g,b)},conj:function(g){return g instanceof ub?g.conj():g},is_equal:function(g,b){return g instanceof ub?g.equals(b):b instanceof ub?b.equals(g):g==b},is_close:function(g,b){var a=1E-8+1E-5*eb.max(eb.abs(g),eb.abs(b));return eb.abs(eb.sub(g,b))<=a}},Fb=eb,ub=function(g){function b(a,
c){sb()(this,b);null==a&&(a=0);null==c&&(c=0);if(null!=a.re||null!=a.im)c=a.im||0,a=a.re||0;this.re=1*a;this.im=1*c;if(isNaN(a))throw Error("Real value is NaN.");if(isNaN(c))throw Error("Imaginary value is NaN.");ab()(this)}Ab()(b,[{key:"add",value:function(a,c){null==a&&(a=0);null==c&&(c=0);if(null!=a.re||null!=a.im)c=a.im||0,a=a.re||0;return new b(this.re+a,this.im+c)}},{key:"sub",value:function(a,c){null==a&&(a=0);null==c&&(c=0);if(null!=a.re||null!=a.im)c=a.im||0,a=a.re||0;return new b(this.re-
a,this.im-c)}},{key:"mul",value:function(a,c){null==a&&(a=0);null==c&&(c=0);if(null!=a.re||null!=a.im)c=a.im||0,a=a.re||0;return new b(this.re*a-this.im*c,this.re*c+this.im*a)}},{key:"div",value:function(a,c){null==a&&(a=0);null==c&&(c=0);if(null!=a.re||null!=a.im)c=a.im||0,a=a.re||0;if(0==c)return new b(this.re/a,this.im/a);if(Math.abs(a)>=Math.abs(c)){var e=c/a;return new b((this.re+this.im*e)/(a+c*e),(this.im-this.re*e)/(a+c*e))}e=a/c;return new b((this.re*e+this.im)/(a*e+c),(this.im*e-this.re)/
(a*e+c))}},{key:"equals",value:function(a,c){null==a&&(a=0);null==c&&(c=0);if(null!=a.re||null!=a.im)c=a.im||0,a=a.re||0;return this.re==a&&this.im==c}},{key:"abs",value:function(){return Nb()(this.re,this.im)}},{key:"arg",value:function(){return Math.atan2(this.im,this.re)}},{key:"conj",value:function(){return new b(this.re,-this.im)}},{key:"toFixed",value:function(a){return new b(this.re.toFixed(a),this.im.toFixed(a))}},{key:"sqrt",value:function(){var a=this.abs();return new b(Fb.sqrt(Fb.mul(Fb.add(a,
this.re),.5)),Fb.sqrt(Fb.mul(Fb.sub(a,this.re),.5)))}},{key:g,value:function(){return this.toString()}},{key:"toString",value:function(){var a,c;return 0==this.im?this.re.toString():0==this.re?"".concat(this.im,"j"):0>this.im?Wa()(a="".concat(this.re," - ")).call(a,-this.im,"j"):Wa()(c="".concat(this.re," + ")).call(c,this.im,"j")}},{key:"valueOf",value:function(){return 0==this.im?this.re:this}}]);return b}(wd()("nodejs.util.inspect.custom")),Ih=d(6),Za=d.n(Ih),Jh=d(68),id=d.n(Jh),Kh=d(2),Ga=d.n(Kh),
Lh=d(30),jc=d.n(Lh),Mh=d(40),oc=d.n(Mh),Nh=d(1),na=d.n(Nh),Oh=d(10),qb=d.n(Oh),Ph=d(72),ee=d.n(Ph),Qh=d(181),Rh=d.n(Qh),de=function(g){var b={get:function(a,c){return"symbol"!==id()(c)&&0===c%1?a.get(c):a[c]},set:function(a,c,e){if("symbol"!==id()(c)&&0===c%1)return a.set(c,e),!0;a[c]=e;return!0}};return function(a,c,e){function h(k,l,n){sb()(this,h);0===k%1?this._array=new g(2*k):(null!=n&&(n*=2),this._array=new g(k,l,n));jc()(this);return new Proxy(this,b)}Ab()(h,[{key:"buffer",get:function(){return this._array.buffer}},
{key:"byteOffset",get:function(){return this._array.byteOffset}},{key:"byteLength",get:function(){return this._array.byteLength}},{key:"length",get:function(){return this._array.length>>>1}},{key:a,value:Ga.a.mark(function l(){var n;return Ga.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:n=0;case 1:if(!(n<this.length)){m.next=7;break}m.next=4;return this[n];case 4:n++;m.next=1;break;case 7:case "end":return m.stop()}},l,this)})},{key:"keys",value:Ga.a.mark(function n(){var m;return Ga.a.wrap(function(p){for(;;)switch(p.prev=
p.next){case 0:m=0;case 1:if(!(m<this.length)){p.next=7;break}p.next=4;return m;case 4:m++;p.next=1;break;case 7:case "end":return p.stop()}},n,this)})},{key:"values",value:Ga.a.mark(function m(){return Ga.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.delegateYield(oc()(this),"t0",1);case 1:case "end":return p.stop()}},m,this)})},{key:"entries",value:Ga.a.mark(function p(){var t;return Ga.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:t=0;case 1:if(!(t<this.length)){v.next=
7;break}v.next=4;return[t,this[t]];case 4:t++;v.next=1;break;case 7:case "end":return v.stop()}},p,this)})},{key:"forEach",value:function(p,t){for(var v=0;v<source.length;v++)p.call(t,source[v],v)}},{key:"map",value:function(p,t){return h.from(this,p,t)}},{key:"reduce",value:function(p,t){var v=0;if(null==t){if(0==this.length)throw new TypeError("TypeError: Reduce of empty array with no initial value.");t=this[v++]}for(;v<this.length;v++)t=p(t,this[v],v,this);return t}},{key:"slice",value:function(p,
t){var v;null!=p&&(p*=2);null!=t&&(t*=2);return new h(na()(v=this._array).call(v,p,t).buffer)}},{key:"subarray",value:function(p,t){null!=p&&(p*=2);null!=t&&(t*=2);p=this._array.subarray(p,t);return new h(p.buffer,p.byteOffset,p.length/2)}},{key:"join",value:function(p){null==p&&(p=", ");for(var t="",v=0;v<this.length;v++)0<v&&(t+=p),t+=this[v].toString();return t}},{key:"fill",value:function(p,t,v){p instanceof ub||(p=new ub(p));for(t=this._array.length;0<=(t-=2);)this._array[t+1]=p.im,this._array[t+
0]=p.re;return this}},{key:"get",value:function(p){return new ub(this._array[2*p],this._array[2*p+1])}},{key:"set",value:function(p,t){p*=2;"number"!==typeof t&&isNaN(t)?("re"in t&&"im"in t||(t=new ub(t)),this._array[p+0]=t.re,this._array[p+1]=t.im):(this._array[p+0]=t,this._array[p+1]=isNaN(t)?NaN:0)}},{key:c,get:function(){throw Error("not yet implemented.");}},{key:e,value:function(p){return"Complex128Array "+d(285).inspect(qb()(this),p)}},{key:"toString",value:function(p){return this.join(",")}}],
[{key:"BYTES_PER_ELEMENT",get:function(){return 2*g.BYTES_PER_ELEMENT}},{key:"name",get:function(){return"Complex".concat(8*h.BYTES_PER_ELEMENT,"Array")}},{key:"from",value:function(p,t,v){Object.prototype.hasOwnProperty.call(p,"length")||(p=Za()(p));if(null==t){if(p instanceof h)return new h(g.from(p._array).buffer,0,p.length);if(p instanceof Int32Array||p instanceof Float32Array||p instanceof Float64Array){t=new g(2*p.length);for(v=p.length;0<v--;)t[v<<1]=p[v];return new h(t.buffer,0,p.length)}}var u=
new h(p.length);t=t||function(w){return w};for(var x=0;x<p.length;x++)u[x]=t.call(v,p[x],x);return u}},{key:"of",value:function(){for(var p=new h(arguments.length),t=0;t<arguments.length;t++)p[t]=0>t||arguments.length<=t?void 0:arguments[t];return p}}]);return h}(ee.a,Rh.a,wd()("nodejs.util.inspect.custom"))}(Float64Array),Ka={int32:Int32Array,float32:Float32Array,float64:Float64Array,complex128:de,object:Array},jd=function(){for(var g=arguments.length,b=Array(g),a=0;a<g;a++)b[a]=arguments[a];return Ya()(b).call(b,
function(c,e){F(c);F(e);return"object"===c||"object"===e?"object":"complex128"===c||"complex128"===e?"complex128":"float64"===c||"float64"===e?"float64":"float32"===c||"float32"===e?"float32":"int32"})},Sh=d(24),dc=d.n(Sh),Th=d(17),Hb=d.n(Th),Uh=d(11),gb=d.n(Uh),Vh=d(21),Sb=d.n(Vh),Wh=d(16),Tb=d.n(Wh),Xh=d(22),Ub=d.n(Xh),Yh=d(0),ea=d.n(Yh),Zh=d(25),Yb=d.n(Zh),$h=d(26),Vb=d.n($h),ai=d(18),Eb=d.n(ai),bi=d(43),Hc=d.n(bi),ci=d(15),Jb=d.n(ci),di=d(31),Wb=d.n(di),ei=d(44),Ic=d.n(ei),fi=d(182),gi=d.n(fi),
hi=d(183),ii=d.n(hi),ji=d(87),fe=d.n(ji),ki=d(107),He=d.n(ki),li=d(184),mi=d.n(li),ni=d(14),Ib=d.n(ni),oi=d(73),Dd=d.n(oi),pi=d(3),Ja=d.n(pi),fa=function(g,b,a){function c(e,h){var k;sb()(this,c);if(!(e instanceof Int32Array))throw Error("Shape must be Int32Array.");if(Wb()(e).call(e,function(l){return 1>l}))throw Error("Invalid shape: ".concat(e,"."));if(h.length!=Ya()(e).call(e,function(l,n){return l*n},1))throw Error(Wa()(k="Shape [".concat(e,"] does not match array length of ")).call(k,h.length,
"."));k=function n(){for(var m=arguments.length,p=Array(m),t=0;t<m;t++)p[t]=arguments[t];return n.data[n._flat_idx(p)]};Ic()(k,c.prototype);ab()(e.buffer);k.shape=e;k.data=h;jc()(k);return Vb()(void 0,k)}Yb()(c,g);xa(c);Ab()(c,[{key:"ndim",get:function(){return this.shape.length}},{key:"dtype",get:function(){for(var e=0,h=gi()(Ka);e<h.length;e++){var k=ea()(h[e],2),l=k[0];if(this.data instanceof k[1])return l}throw Error("Data type could not determined.");}},{key:"set",value:function(e,h){this.data[this._flat_idx(e)]=
h}},{key:"modify",value:function(e,h){var k,l=this._flat_idx(e);this.data[l]=h.apply(void 0,Wa()(k=[this.data[l]]).call(k,Za()(e)))}},{key:"_flat_idx",value:function(e){var h,k=this.shape;if(e.length!=k.length)throw Error(Wa()(h="Multi-index [".concat(e,"] does not have expected length of ")).call(h,k.length,"."));h=0;for(var l=1,n=k.length;0<n--;l*=k[n]){var m,p=e[n];if(0!=p%1)throw Error("Multi-index [".concat(e,"] contains non-integer entries."));0>p&&(p+=k[n]);if(0>p||p>=k[n])throw Error(Wa()(m=
"Multi-index [".concat(e,"] out of bounds [")).call(m,k,"]."));h+=p*l}return h}},{key:b,value:function(e,h){return this.toString()}},{key:"toString",value:function(){function e(y,z){var B,E,D,I,K,Q,P;return Ga.a.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:B=n(y,p);E=B>>>1;D=B-E;if(p.length!==y){M.next=16;break}I=t[z];M.t0=I;M.next=null===M.t0?6:void 0===M.t0?9:12;break;case 6:return M.next=8,"null";case 8:return M.abrupt("break",14);case 9:return M.next=11,"undefined";case 11:return M.abrupt("break",
14);case 12:return M.next=14,I.toString();case 14:M.next=37;break;case 16:if(!(p[y]>B+1)){M.next=31;break}K=0;case 18:if(!(K<D)){M.next=23;break}return M.delegateYield(e(y+1,z+K*v[y]),"t1",20);case 20:K++;M.next=18;break;case 23:Q=p[y]-E;case 24:if(!(Q<p[y])){M.next=29;break}return M.delegateYield(e(y+1,z+Q*v[y]),"t2",26);case 26:Q++;M.next=24;break;case 29:M.next=37;break;case 31:P=0;case 32:if(!(P<p[y])){M.next=37;break}return M.delegateYield(e(y+1,z+P*v[y]),"t3",34);case 34:P++;M.next=32;break;
case 37:case "end":return M.stop()}},k)}function h(y,z,B){var E,D,I,K,Q,P,M,N,R;return Ga.a.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(p.length!==z){S.next=4;break}S.next=3;return e[w++];case 3:return S.abrupt("return");case 4:return y+=" ",E="[ ",D=", ",I=" ]",z<p.length-1&&(D=",\n"+y,E="[",I="]"),S.next=9,E;case 9:K=n(z,p);Q=K>>>1;P=K-Q;if(!(p[z]>K+1)){S.next=31;break}M=0;case 12:if(!(M<P)){S.next=19;break}return S.delegateYield(h(y,z+1,B+M*v[z]),"t0",14);case 14:return S.next=16,D;
case 16:M++;S.next=12;break;case 19:return S.next=21,"...".concat(p[z]-K," more...");case 21:N=p[z]-Q;case 22:if(!(N<p[z])){S.next=29;break}S.next=25;return D;case 25:return S.delegateYield(h(y,z+1,B+N*v[z]),"t1",26);case 26:N++;S.next=22;break;case 29:S.next=40;break;case 31:R=0;case 32:if(!(R<p[z])){S.next=40;break}if(!(0<R)){S.next=36;break}S.next=36;return D;case 36:return S.delegateYield(h(y,z+1,B+R*v[z]),"t2",37);case 37:R++;S.next=32;break;case 40:return S.next=42,I;case 42:case "end":return S.stop()}},
l)}var k=Ga.a.mark(e),l=Ga.a.mark(h),n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(y,z){return 6};if(!(n instanceof Function)){var m=1*n;n=function(){return m}}var p=this.shape,t=this.data,v=new Int32Array(p.length);v[v.length-1]=1;for(var u=v.length;0<--u;)v[u-1]=v[u]*p[u];e=Za()(e(0,0));if(1<this.ndim){var x=Ya()(e).call(e,function(y,z){return Math.max(y,z.length)},0);e=dc()(e).call(e,function(y){return ii()(y).call(y,x)})}var w=0;return Za()(h("",0,0)).join("")}},{key:"toNestedArray",
value:function(){var e=this.data,h=this.shape,k=0;return function m(n){return n===h.length?e[k++]:qb()({length:h[n]},function(){return m(n+1)})}(0)}},{key:a,value:Ga.a.mark(function h(){var k,l,n,m,p;return Ga.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:l=na()(k=this.shape).call(k,1),n=Ya()(l).call(l,function(v,u){return v*u},1),m=0;case 2:if(!(m<this.data.length)){t.next=7;break}t.next=5;return new c(l,na()(p=this.data).call(p,m,m+=n));case 5:t.next=2;break;case 7:case "end":return t.stop()}},
h,this)})},{key:"forEach",value:function(h){var k,l=this.shape[0],n=na()(k=this.shape).call(k,1);k=Ya()(n).call(n,function(v,u){return v*u},1);for(var m=0,p=0;m<l;m++,p+=k){var t;h(new c(n,na()(t=this.data).call(t,p,p+k)),m)}}},{key:"elems",value:Ga.a.mark(function(){var h,k,l,n,m,p;return Ga.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return p=function(v){return Ga.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(v!==k.length){u.next=5;break}u.next=3;return[na()(n).call(n),l[m++]];
case 3:u.next=11;break;case 5:n[v]=0;case 6:if(!(n[v]<k[v])){u.next=11;break}return u.delegateYield(p(v+1),"t0",8);case 8:n[v]++;u.next=6;break;case 11:case "end":return u.stop()}},h)},h=Ga.a.mark(p),k=this.shape,l=this.data,n=new Int32Array(k.length),m=0,t.delegateYield(p(0),"t0",5);case 5:case "end":return t.stop()}},p,this)})},{key:"forElems",value:function(h){function k(t){var v;if(t===l.length)h.apply(void 0,Wa()(v=[n[p++]]).call(v,Za()(m)));else for(m[t]=0;m[t]<l[t];m[t]++)k(t+1)}var l=this.shape,
n=this.data,m=new Int32Array(l.length),p=0;k(0)}},{key:"valueOf",value:function(){return 0===this.shape.length?this.data[0]:this}},{key:"mapElems",value:function(h,k){if(null==k){var l;if(null==h)return new c(this.shape,na()(l=this.data).call(l));h instanceof Function&&(k=h,h=void 0)}null==k&&(k=function(n){return n});return Z([this],h,k)}},{key:"T",get:function(){return 0==this.ndim?this.sliceElems():1==this.ndim?this.sliceElems([],"new"):this.transpose()}},{key:"H",get:function(){var h=this.T;return"object"!=
this.dtype&&"complex128"!=this.dtype?h:h.mapElems(math.conj)}},{key:"transpose",value:function(){function h(z,B){if(p>z)for(var E=m[z];0<E--;B-=t[z])h(z+1,B);else w[--y]=x[B]}for(var k=arguments.length,l=Array(k),n=0;n<k;n++)l[n]=arguments[n];l=Za()(l);var m=Int32Array.from(this.shape),p=m.length,t=new Int32Array(p);0<p&&(t[p-1]=1);for(k=p;0<--k;)t[k-1]=m[k]*t[k];if(0==l.length){if(1>=p)return this.sliceElems();m[p-2]=this.shape[p-1];m[p-1]=this.shape[p-2];l=t[p-2];t[p-2]=t[p-1];t[p-1]=l}else{k=new fe.a(l);
n=t;t=new Int32Array(p);if(k.size!=l.length)throw Error("Duplicate axes are not allowed.");for(var v=l.length;0<v--;){var u=l[v];if(0>u||u>=p)throw Error("Axis out of bounds.");m[v]=this.shape[u];t[v]=n[u]}l=0;for(v=k.size;l<p;l++)k.has(l)||(m[v]=this.shape[l],t[v++]=n[l])}var x=this.data,w=new x.__proto__.constructor(x.length),y=x.length;h(0,y-1);return new c(m,w)}},{key:"reshape",value:function(){for(var h=arguments.length,k=Array(h),l=0;l<h;l++)k[l]=arguments[l];k=Int32Array.from(k);h=this.data.length;
l=1;for(var n=-1,m=k.length;0<=--m;)if(0>k[m]){if(-1!==k[m])throw Error("Invalid dimension: "+k[m]);if(-1!==n)throw Error("At most on dimension may be -1.");n=m}else l*=k[m];if(-1!==n){if(0!==h%l)throw Error("Shape cannot be inferred.");k[n]=h/l}return new c(k,this.data)}},{key:"reduceElems",value:function(h,k,l){function n(z,B){if(v.length===z)u[w]=B?l(x[y++],u[w]):x[y++],++w;else if(h.has(z))for(var E=w,D=v[z];0<D--;B=!0)w=E,n(z+1,B);else for(E=v[z];0<E--;)n(z+1,B)}if(null==l){var m,p;if(null==
k)return Ya()(m=this.data).call(m,h);if("string"===typeof h)return Ya()(p=this.data).call(p,k);l=k;k=void 0}null==k&&(k="object");if(!J(this.dtype,k))throw Error("New dtype must be a super-dtype.");var t=this.ndim;"number"===typeof h&&(h=[h]);if(h instanceof c){if(!J(h.dtype,"int32"))throw Error("Invalid dtype ".concat(h.dtype," for axes."));if(1===h.ndim)h=h.data;else throw Error("Only 1D nd.Array allowed for axes.");}h=new fe.a(Ga.a.mark(function B(){var E,D,I;return Ga.a.wrap(function(K){for(;;)switch(K.prev=
K.next){case 0:E=ka(h),K.prev=1,E.s();case 3:if((D=E.n()).done){K.next=12;break}I=D.value;0>I&&(I+=t);if(!(0>I||I>=t)){K.next=8;break}throw Error("Reduction axis "+I+" out of bounds.");case 8:return K.next=10,+I;case 10:K.next=3;break;case 12:K.next=17;break;case 14:K.prev=14,K.t0=K["catch"](1),E.e(K.t0);case 17:return K.prev=17,E.f(),K.finish(17);case 20:case "end":return K.stop()}},B,null,[[1,14,17,20]])})());var v=this.shape;m=He()(v).call(v,function(B,E){return!h.has(E)});var u=new Ka[k](Ya()(m).call(m,
function(B,E){return B*E},1)),x=this.data,w=0,y=0;n(0,!1);if(w!=u.length)throw Error([w,u.length]);if(y!=this.data.length)throw Error([y,this.data.length]);return new c(m,u)}},{key:"sliceElems",value:function(){function h(I,K){if(0===I)E[D++]=B[K];else for(var Q=z[--I];0<Q--;K+=y[I])h(I,K)}for(var k=arguments.length,l=Array(k),n=0;n<k;n++)l[n]=arguments[n];for(var m=this.ndim,p=this.shape,t=n=k=0,v=0,u=0;u<l.length;u++){var x=l[u];if("..."===x)++k;else if("new"===x)++n;else if("number"===typeof x){if(0!=
x%1)throw Error("Only integral indices allowed.");++t}else{x=x.length;if("number"!==typeof x||0!=x%1||3<x||1==x)throw Error("Illegal argument(s).");++v}}if(1<k)throw Error("Highlander! There can be only one ... (ellipsis).");0==k&&l.push("...");if(t+v>m)throw Error("Cannot sliced more dimensions than available.");var w=0,y=[],z=Int32Array.from(Ga.a.mark(function K(){var Q,P,M,N,R,S,U,T,Y,aa,W,ba,ja;return Ga.a.wrap(function(ma){for(;;)switch(ma.prev=ma.next){case 0:Q=m,P=1,M=l.length;case 2:if(!(0<=
--M)){ma.next=54;break}N=l[M];ma.t0=N;ma.next="new"===ma.t0?7:"..."===ma.t0?11:21;break;case 7:return y.push(0),ma.next=10,1;case 10:return ma.abrupt("break",52);case 11:R=t+v;case 12:if(!(R<m)){ma.next=20;break}y.push(P);P*=p[--Q];ma.next=17;return p[Q];case 17:R++;ma.next=12;break;case 20:return ma.abrupt("break",52);case 21:--Q;if("number"!==typeof N){ma.next=29;break}0>N&&(N+=p[Q]);if(!(0>N||N>=p[Q])){ma.next=26;break}throw Error("Index out of bounds.");case 26:w+=P*N;ma.next=51;break;case 29:S=
N;U=ea()(S,3);T=U[0];Y=void 0===T?void 0:T;aa=U[1];W=void 0===aa?void 0:aa;ba=U[2];ja=void 0===ba?1:ba;0>W&&(W+=p[Q]);0>Y&&(Y+=p[Q]);if(!(0>Y||Y>=p[Q])){ma.next=34;break}throw Error("Slice start out of bounds.");case 34:if(0!=ja){ma.next=36;break}throw Error("Stride/step cannot be zero.");case 36:if(!(0>ja)){ma.next=43;break}null==Y&&(Y=p[Q]-1);null==W&&(W=-1);if(!(-1>W||W>=p[Q])){ma.next=41;break}throw Error("Slice end out of bounds.");case 41:ma.next=47;break;case 43:null==Y&&(Y=0);null==W&&(W=
p[Q]);if(!(0>W||W>p[Q])){ma.next=47;break}throw Error("Slice end out of bounds.");case 47:return y.push(P*ja),w+=P*Y,ma.next=51,1+mi()((-Ib()(ja)+W-Y)/ja);case 51:P*=p[Q];case 52:ma.next=2;break;case 54:case "end":return ma.stop()}},K)})()),B=this.data,E=new Ka[this.dtype](Ya()(z).call(z,function(K,Q){return K*Q},1)),D=0;h(z.length,w);Dd()(z).call(z);return new c(z,E)}}],[{key:"name",get:function(){return"nd.Array"}}]);return c}(Hc()(Function),wd()("nodejs.util.inspect.custom"),ee.a),jf=!0,we=function(){var g=
NaN;return function(){jf&&(jf=!1,console.warn(Error("nd.rand_normal is deprecated, use nd.rand.AleaRNG instead.")));if(!isNaN(g)){var b=g;g=NaN;return b}do{b=2*Math.random()-1;var a=2*Math.random()-1;var c=b*b+a*a}while(1<c||0==c);c=Math.sqrt(-2*Math.log(c)/c);g=c*b;return c*a}}(),vf=Ga.a.mark(ob),wf=Ga.a.mark(kb),kd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Cd=Int32Array.from({length:256},function(){return-2});if(64!==kd.length)throw Error("Assertion failed.");for(var ge=
kd.length;0<ge--;)Cd[kd.charCodeAt(ge)]=ge;for(var kf=6;0<kf--;)Cd["\f\n\r\t\v ".charCodeAt(kf)]=-1;var qi=d(185),xf=d.n(qi),yf=Ga.a.mark(Na),ri=d(90),md=d.n(ri),si=d(88),Ed=d.n(si),zf=Ga.a.mark(tb),ld="\u0093NUMPY",pc=1===(new Int16Array(Uint8Array.of(1,0).buffer))[0],kh="\f\n\r\t\v ",ti=d(127),ie=d.n(ti),Af=Ga.a.mark(Kc),Bf=Ga.a.mark(Lc),Cf=Ga.a.mark(Cc),Df=Ga.a.mark(Mc),Ef=Ga.a.mark(Dc),Ff=Ga.a.mark(Wc),ui=d(23),Pb=d.n(ui),vi=d(52),Qc=d.n(vi),df=function(){function g(){sb()(this,g);throw Error("new CSRMatrix(): Constructor private, use CSRMatrix.fromEntries(...) instead.");
}Ab()(g,[{key:"ndim",get:function(){return 2}},{key:"data",get:function(){throw Error("CSRMatrix::data: Sparse array data cannot be accessed directly.");}},{key:"dtype",get:function(){return"float64"}},{key:"nnz",get:function(){var b=this._offR;return b[b.length-1]}},{key:"T",get:function(){var b=ea()(this.shape,2),a=this._offR,c=this._offC,e=this._vals;b=Int32Array.of(b[1],b[0]);a=na()(a).call(a);c=na()(c).call(c);e=na()(e).call(e);ab()(b.buffer);ab()(a.buffer);ab()(c.buffer);ab()(e.buffer);return cf._fromRawData(b,
c,a,e)}},{key:"_compute_Av",value:function(b,a){var c=ea()(this.shape,2),e=c[0],h=c[1];c=this._offR;var k=this._offC,l=this._vals;if(0!==a.length%1)throw Error("Assertion failed.");if(0!==b.length%1)throw Error("Assertion failed.");if(!(a.length>=e))throw Error("Assertion failed.");if(!(b.length>=h))throw Error("Assertion failed.");for(h=0;h<e;h++)for(var n=c[h+1],m=c[h];m<n;m++)a[h]+=l[m]*b[k[m]]}},{key:"_compute_vA",value:function(b,a){var c=ea()(this.shape,2),e=c[0],h=c[1];c=this._offR;var k=this._offC,
l=this._vals;if(0!==b.length%1)throw Error("Assertion failed.");if(0!==a.length%1)throw Error("Assertion failed.");if(!(b.length>=e))throw Error("Assertion failed.");if(!(a.length>=h))throw Error("Assertion failed.");for(h=0;h<e;h++)for(var n=c[h+1],m=c[h];m<n;m++)a[k[m]]+=b[h]*l[m]}}],[{key:"_fromRawData",value:function(b,a,c,e){var h=function m(l,n){var p=ea()(m.shape,2),t=p[0];p=p[1];var v=m._offR,u=m._offC,x=m._vals;l*=1;n*=1;if(0!==l%1)throw Error("CSRMatrix(i,j): i must be a valid integer.");
if(0!==n%1)throw Error("CSRMatrix(i,j): j must be a valid integer.");if(!(0<=l))throw Error("CSRMatrix(i,j): i must be non-negative.");if(!(0<=n))throw Error("CSRMatrix(i,j): j must be non-negative.");if(!(l<t))throw Error("CSRMatrix(i,j): i out of bounds.");if(!(n<p))throw Error("CSRMatrix(i,j): j out of bounds.");l=Nc(v[l],v[l+1],function(w){return u[w]-n});return 0>l?0:x[l]};Pb()(h,{shape:b,_offR:a,_offC:c,_vals:e});Ic()(h,g.prototype);return h}},{key:"fromElems",value:function(b,a,c){b*=1;if(!(0<
b)||0!==b%1)throw Error("CSRMatrix.fromElems(M,N, ijv): M must be a positive integer.");a*=1;if(!(0<a)||0!==a%1)throw Error("CSRMatrix.fromElems(M,N, ijv): N must be a positive integer.");var e=qb()({length:b},function(){return[]});c=uc(c);var h;try{for(c.s();!(h=c.n()).done;){var k=h.value;e[k[0]].push(k)}}catch(w){c.e(w)}finally{c.f()}h=uc(e);var l;try{for(h.s();!(l=h.n()).done;){var n=l.value;Qc()(n).call(n,function(w,y){return w[1]-y[1]});for(c=k=0;c<n.length;c++)if(c+1===n.length||n[c][1]!==
n[c+1][1])n[k++]=n[c];for(var m=n.length;m-- >k;)n.pop()}}catch(w){h.e(w)}finally{h.f()}l=new Int32Array(b+1);for(m=n=0;;m++){l[m]=n;if(m===b)break;n+=e[m].length}n=new Int32Array(l[b]);m=new Float64Array(l[b]);h=0;e=uc(e);var p;try{for(e.s();!(p=e.n()).done;){var t=uc(p.value),v;try{for(t.s();!(v=t.n()).done;){var u=ea()(v.value,3),x=u[2];n[h]=u[1];m[h]=x;++h}}catch(w){t.e(w)}finally{t.f()}}}catch(w){e.e(w)}finally{e.f()}b=Int32Array.of(b,a);ab()(b.buffer);ab()(l.buffer);ab()(n.buffer);ab()(m.buffer);
return g._fromRawData(b,l,n,m)}}]);return g}(),cf=function(){function g(){sb()(this,g);throw Error("new CSCMatrix(): Constructor private, use CSCMatrix.fromEntries(...) instead.");}Ab()(g,[{key:"ndim",get:function(){return 2}},{key:"data",get:function(){throw Error("CSCMatrix::data: Sparse array data cannot be accessed directly.");}},{key:"dtype",get:function(){return"float64"}},{key:"nnz",get:function(){var b=this._offC;return b[b.length-1]}},{key:"T",get:function(){var b=ea()(this.shape,2),a=this._offR,
c=this._offC,e=this._vals;b=Int32Array.of(b[1],b[0]);a=na()(a).call(a);c=na()(c).call(c);e=na()(e).call(e);ab()(b.buffer);ab()(a.buffer);ab()(c.buffer);ab()(e.buffer);return df._fromRawData(b,c,a,e)}},{key:"_compute_Av",value:function(b,a){var c=ea()(this.shape,2),e=c[0];c=c[1];var h=this._offR,k=this._offC,l=this._vals;if(0!==a.length%1)throw Error("Assertion failed.");if(0!==b.length%1)throw Error("Assertion failed.");if(!(a.length>=e))throw Error("Assertion failed.");if(!(b.length>=c))throw Error("Assertion failed.");
for(e=0;e<c;e++)for(var n=k[e+1],m=k[e];m<n;m++)a[h[m]]+=l[m]*b[e]}},{key:"_compute_vA",value:function(b,a){var c=ea()(this.shape,2),e=c[0];c=c[1];var h=this._offR,k=this._offC,l=this._vals;if(0!==b.length%1)throw Error("Assertion failed.");if(0!==a.length%1)throw Error("Assertion failed.");if(!(b.length>=e))throw Error("Assertion failed.");if(!(a.length>=c))throw Error("Assertion failed.");for(e=0;e<c;e++)for(var n=k[e+1],m=k[e];m<n;m++)a[e]+=b[h[m]]*l[m]}}],[{key:"_fromRawData",value:function(b,
a,c,e){var h=function m(l,n){var p=ea()(m.shape,2),t=p[0];p=p[1];var v=m._offR,u=m._offC,x=m._vals;l*=1;n*=1;if(0!==l%1)throw Error("CSCMatrix(i,j): i must be a valid integer.");if(0!==n%1)throw Error("CSCMatrix(i,j): j must be a valid integer.");if(!(0<=l))throw Error("CSCMatrix(i,j): i must be non-negative.");if(!(0<=n))throw Error("CSCMatrix(i,j): j must be non-negative.");if(!(l<t))throw Error("CSCMatrix(i,j): i out of bounds.");if(!(n<p))throw Error("CSCMatrix(i,j): j out of bounds.");n=Nc(u[n],
u[n+1],function(w){return v[w]-l});return 0>n?0:x[n]};Pb()(h,{shape:b,_offR:a,_offC:c,_vals:e});Ic()(h,g.prototype);return h}},{key:"fromElems",value:function(b,a,c){b*=1;if(!(0<b)||0!==b%1)throw Error("CSCMatrix.fromElems(M,N, ijv): M must be a positive integer.");a*=1;if(!(0<a)||0!==a%1)throw Error("CSCMatrix.fromElems(M,N, ijv): N must be a positive integer.");var e=qb()({length:a},function(){return[]});c=Ra(c);var h;try{for(c.s();!(h=c.n()).done;){var k=h.value;e[k[1]].push(k)}}catch(w){c.e(w)}finally{c.f()}h=
Ra(e);var l;try{for(h.s();!(l=h.n()).done;){var n=l.value;Qc()(n).call(n,function(w,y){return w[0]-y[0]});for(c=k=0;c<n.length;c++)if(c+1===n.length||n[c][0]!==n[c+1][0])n[k++]=n[c];for(var m=n.length;m-- >k;)n.pop()}}catch(w){h.e(w)}finally{h.f()}l=new Int32Array(a+1);for(m=n=0;;m++){l[m]=n;if(m===a)break;n+=e[m].length}n=new Int32Array(l[a]);m=new Float64Array(l[a]);h=0;e=Ra(e);var p;try{for(e.s();!(p=e.n()).done;){var t=Ra(p.value),v;try{for(t.s();!(v=t.n()).done;){var u=ea()(v.value,3),x=u[2];
n[h]=u[0];m[h]=x;++h}}catch(w){t.e(w)}finally{t.f()}}}catch(w){e.e(w)}finally{e.f()}b=Int32Array.of(b,a);ab()(b.buffer);ab()(n.buffer);ab()(l.buffer);ab()(m.buffer);return g._fromRawData(b,n,l,m)}}]);return g}(),wi=d(186),xi=d.n(wi),lh=function(){function g(b,a){sb()(this,g);b*=1;if(!(0<b)||0!==b%1)throw Error("new DOKMatrix(M,N): M must be a positive integer.");a*=1;if(!(0<a)||0!==a%1)throw Error("new DOKMatrix(M,N): N must be a positive integer.");if(0!==b%1)throw Error("Assertion failed.");if(0!==
a%1)throw Error("Assertion failed.");if(!(0<b))throw Error("Assertion failed.");if(!(0<a))throw Error("Assertion failed.");var c=function l(h,k){var n=ea()(l.shape,2),m=n[0];n=n[1];var p=l._dok;h*=1;k*=1;if(0!==h%1)throw Error("DOKMatrix(i,j): i must be a valid integer.");if(0!==k%1)throw Error("DOKMatrix(i,j): j must be a valid integer.");if(!(0<=h))throw Error("DOKMatrix(i,j): i must be non-negative.");if(!(0<=k))throw Error("DOKMatrix(i,j): j must be non-negative.");if(!(h<m))throw Error("DOKMatrix(i,j): i out of bounds.");
if(!(k<n))throw Error("DOKMatrix(i,j): j out of bounds.");return p.get(n*h+k)||0};c.shape=Int32Array.of(b,a);c._dok=new xi.a;ab()(c.shape.buffer);Ic()(c,g.prototype);return c}Ab()(g,[{key:"elemsNon0",value:Ga.a.mark(function a(){var c,e,h,k,l,n,m,p;return Ga.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:c=this.shape[1],e=vc(this._dok),t.prev=2,e.s();case 4:if((h=e.n()).done){t.next=11;break}k=ea()(h.value,2);l=k[0];n=k[1];m=Math.floor(l/c);p=l%c;t.next=9;return[[m,p],n];case 9:t.next=4;break;
case 11:t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](2),e.e(t.t0);case 16:return t.prev=16,e.f(),t.finish(16);case 19:case "end":return t.stop()}},a,this,[[2,13,16,19]])})},{key:"ndim",get:function(){return 2}},{key:"data",get:function(){throw Error("DOKMatrix::data: Sparse array data cannot be accessed directly.");}},{key:"dtype",get:function(){return"float64"}},{key:"nnz",get:function(){return this._dok.size}},{key:"T",get:function(){var a=ea()(this.shape,2),c=a[0];a=a[1];var e=this._dok,h=
new g(a,c);e=vc(e);var k;try{for(e.s();!(k=e.n()).done;){var l=ea()(k.value,2),n=l[0];h._dok.set(n%a*c+Math.floor(n/a),l[1])}}catch(m){e.e(m)}finally{e.f()}return h}},{key:"set",value:function(a,c){var e=ea()(a,2);a=e[0];e=e[1];var h=ea()(this.shape,2),k=h[0],l=h[1];h=this._dok;if(0!==a%1)throw Error("Assertion failed.");a*=1;if(0!==e%1)throw Error("Assertion failed.");e*=1;if(!(0<=a))throw Error("Assertion failed.");if(!(0<=e))throw Error("Assertion failed.");if(!(a<k))throw Error("Assertion failed.");
if(!(e<l))throw Error("Assertion failed.");c*=1;a=l*a+e;if(0===c)h["delete"](a);else h.set(a,c)}},{key:"modify",value:function(a,c){return this.set(a,c(this.apply(void 0,Za()(a))))}},{key:"_compute_Av",value:function(a,c){var e=ea()(this.shape,2),h=e[0];e=e[1];var k=this._dok;if(0!==c.length%1)throw Error("Assertion failed.");if(0!==a.length%1)throw Error("Assertion failed.");if(!(c.length>=h))throw Error("Assertion failed.");if(!(a.length>=e))throw Error("Assertion failed.");h=vc(k);var l;try{for(h.s();!(l=
h.n()).done;){var n=ea()(l.value,2),m=n[0];c[Math.floor(m/e)]+=n[1]*a[m%e]}}catch(p){h.e(p)}finally{h.f()}}},{key:"_compute_vA",value:function(a,c){var e=ea()(this.shape,2),h=e[0];e=e[1];var k=this._dok;if(0!==a.length%1)throw Error("Assertion failed.");if(0!==c.length%1)throw Error("Assertion failed.");if(!(a.length>=h))throw Error("Assertion failed.");if(!(c.length>=e))throw Error("Assertion failed.");h=vc(k);var l;try{for(h.s();!(l=h.n()).done;){var n=ea()(l.value,2),m=n[0];c[m%e]+=a[Math.floor(m/
e)]*n[1]}}catch(p){h.e(p)}finally{h.f()}}}],[{key:"fromElems",value:function(a,c,e){a=new g(a,c);e=vc(e);var h;try{for(e.s();!(h=e.n()).done;){var k=ea()(h.value,3);a.set([k[0],k[1]],k[2])}}catch(l){e.e(l)}finally{e.f()}return a}}]);return g}(),Mb=function(){function g(){sb()(this,g);this.max=this.sum=0;jc()(this)}Ab()(g,[{key:"reset",value:function(){this.sum=this.max=0}},{key:"include",value:function(b){b=Math.abs(b);if(0!==b){if(this.max<b){var a=this.max/b;this.sum=this.sum*a*a;this.max=b}b/=
this.max;this.sum+=b*b}}},{key:"resultIncl",value:function(b){b=Math.abs(b);var a=this.sum,c=this.max;0!==b&&(c<b&&(c/=b,a*=c*c,c=b),b/=c,a+=b*b);return isFinite(c)?Math.sqrt(a)*c:c}},{key:"result",get:function(){var b=this.max,a=this.sum;return isFinite(b)?Math.sqrt(a)*b:b}},{key:"resultSquare",get:function(){var b=this.max,a=this.sum;return isFinite(b)?a*b*b:b}}]);return g}(),Of=function(){function g(){sb()(this,g);this.sum=this.rst=0}Ab()(g,[{key:"set",value:function(b){var a=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:0;if(isNaN(b*=1))throw Error("Assertion failed.");if(isNaN(a*=1))throw Error("Assertion failed.");this.sum=b;this.rst=a}},{key:"add",value:function(b){b-=this.rst;var a=this.sum+b;this.rst=a-this.sum-b;this.sum=a}}]);return g}(),ef=function(g){g=V(g);if(2>g.ndim)throw Error("det_tri(a): a.shape=[".concat(g.shape,"]; a.ndim must be at least 2."));var b=g.shape,a=na()(b).call(b,-2),c=ea()(a,2);a=c[1];if(c[0]!==a)throw Error("det_tri(a): a must be square matrices.");
c=g.data;g=new Ka[g.dtype](c.length/(a*a));for(var e=0,h=0;e<g.length;e++){var k=h;h+=a*a;for(var l=1;k<h;k+=a+1)l*=c[k];g[e]=l}return new fa(na()(b).call(b,0,-2),g)},ff=function(g){g=V(g);if(2>g.ndim)throw Error("det_tri(A): A.ndim must be at least 2.");var b=g.shape,a=na()(b).call(b,-2),c=ea()(a,2);a=c[1];if(c[0]!==a)throw Error("det_tri(A): A must be square matrices.");var e=Ka["float32"===g.dtype?"float32":"float64"];g=g.data;c=new e(g.length/(a*a));e=new e(c.length);for(var h=0,k=0;h<e.length;h++){var l=
k;k+=a*a;for(var n=1,m=0;l<k;l+=a+1)n*=Ib()(g[l]),m+=Math.log(Math.abs(g[l]));c[h]=n;e[h]=m}g=na()(b).call(b,0,-2);return[new fa(g,c),new fa(g,e)]},mh=function(g){g=rc(g);g=ea()(g,2);return ef(g[1])},nh=function(g){g=rc(g);g=ea()(g,2);return ff(g[1])},Hd=function(g){function b(a,c){sb()(this,b);this.re=1*a;this.im=1*c}Ab()(b,[{key:"abs",value:function(){return Nb()(this.re,this.im)}},{key:"/=",value:function(a,c){if(0===c)this.re/=a,this.im/=a;else{var e=this.re;if(Math.abs(a)>=Math.abs(c)){var h=
c/a;this.re=(e+this.im*h)/(a+c*h);this.im=(this.im-e*h)/(a+c*h)}else h=a/c,this.re=(e*h+this.im)/(a*h+c),this.im=(this.im*h-e)/(a*h+c)}}},{key:"= c0*c1",value:function(a,c,e,h){this.re=a*e-c*h;this.im=a*h+c*e}},{key:"-= c0*c1",value:function(a,c,e,h){this.re-=a*e-c*h;this.im-=a*h+c*e}},{key:g,value:function(){return this.toString()}},{key:"toString",value:function(){var a,c;return 0==this.im?this.re.toString():0==this.re?"".concat(this.im,"j"):0>this.im?Wa()(a="".concat(this.re," - ")).call(a,-this.im,
"j"):Wa()(c="".concat(this.re," + ")).call(c,this.im,"j")}}]);return b}(wd()("nodejs.util.inspect.custom")),yi=d(56),ed=d.n(yi),zi=d(41),Rb=d.n(zi),lf=function(){function g(){sb()(this,g);this.__nextNormal=NaN}Ab()(g,[{key:"bool",value:function(){return 0>this.uniform()}},{key:"uniform",value:function(){throw Error("".concat(Rb()(this).name()," extends AbstractRNG but does not implement uniform(int,int)."));}},{key:"int",value:function(b,a){void 0===a&&(a=b,b=0);if(0!==b%1)throw Error("".concat(Rb()(this).name(),
"::int(from,until): from must be a valid int."));if(0!==a%1)throw Error("".concat(Rb()(this).name(),"::int(from,until): until must be a valid int."));if(!(b<a))throw Error("".concat(Rb()(this).name(),"::int(from,until): from must be less than until."));return Math.floor(this.uniform(b,a))}},{key:"normal",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;b*=1;if(!isFinite(b))throw Error("".concat(Rb()(this).name(),
"::normal(mean,sigma): mean must be valid number."));a*=1;if(!isFinite(a))throw Error("".concat(Rb()(this).name(),"::normal(mean,sigma): sigma must be valid number."));var c=this.__nextNormal;if(!isNaN(c))return this.__nextNormal=NaN,c*a+b;do{c=this.uniform();var e=this.uniform();var h=c*c+e*e}while(1<h||0==h);h=Math.sqrt(-2*Math.log(h)/h);this.__nextNormal=h*c;return b+h*e*a}},{key:"shuffle",value:function(b,a,c){if(0!==b.length%1)throw Error("".concat(Rb()(this).name(),"::normal(array,from=0,until=array.length): array must be Array-like."));
if(!(0<=b.length))throw Error("".concat(Rb()(this).name(),"::normal(array,from=0,until=array.length): array must be Array-like."));null==a&&(a=0);null==c&&(c=b.length);if(0!==a%1)throw Error("".concat(Rb()(this).name(),"::normal(array,from=0,until=array.length): from must be int."));if(0!==c%1)throw Error("".concat(Rb()(this).name(),"::normal(array,from=0,until=array.length): until must be int."));if(!(0<=a))throw Error("".concat(Rb()(this).name(),"::normal(array,from=0,until=array.length): from must be non-negative."));
if(!(a<=c))throw Error("".concat(Rb()(this).name(),"::normal(array,from=0,until=array.length): from must not be greater than until."));if(!(b.length>=c))throw Error("".concat(Rb()(this).name(),"::normal(array,from=0,until=array.length): until must not be greater than array.length."));for(;a<c-1;a++){var e=this["int"](a,c),h=b[e];b[e]=b[a];b[a]=h}}},{key:"ortho",value:function(b){for(var a=arguments.length,c=Array(1<a?a-1:0),e=1;e<a;e++)c[e-1]=arguments[e];b in Ka||(c.unshift(b),b="float64");if(1>
c.length)throw Error("AlreaRNG::orthogonal([dtype,] ...shape): shape.length must be at least 1.");1===c.length&&c.push(c[0]);for(a=c.length;0<a--;){var h;if(0!==c[a]%1||1>c[a])throw Error(Wa()(h="AlreaRNG::orthogonal([dtype,] ...shape): shape[".concat(a,"] = ")).call(h,c[a]," not a positive integer."));}c=Int32Array.from(c);h=c.subarray(-2);a=ea()(h,2);h=a[0];a=a[1];e=Math.max(h,a);for(var k=Math.min(h,a),l=new Ka[b](Ya()(c).call(c,function(y,z){return y*z})),n=new Float64Array(e*k),m=l.length;0<=
(m-=h*a);){for(var p=e;0<p--;)for(var t=k;0<t--;)n[k*p+t]=p!==t?0:this.bool()?-1:1;for(p=0;p<e;p++){t=this.normal();for(var v=p;++v<e;){var u=this.normal();u=ib(t,u);u=ea()(u,3);var x=u[0],w=u[1];0!==w&&(t=u[2],Ta(n,Math.min(v+1,k),k*p,k*v,x,w))}}for(p=e;0<p--;)for(t=k;0<t--;)l[m+(h<a?a*t+p:a*p+t)]=n[k*p+t]}return new fa(c,l)}}]);return g}(),Wf=Math.pow(2,32),xd=Math.pow(2,-32),Ai=Math.pow(2,-53),Jd=function(g){function b(c){sb()(this,b);var e=a.call(this);if(null==c)throw Error("Assertion failed.");
c=c.toString();var h=Oc(" ",4022871197),k=Oc(" ",h),l=Oc(" ",k),n=Oc(c,l),m=Oc(c,n);c=Oc(c,m);h=((h>>>0)-(n>>>0))*xd;h+=0>h;k=((k>>>0)-(m>>>0))*xd;k+=0>k;l=((l>>>0)-(c>>>0))*xd;l+=0>l;Pb()(ed()(e),{s0:h,s1:k,s2:l,c:1});jc()(ed()(e));return e}Yb()(b,g);var a=Uf(b);Ab()(b,[{key:"__next",value:function(){var c=2091639*this.s0+this.c*xd;this.s0=this.s1;this.s1=this.s2;return this.s2=c-(this.c=c|0)}},{key:"uniform",value:function(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1,e=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:1;c*=1;if(!isFinite(c))throw Error("Assertion failed.");e*=1;if(!isFinite(e))throw Error("Assertion failed.");var h=this.__next()+(2097152*this.__next()|0)*Ai;return c*(1-h)+h*e}}]);return b}(lf),Bi=d(187),Ci=d.n(Bi),Di=Ga.a.mark(function b(){var a,c;return Ga.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=function(h){return new Function("A_shape","A","B_shape","B","C_shape","C","\n      const I = A_shape[A_shape.length-2],\n            K = A_shape[A_shape.length-1],\n            J = B_shape[B_shape.length-1]; \n      let\n        a = 0, aStride = 1,\n        b = 0, bStride = 1,\n        c = 0;\n\n      const loops = new Int32Array(C_shape.length-2);\n      for( let d=0; d >= 0; )\n        if( d === C_shape.length-2 ) {\n          aStride = I*K;\n          bStride = K*J;\n          for( const cEnd = c + I*J; c < cEnd; c += J, b -= bStride ) {\n          for( const aEnd = a + K  ; a < aEnd; c -= J, a++ ) {\n          for( const bEnd = b +   J; b < bEnd; c += 1, b++ ) {\n            ".concat(h,
"\n          }}}\n          b += bStride;\n          d -= 1;\n        }\n        else\n        {\n          if( loops[d]++ > 0 ) {\n            if( loops[d] > C_shape[d] ) {\n              aStride *= A_shape[ d - C_shape.length + A_shape.length ] || 1;\n              bStride *= B_shape[ d - C_shape.length + B_shape.length ] || 1;\n              loops[d--] = 0;\n              continue;\n            }\n            if( ! (A_shape[ d - C_shape.length + A_shape.length ] > 1) ) a -= aStride;\n            if( ! (B_shape[ d - C_shape.length + B_shape.length ] > 1) ) b -= bStride;\n          }\n          ++d;\n        }\n    "))},
e.next=3,c("C[c] += A[a]*B[b];");case 3:return e.next=5,c("\n    C[2*c+0] += A[a] * B[2*b+0];\n    C[2*c+1] += A[a] * B[2*b+1];\n  ");case 5:return e.next=7,c("\n    C[2*c+0] += B[b] * A[2*a+0];\n    C[2*c+1] += B[b] * A[2*a+1];\n  ");case 7:return e.next=9,c("\n    C[2*c+0] += B[2*b+0] * A[2*a+0]  -  B[2*b+1] * A[2*a+1];\n    C[2*c+1] += B[2*b+0] * A[2*a+1]  +  B[2*b+1] * A[2*a+0];\n  ");case 9:return e.next=11,Ci()(a=c("C[c] = this.add(C[c], this.mul(A[a],B[b]));")).call(a,Fb);case 11:case "end":return e.stop()}},
b)})(),fd=ea()(Di,5),Xf=fd[0],Yf=fd[1],Zf=fd[2],$f=fd[3],ag=fd[4],Nd=function(b){function a(e){var h;sb()(this,a);var k=arguments.length;for(var l=Array(1<k?k-1:0),n=1;n<k;n++)l[n-1]=arguments[n];k=c.call.apply(c,Wa()(h=[this]).call(h,l));if(!(e instanceof fa))throw Error("Assertion failed.");k.x=e;return k}Yb()(a,b);var c=jg(a);return a}(Hc()(Error)),Ei=d(57),Pc=d.n(Ei),lg=function(b,a,c,e,h,k,l,n){e|=0;k|=0;l|=0;b|=0;var m=b-1|0;a|=0;var p=a-1|0;if(n.length<3*m)throw Error("Assertion failed: Integer work matrix I too small.");
if(h.length<m*(m+2)+2*m+(m+1)*(m+1))throw Error("Assertion failed: Scalar work matrix F too small.");var t=m*(m+2)-p,v=m*(m+2)-2*p,u=m*(m+2)-p*(p+2),x=2*p;if(2>a)throw Error("Assertion failed.");if(0!==h[k+2*p-2])throw Error("Assertion failed.");for(var w=1;w<p;w++)if(h[k+2*(w-1)]<h[k+2*w])throw Error("Assertion failed.");var y=new Mb;w=function(){for(var T=0;T<p;T++)y.include(h[k+2*T+1]);T=y.result;for(var Y=0;Y<p;Y++)y.include(h[k+2*Y]);Y=y.result;0===Y&&(Y=1);return[T/Y,Y]}();w=ea()(w,2);var z=
w[0];w=w[1];for(var B=0;B<2*p;B++)h[k+B]/=w;var E=A(c instanceof Float32Array?"float32":"float64"),D=function(){for(var T=0,Y=p-1,aa=p-1;0<aa--;){var W=h[k+2*aa],ba=n[0+aa];Math.abs(h[k+2*aa+1])/E<=W?(h[t+T]=W,n[p+T]=ba,++T):(--Y,h[k+2*Y]=W,h[k+2*Y+1]=h[k+2*aa+1],n[p+Y]=ba)}return T}();for(B=0;B<D;B++)n[0+B]=n[p+B];var I=function(){for(var T=D,Y=p-1,aa=p-1;aa-- >D;){var W=h[k+2*aa],ba=h[k+2*Y],ja=n[p+aa],ma=ib(h[k+2*Y+1],h[k+2*aa+1]),sa=ea()(ma,3);ma=sa[0];var qa=sa[1];sa=sa[2];(W-ba)/E<=W||!isFinite(Math.sqrt(p)/
(W-ba))?(h[u+2*T]=ma,h[u+2*T+1]=qa,h[k+2*Y+1]=sa,h[k+2*Y]=h[t+T]=W,n[0+T]=ja,n[x+T]=Y,++T):(--Y,h[k+2*Y]=W,h[k+2*Y+1]=h[k+2*aa+1],n[0+Y]=ja)}return T}();for(B=2*D;B<2*I;B++)h[k+B]=h[u+B],h[u+B]=0;B=function(T){var Y=h[k+2*T],aa=I<T?h[k+2*T-2]:Y+z;if(Y>aa)throw Error("Assertion failed.");a:{if(T>I){var W=(Y+aa)/2;for(var ba=1,ja=I;ja<p;ja++){var ma=h[k+2*ja],sa=h[k+2*ja+1];ba+=sa/(ma-W)*(sa/(ma+W))}if(!isFinite(ba))throw Error("Assertion failed.");if(0>ba){W=aa;Y-=aa;aa=-Number.MIN_VALUE;break a}}W=
Y;aa-=Y;Y=+Number.MIN_VALUE}for(;;){ba=(Y+aa)/2;if(ba===Y||ba===aa){h[t+T]=ba;break}ja=1;for(ma=I;ma<p;ma++){sa=h[k+2*ma];var qa=h[k+2*ma+1];ja+=qa/(sa-W-ba)*(qa/(sa+W+ba))}if(!isFinite(ja))throw Error("Assertion failed.");0>=ja&&(Y=ba);0<=ja&&(aa=ba)}};for(var K=I;K<p;K++)B(K);0===Math.abs(h[k+2*p-1])&&(h[k+2*p-2]=0,h[k+2*p-1]=0,h[t+p-1]=0);B=h[t+p-1];K=h[k+2*(p-1-(0>B))];for(var Q=I;Q<p;Q++){for(var P=h[k+2*Q],M=(K-P+B)*(K+P+B),N=I;N<Q;N++){var R=h[t+N],S=h[k+2*(N-(0>R))],U=h[k+2*N];M*=(S-P+R)/
(U-P)*((S+P+R)/(U+P))}for(N=Q;N<p-1;N++)R=h[t+N],S=h[k+2*(N-(0>R))],U=h[k+2*N+2],M*=(S-P+R)/(U-P)*((S+P+R)/(U+P));h[k+2*Q+1]=Ib()(h[k+2*Q+1])*Math.sqrt(M)}B=D-1;K=I-1;Q=I;for(P=0;P<p;P++)switch(N=-Infinity,M=3,Q<p&&(N=h[t+Q],M=2,N+=h[k+2*(Q-(0>N))]),K>=D&&(R=h[t+K],R<N||(M=1,N=R)),0<=B&&(R=h[t+B],R<N||(M=0,N=R)),M){case 0:n[p+B--]=P;continue;case 1:n[p+K--]=P;continue;case 2:n[p+Q++]=P;continue;default:throw Error("Assertion failed.");}for(B=I;B<p;B++){K=h[t+B];Q=h[k+2*(B-(0>K))];y.reset();for(P=
I;P<p-1;P++)M=h[k+2*P],y.include(h[u+p*B+P]=h[k+2*P+1]/(M-Q-K)*(M/(M+Q+K)));y.include(h[u+p*B+p-1]=-1);K=y.result;if(!(0<K))throw Error("Assertion failed.");for(Q=I;Q<p;Q++)h[u+p*B+Q]/=K}for(B=I;B<p;B++)for(K=B;++K<p;)Q=h[u+p*B+K],h[u+p*B+K]=h[u+p*K+B],h[u+p*K+B]=Q;if(D<I){for(B=D;B<I;B++)Ja()(h).call(h,0,u+p*B+D,u+p*B+p),h[u+p*B+B]=1;for(B=I;B<p;B++)Ja()(h).call(h,0,u+p*B+D,u+p*B+I);for(B=I;B-- >D;)K=n[x+B],K<p-1&&Ta(h,p-B,u+p*B+B,u+p*K+B,h[k+2*B],h[k+2*B+1])}for(B=0;B<p;B++){Ja()(h).call(h,0,v+
D,v+p);for(K=D;K<p;K++)if(Q=c[e+m*B+n[0+K]],0!==Q)for(P=D;P<p;P++)h[v+P]+=Q*h[u+p*K+P];for(K=0;K<D;K++)h[v+K]=c[e+m*B+n[0+K]];for(K=0;K<p;K++)c[e+m*B+n[p+K]]=h[v+K]}for(c=I;c<p;c++){e=h[t+c];m=h[k+2*(c-(0>e))];y.reset();for(B=I;B<p;B++)K=h[k+2*B],y.include(h[u+p*c+B]=h[k+2*B+1]/(K-m-e)/(K+m+e));e=y.result;if(!(0<e||c===p-1))throw Error("Assertion failed: "+e);for(m=I;m<p;m++)h[u+p*c+m]/=e}if(0===h[k+2*p-1]){for(c=I;c<p-1;c++)h[u+p*(p-1)+c]=0;h[u+p*(p-1)+(p-1)]=1}for(c=I;c<p;c++)for(e=c;++e<p;)m=h[u+
p*c+e],h[u+p*c+e]=h[u+p*e+c],h[u+p*e+c]=m;if(D<I){for(c=D;c<I;c++)Ja()(h).call(h,0,u+p*c+D,u+p*c+p),h[u+p*c+c]=1;for(c=I;c<p;c++)Ja()(h).call(h,0,u+p*c+D,u+p*c+I);for(c=I;c-- >D;)Ta(h,p-c,u+p*c+c,u+p*n[x+c]+c,h[k+2*c],h[k+2*c+1])}for(c=0;c<a;c++){Ja()(h).call(h,0,v+D,v+p);for(e=D;e<p;e++)if(m=h[l+b*c+n[0+e]],0!==m)for(B=D;B<p;B++)h[v+B]+=m*h[u+p*e+B];for(e=0;e<D;e++)h[v+e]=h[l+b*c+n[0+e]];for(e=0;e<p;e++)h[l+b*c+n[p+e]]=h[v+e]}for(b=I;b<p;b++)h[t+b]+=h[k+2*(b-(0>h[t+b]))];for(b=0;b<p;b++)a=n[p+b],
h[k+2*a]=h[t+b]*w,h[k+2*a+1]=NaN},Fi=d(48),Rc=d.n(Fi),ve=!0,pb=4,Gb=pb*pb,ac=function(b){function a(){sb()(this,a);return c.apply(this,arguments)}Yb()(a,b);var c=qd(a);return a}(Hc()(Error)),Lb=function(b){function a(){sb()(this,a);return c.apply(this,arguments)}Yb()(a,b);var c=qd(a);return a}(ac),zc=function(b){function a(e,h,k){sb()(this,a);var l=c.call(this);Pb()(ed()(l),{x:e,f:h,g:k});return l}Yb()(a,b);var c=qd(a);return a}(ac),Sc=function(b){function a(e,h,k){sb()(this,a);var l=c.call(this);
Pb()(ed()(l),{x:e,f:h,g:k});return l}Yb()(a,b);var c=qd(a);return a}(ac),Gi=d(74),Td=d.n(Gi),Hi=d(39),yc=d.n(Hi),$c=Float64Array.of(NaN),Db=new Int32Array($c.buffer);if(2!==Db.length)throw Error("Assertion failed.");var mf=ab()({fRed:.01,gRed:.9,growMin:Math.PI/3,growMax:Math.E-1.5,shrinkLeast:.1}),td=function(){for(var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=0,c=Td()(b);a<c.length;a++){var e=c[a];e in mf||console.warn('more_thuente_abc(opt): unknown parameter "'.concat(e,'" in opt.'))}a=
b=Pb()({},mf,b);var h=a.fRed,k=a.gRed,l=a.growMin,n=a.growMax,m=a.shrinkLeast;h*=1;k*=1;l*=1;n*=1;m*=1;if(!(0<h))throw Error("more_thuente_abc(opt): opt.fRed must be positive.");if(!(h<k))throw Error("more_thuente_abc(opt): opt.fRed must less than opt.gRed.");if(!(1>k))throw Error("more_thuente_abc(opt): opt.gRed must less than 1.");if(!(1<l))throw Error("more_thuente_abc(opt): opt.growMin must larger than 1.");if(!(n>=l))throw Error("more_thuente_abc(opt): opt.growMax must not be less than opt.growMin.");
.5>h||console.warn("more_thuente_abc(opt): opt.fRed should be less than 0.5 to work properly with (quasi-)Newton methods.");if(!(0<=m))throw Error("more_thuente_abc(opt): opt.shrinkLeast must be non-negative.");if(!(.5>=m))throw Error("more_thuente_abc(opt): opt.shrinkLeast must not be greater than 0.5.");a=function(p){return function(t,v,u,x){var w=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,y=5<arguments.length&&void 0!==arguments[5]?arguments[5]:void 0,z=6<arguments.length&&void 0!==
arguments[6]?arguments[6]:Infinity;t=ia("float64",t);u=ia("float64",u);v*=1;if(!(x instanceof fa))throw Error("Assertion failed.");var B=x.shape,E=ea()(B,1)[0];if(1!==t.ndim)throw Error("more_thuente_abc()(fg)(X0,f0,G0): X0.ndim must be 1.");if(1!==u.ndim)throw Error("more_thuente_abc()(fg)(X0,f0,G0): G0.ndim must be 1.");if(1!==x.ndim)throw Error("more_thuente_abc()(fg)(X0,f0,G0): negDir.ndim must be 1.");if(t.shape[0]!==E)throw Error("more_thuente_abc()(fg)(X0,f0,G0): negDir and X0 must have the same shape.");
if(u.shape[0]!==E)throw Error("more_thuente_abc()(fg)(X0,f0,G0): negDir and G0 must have the same shape.");if(isNaN(v))throw Error("more_thuente_abc()(fg)(X0,f0,G0): f0 is NaN.");if(0!==w)throw Error("more_thuente_abc()(fg)(X0,f0,G0, \u03b1Min,\u03b10,\u03b1Max): \u03b1Min !== 0 not (yet) supported.");x=x.data;null==y&&(y=Math.min(1,z/2));if(!(w<=y))throw Error("more_thuente_abc()(fg)(X0,f0,G0, \u03b1Min,\u03b10,\u03b1Max): \u03b1Min must not be greater than \u03b10.");if(!(z>=y))throw Error("more_thuente_abc()(fg)(X0,f0,G0, \u03b1Min,\u03b10,\u03b1Max): \u03b1Max must not be less than \u03b10.");
if(0===z)throw new Lb;var D=function(W){var ba;return Ya()(ba=W.data).call(ba,function(ja,ma,sa){return ja-x[sa]*ma},0)};w=function(W){var ba,ja,ma=new fa(B,dc()(ba=t.data).call(ba,function(qa,pa){return qa-W*x[pa]}));ba=p(new fa(B,na()(ja=ma.data).call(ja)));ba=ea()(ba,2);ja=ba[0];ba=ba[1];ja*=1;ba=ia("float64",ba);if(isNaN(ja))throw Error("more_thuente_abc()(fg)(X0,f0,G0): fg returned NaN.");if(1!==ba.ndim)throw Error("more_thuente_abc()(fg)(X0,f0,G0): fg returned gradient with invalid shape.");
if(ba.shape[0]!==E)throw Error("more_thuente_abc()(fg)(X0,f0,G0): fg returned gradient with invalid shape.");var sa=D(ba);return[ma,ja,ba,sa]};var I=D(u);if(0===I)throw new Lb;if(0<I)throw Error("more_thuente_abc: Initial projected gradient not negative.");var K=0,Q=Infinity,P=y,M=v,N=NaN;y=I;var R=NaN;a:for(;;){if(!isFinite(P))throw Error("Assertion failed: "+P);Q=w(P);var S=ea()(Q,4);Q=S[0];R=S[1];N=S[2];S=S[3];if(R-v<=h*P*I&&Math.abs(S)<=-k*I)return[Q,R,N];if(R>M){Q=P;N=R;R=S;break a}if(0<S){Q=
K;K=P;N=M;M=R;R=y;y=S;break a}if(!(P<z))throw new Sc(Q,R,N);if(!(P<Number.MAX_VALUE))throw Error("more_thuente_abc: Infinity reached.");M=void 0;M=y<S?rd(K,P,y,S):P*l;M=Math.min(M,P*n);M=Math.max(M,P*l);P<M||(M=mc(P));z>=M||(M=z);K=P;P=M;M=R;y=S}if(K===Q)throw new ac("more_thuente_abc: bracketing failed.");z=function(W,ba,ja){if(0===K)throw new Lb("strongWolfeLineSearch(): no progress.");throw new zc(W,ba,ja);};for(S=1;;S++){P=Math.min(K,Q);var U=Math.max(K,Q),T=Math.max(mc(P),m*U+(1-m)*P);U=Math.min(Fc(U),
m*P+(1-m)*U);P=K+(Q-K)/2;if(.5!==m&&T<U&&isFinite(N)&&isFinite(R)){if(M<N){P=sd(K,Q,M,N,y,R);var Y=ad(K,Q,M,N,y);P=Math.abs(P-K)<Math.abs(Y-K)?P:(P+Y)/2}else 0>Ib()(y)*R?(P=sd(K,Q,M,N,y,R),Y=rd(K,Q,y,R),P=Math.abs(Y-Q)<=Math.abs(P-Q)?P:Y):P=ad(K,Q,M,N,y);T<=P?U>=P||(P=U):P=T}T=w(P);var aa=ea()(T,4);T=aa[0];U=aa[1];Y=aa[2];aa=aa[3];if(U-v<=h*P*I&&Math.abs(aa)<=-k*I)return[T,U,Y];U>M?(Q===P&&z(T,U,Y),Q=P,N=U,R=aa):(0<Ib()(Q-K)*aa&&(Q=K,N=M,R=y),K===P&&z(T,U,Y),K=P,M=U,y=aa)}}};yc()(a,"name",{value:"more_thuente_abc(".concat(Rc()(b),
")"),writable:!1});Pb()(a,b);ab()(a);return a},nf=ab()({fRed:.01,gRed:.9,growMin:Math.PI/3,growMax:Math.E-1.5,shrinkLeast:.1}),Yd=function(){for(var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=0,c=Td()(b);a<c.length;a++){var e=c[a];e in nf||console.warn('more_thuente_u123(opt): unknown parameter "'.concat(e,'" in opt.'))}a=b=Pb()({},nf,b);var h=a.fRed,k=a.gRed,l=a.growMin,n=a.growMax,m=a.shrinkLeast;h*=1;k*=1;l*=1;n*=1;m*=1;if(!(0<h))throw Error("more_thuente_u123(opt): opt.fRed must be positive.");
if(!(h<k))throw Error("more_thuente_u123(opt): opt.fRed must less than opt.gRed.");if(!(1>k))throw Error("more_thuente_u123(opt): opt.gRed must less than 1.");if(!(1<l))throw Error("more_thuente_u123(opt): opt.growMin must larger than 1.");if(!(n>=l))throw Error("more_thuente_u123(opt): opt.growMax must not be less than opt.growMin.");.5>h||console.warn("more_thuente_u123(opt): opt.fRed should be less than 0.5 to work properly with (quasi-)Newton methods.");if(!(0<=m))throw Error("more_thuente_u123(opt): opt.shrinkLeast must be non-negative.");
if(!(.5>=m))throw Error("more_thuente_u123(opt): opt.shrinkLeast must not be greater than 0.5.");a=function(p){return function(t,v,u,x){var w,y,z=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,B=5<arguments.length&&void 0!==arguments[5]?arguments[5]:void 0,E=6<arguments.length&&void 0!==arguments[6]?arguments[6]:Infinity;t=ia("float64",t);u=ia("float64",u);v*=1;if(!(x instanceof fa))throw Error("Assertion failed.");var D=x.shape,I=ea()(D,1)[0];if(1!==t.ndim)throw Error("more_thuente_u123()(fg)(X0,f0,G0): X0.ndim must be 1.");
if(1!==u.ndim)throw Error("more_thuente_u123()(fg)(X0,f0,G0): G0.ndim must be 1.");if(1!==x.ndim)throw Error("more_thuente_u123()(fg)(X0,f0,G0): negDir.ndim must be 1.");if(t.shape[0]!==I)throw Error("more_thuente_u123()(fg)(X0,f0,G0): negDir and X0 must have the same shape.");if(u.shape[0]!==I)throw Error("more_thuente_u123()(fg)(X0,f0,G0): negDir and G0 must have the same shape.");if(0!==z)throw Error("more_thuente_u123()(fg)(X0,f0,G0, \u03b1Min,\u03b10,\u03b1Max): \u03b1Min !== 0 not (yet) supported.");
if(isNaN(v))throw Error("more_thuente_u123()(fg)(X0,f0,G0): f0 is NaN.");if(Wb()(w=t.data).call(w,isNaN))throw Error("more_thuente_u123()(fg)(X0,f0,G0): X0 contains NaN.");if(Wb()(y=u.data).call(y,isNaN))throw Error("more_thuente_u123()(fg)(X0,f0,G0): G0 contains NaN.");x=x.data;if(Wb()(x).call(x,isNaN))throw Error("Assertion failed.");null==B&&(B=Math.min(1,E/2));if(!(z<=B))throw Error("more_thuente_u123()(fg)(X0,f0,G0, \u03b1Min,\u03b10,\u03b1Max): \u03b1Min must not be greater than \u03b10.");
if(!(E>=B))throw Error("more_thuente_u123()(fg)(X0,f0,G0, \u03b1Min,\u03b10,\u03b1Max): \u03b1Max must not be less than \u03b10.");if(0===E)throw new Lb;var K=function(ba){var ja;return Ya()(ja=ba.data).call(ja,function(ma,sa,qa){return ma-x[qa]*sa},0)};w=function(ba){var ja,ma,sa=new fa(D,dc()(ja=t.data).call(ja,function(pa,ta){return pa-ba*x[ta]}));ja=p(new fa(D,na()(ma=sa.data).call(ma)));ja=ea()(ja,2);ma=ja[0];ja=ja[1];ma*=1;ja=ia("float64",ja);if(isNaN(ma))throw Error("more_thuente_u123()(fg)(X0,f0,G0): fg returned NaN.");
if(1!==ja.ndim)throw Error("more_thuente_u123()(fg)(X0,f0,G0): fg returned gradient with invalid shape.");if(ja.shape[0]!==I)throw Error("more_thuente_u123()(fg)(X0,f0,G0): fg returned gradient with invalid shape.");var qa=K(ja);return[sa,ma,ja,qa]};y=K(u);if(0===y)throw new Lb;if(0<y)throw Error("more_thuente_u123: Initial projected gradient not negative.");var Q=0,P=Infinity,M=B;z=v;var N=NaN;B=y;var R=NaN;a:for(;;){if(!isFinite(M))throw Error("Assertion failed.");P=w(M);var S=ea()(P,4);P=S[0];
R=S[1];N=S[2];S=S[3];if(R-v<=h*M*y&&Math.abs(S)<=-k*y)return[P,R,N];if(R-z>h*(M-Q)*y){P=M;N=R;R=S;break a}if(0<S){P=Q;Q=M;N=z;z=R;R=B;B=S;break a}if(!(M<E))throw new Sc(P,R,N);if(!(M<Number.MAX_VALUE))throw Error("more_thuente_u123: Infinity reached.");z=void 0;z=B<S?rd(Q,M,B,S):M*l;z=Math.min(z,M*n);z=Math.max(z,M*l);M<z||(z=mc(M));E>=z||(z=E);Q=M;M=z;z=R;B=S}if(Q===P)throw new ac("more_thuente_u123: bracketing failed.");E=function(ba,ja,ma){if(0===Q)throw new Lb("strongWolfeLineSearch(): no progress.");
throw new zc(ba,ja,ma);};for(S=1;;S++){var U=Math.min(Q,P),T=Math.max(Q,P),Y=Math.max(mc(U),m*T+(1-m)*U),aa=Math.min(Fc(T),m*U+(1-m)*T);M=Q+(P-Q)/2;if(.5!==m&&Y<aa&&isFinite(N)&&isFinite(R)){if(z<N){M=sd(Q,P,z,N,B,R);var W=ad(Q,P,z,N,B);M=Math.abs(M-Q)<Math.abs(W-Q)?M:(M+W)/2}else 0>Ib()(B)*R?(M=sd(Q,P,z,N,B,R),W=rd(Q,P,B,R),M=Math.abs(W-P)<=Math.abs(M-P)?M:W):M=ad(Q,P,z,N,B);Y<=M?aa>=M||(M=aa):M=Y}if(!(U<=M))throw Error("Assertion failed.");if(!(T>=M))throw Error("Assertion failed.");U=w(M);aa=ea()(U,
4);U=aa[0];T=aa[1];Y=aa[2];aa=aa[3];if(T-v<=h*M*y&&Math.abs(aa)<=-k*y)return[U,T,Y];T-z>h*(M-Q)*y?(P===M&&E(U,T,Y),P=M,N=T,R=aa):(0<Ib()(P-Q)*aa&&(P=Q,N=z,R=B),Q===M&&E(U,T,Y),Q=M,z=T,B=aa)}}};yc()(a,"name",{value:"more_thuente_u123(".concat(Rc()(b),")"),writable:!1});Pb()(a,b);ab()(a);return a},Ii=d(128),Ge=d.n(Ii),Ji=d(129),Ie=d.n(Ji),Ki=d(89),Ud=d.n(Ki),Li=d(130),Ke=d.n(Li),Mi=d(188),Hg=d.n(Mi),Ni=d(108),Je=d.n(Ni),Oi=function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=
b.fRed,c=void 0===a?.1:a;a=b.gRed;var e=void 0===a?.9:a;a=b.grow;var h=void 0===a?Math.PI/3:a;b=b.shrinkLeast;a=void 0===b?.2:b;b={fRed:c,gRed:e,grow:h,shrinkLeast:a};c*=1;e*=1;h*=1;a*=1;if(!(0<c))throw Error("albaali_fletcher(opt): opt.fRed must be positive.");if(!(c<e))throw Error("albaali_fletcher(opt): opt.fRed must less than opt.gRed.");if(!(1>e))throw Error("albaali_fletcher(opt): opt.gRed must less than 1.");if(!(1<h))throw Error("albaali_fletcher(opt): opt.grow must larger than 1.");.5>c||
console.warn("albaali_fletcher(opt): opt.fRed should be less than 0.5 to work properly with (quasi-)Newton methods.");if(!(0<=a))throw Error("albaali_fletcher(opt): opt.shrinkLeast must be non-negative.");if(!(.5>=a))throw Error("albaali_fletcher(opt): opt.shrinkLeast must not be greater than 0.5.");var k=1/a,l=k-1;a=function(n){return function(m,p,t,v){var u=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,x=5<arguments.length&&void 0!==arguments[5]?arguments[5]:void 0,w=6<arguments.length&&
void 0!==arguments[6]?arguments[6]:Infinity;m=ia("float64",m);t=ia("float64",t);p*=1;if(!(v instanceof fa))throw Error("Assertion failed.");var y=v.shape,z=ea()(y,1)[0];if(1!==m.ndim)throw Error("albaali_fletcher()(fg)(X0,f0,G0): X0.ndim must be 1.");if(1!==t.ndim)throw Error("albaali_fletcher()(fg)(X0,f0,G0): G0.ndim must be 1.");if(1!==v.ndim)throw Error("albaali_fletcher()(fg)(X0,f0,G0): negDir.ndim must be 1.");if(m.shape[0]!==z)throw Error("albaali_fletcher()(fg)(X0,f0,G0): negDir and X0 must have the same shape.");
if(t.shape[0]!==z)throw Error("albaali_fletcher()(fg)(X0,f0,G0): negDir and G0 must have the same shape.");if(isNaN(p))throw Error("albaali_fletcher()(fg)(X0,f0,G0): f0 is NaN.");if(0!==u)throw Error("albaali_fletcher()(fg)(X0,f0,G0, \u03b1Min,\u03b10,\u03b1Max): \u03b1Min !== 0 not (yet) supported.");v=v.data;null==x&&(x=Math.min(1,w/2));if(!(u<=x))throw Error("albaali_fletcher()(fg)(X0,f0,G0, \u03b1Min,\u03b10,\u03b1Max): \u03b1Min !== 0 not (yet) supported.");if(!(w>=x))throw Error("albaali_fletcher()(fg)(X0,f0,G0, \u03b1Min,\u03b10,\u03b1Max): \u03b1Max must not be less than \u03b1Min.");
if(0===w)throw new Lb;var B=function(Y){var aa;return Ya()(aa=Y.data).call(aa,function(W,ba,ja){return W-v[ja]*ba},0)};u=function(Y){var aa,W,ba=new fa(y,dc()(aa=m.data).call(aa,function(ma,sa){return ma-Y*v[sa]}));aa=n(new fa(y,na()(W=ba.data).call(W)));aa=ea()(aa,2);W=aa[0];aa=aa[1];W*=1;aa=ia("float64",aa);if(isNaN(W))throw Error("more_thuente_u123()(fg)(X0,f0,G0): fg returned NaN.");if(1!==aa.ndim)throw Error("more_thuente_u123()(fg)(X0,f0,G0): fg returned gradient with invalid shape.");if(aa.shape[0]!==
z)throw Error("more_thuente_u123()(fg)(X0,f0,G0): fg returned gradient with invalid shape.");var ja=B(aa);return[ba,W,aa,ja]};var E=B(t);if(0===E)throw new Lb;if(0<E)throw Error("albaali_fletcher: Initial projected gradient not negative.");var D=0,I=Infinity,K=p,Q=NaN,P=E,M=NaN;a:for(;;){if(!isFinite(x))throw Error("Assertion failed.");Q=u(x);var N=ea()(Q,4);Q=N[0];M=N[1];var R=N[2];N=N[3];if(M-p>c*x*E||0<D&&M>=K){I=x;Q=M;M=N;break a}if(Math.abs(N)<=-e*E)return[Q,M,R];if(0<=N){I=D;D=x;Q=K;K=M;M=P;
P=N;break a}if(!(x<w))throw new Sc(Q,M,R);if(!(x<I))throw new ac("albaali_fletcher: Strong Wolfe condition not satisfiable in range.");D=x;x=Math.min(Math.max(mc(x),x*h),w);K=M;P=N}if(D===I)throw new ac("albaali_fletcher: bracketing failed.");w=function(){if(0===D)throw new Lb("strongWolfeLineSearch(): no progress.");throw new zc(X,f,G);};for(N=1;;N++){R=Math.min(D,I);var S=Math.max(D,I),U=Math.max(mc(R),(S+l*R)/k),T=Math.min(Fc(S),(R+l*S)/k);2!==k&&U<T&&isFinite(Q)&&isFinite(M)?(x=ad(D,I,K,Q,P),
U<=x?T>=x||(x=T):x=U):x=D+(I-D)/2;if(!(R<=x))throw Error("Assertion failed.");if(!(S>=x))throw Error("Assertion failed.");R=u(x);T=ea()(R,4);R=T[0];S=T[1];U=T[2];T=T[3];if(S-p>c*x*E||S>=K)I===x&&w(),I=x,Q=S,M=T;else{if(Math.abs(T)<=-e*E)return[R,S,U];0<=Ib()(I-D)*T&&(I=D,Q=K,M=P);D===x&&w();D=x;K=S;P=T}}}};yc()(a,"name",{value:"albaali_fletcher(".concat(Rc()(b),")"),writable:!1});Pb()(a,b);ab()(a);return a},gf=function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};b=Gg({},b);for(var a=
0,c="c1 fRed c2 gRed c3 grow".split(" ");a<c.length;a++){var e=ea()(c[a],2),h=e[0];e=e[1];if(!(e in b)&&h in b){var k;console.warn(Wa()(k="strong_wolfe(opt): opt.".concat(h," is deprecated, use opt.")).call(k,e," instead."));b[e]=b[h];delete b[h]}}return Oi(b)},fc=function(b){var a;b=V(b);if(1>b.ndim)throw Error("beale(x): x.ndim must be at least 1.");if(2!==b.shape[b.ndim-1])throw Error("beale(x): x.shape[-1] must be 2.");var c=na()(a=b.shape).call(a,0,-1);a=new ("float32"===b.dtype?Float32Array:
Float64Array)(b.data.length/2);b=b.data;for(var e=b.length,h=a.length;0<h--;){e-=2;var k=b[e+0],l=b[e+1],n=1.5-k*(1-l),m=2.25-k*(1-l*l);k=2.625-k*(1-l*l*l);a[h]=n*n+m*m+k*k}return new fa(c,a)};fc.nIn=2;fc.nOut=3;fc.minima=fc.minima_global=fc.roots=[[3,.5]];fc.grad=function(b){b=V(b);if(1>b.ndim)throw Error("beale.grad(x): x.ndim must be at least 1.");if(2!==b.shape[b.ndim-1])throw Error("beale.grad(x): x.shape[-1] must be 2.");var a=b.shape,c=new ("float32"===b.dtype?Float32Array:Float64Array)(b.data.length);
b=b.data;for(var e=b.length;0<=(e-=2);){var h=b[e+0],k=b[e+1],l=1.5-h*(1-k),n=2.25-h*(1-k*k),m=2.625-h*(1-k*k*k);c[e+0]=2*(l*(k-1)+n*(k*k-1)+m*(k*k*k-1));c[e+1]=2*h*(1*l+k*(2*n+3*m*k))}return new fa(a,c)};fc.hess=function(b){var a;b=V(b);if(1>b.ndim)throw Error("beale.hess(x): x.ndim must be at least 1.");if(2!==b.shape[b.ndim-1])throw Error("beale.hess(x): x.shape[-1] must be 2.");var c=Int32Array.of.apply(Int32Array,Wa()(a=Za()(b.shape)).call(a,[2]));a=new ("float32"===b.dtype?Float32Array:Float64Array)(2*
b.data.length);b=b.data;for(var e=a.length,h=b.length;0<=(h-=2);){e-=4;var k=b[h+0],l=b[h+1],n=2.25-k*(1-l*l),m=2.625-k*(1-l*l*l);a[e+0]=2*((1-l)*(1-l)+(1-l*l)*(1-l*l)+(1-l*l*l)*(1-l*l*l));a[e+1]=a[e+2]=2*(1.5-2*(1-l)*k+4.5*l-4*(1-l*l)*k*l+7.875*l*l-6*(1-l*l*l)*k*l*l);a[e+3]=2*(1*k*k+4*k*k*l*l+2*n*k+9*k*k*l*l*l*l+6*m*k*l)}return new fa(c,a)};fc.lsq=function(b){var a;b=V(b);if(1>b.ndim)throw Error("beale.lsq(x): x.ndim must be at least 1.");if(2!==b.shape[b.ndim-1])throw Error("beale.lsq(x): x.shape[-1] must be 2.");
var c=na()(a=b.shape).call(a);a=new ("float32"===b.dtype?Float32Array:Float64Array)(b.data.length/2*3);c[c.length-1]=3;b=b.data;for(var e=b.length,h=a.length;0<=(e-=2);){h-=3;var k=b[e+0],l=b[e+1];a[h+0]=1.5-k*(1-l);a[h+1]=2.25-k*(1-l*l);a[h+2]=2.625-k*(1-l*l*l)}return new fa(c,a)};fc.lsq_jac=function(b){var a,c;b=V(b);if(1>b.ndim)throw Error("beale.lsq_jac(x): x.ndim must be at least 1.");if(2!==b.shape[b.ndim-1])throw Error("beale.lsq_jac(x): x.shape[-1] must be 2.");var e=Int32Array.of.apply(Int32Array,
Wa()(a=Za()(na()(c=b.shape).call(c,0,-1))).call(a,[3,2]));a=new ("float32"===b.dtype?Float32Array:Float64Array)(3*b.data.length);b=b.data;c=b.length;for(var h=a.length;0<=(c-=2);){h-=6;var k=b[c+0],l=b[c+1];a[h+0]=l-1;a[h+1]=1*k;a[h+2]=l*l-1;a[h+3]=2*k*l;a[h+4]=l*l*l-1;a[h+5]=3*k*l*l}return new fa(e,a)};ab()(fc);var gc=function(b){var a;b=V(b);if(1>b.ndim)throw Error("brown_badscale(x): x.ndim must be at least 1.");if(2!==b.shape[b.ndim-1])throw Error("brown_badscale(x): x.shape[-1] must be 2.");
var c=na()(a=b.shape).call(a,0,-1);a=new ("float32"===b.dtype?Float32Array:Float64Array)(b.data.length/2);b=b.data;for(var e=b.length,h=a.length;0<h--;){e-=2;var k=b[e+0],l=b[e+1],n=k-1E6,m=l-2E-6;k=k*l-2;a[h]=n*n+m*m+k*k}return new fa(c,a)};gc.nIn=2;gc.nOut=3;gc.minima=gc.minima_global=gc.roots=[[1E6,2E-6]];gc.grad=function(b){b=V(b);if(1>b.ndim)throw Error("brown_badscale.grad(x): x.ndim must be at least 1.");if(2!==b.shape[b.ndim-1])throw Error("brown_badscale.grad(x): x.shape[-1] must be 2.");
var a=b.shape,c=new ("float32"===b.dtype?Float32Array:Float64Array)(b.data.length);b=b.data;for(var e=b.length;0<=(e-=2);){var h=b[e+0],k=b[e+1],l=k-2E-6,n=h*k-2;c[e+0]=2*(h-1E6+n*k);c[e+1]=2*(l+n*h)}return new fa(a,c)};gc.hess=function(b){var a;b=V(b);if(1>b.ndim)throw Error("brown_badscale.hess(x): x.ndim must be at least 1.");if(2!==b.shape[b.ndim-1])throw Error("brown_badscale.hess(x): x.shape[-1] must be 2.");var c=Int32Array.of.apply(Int32Array,Wa()(a=Za()(b.shape)).call(a,[2]));a=new ("float32"===
b.dtype?Float32Array:Float64Array)(2*b.data.length);b=b.data;for(var e=a.length,h=b.length;0<=(h-=2);){e-=4;var k=b[h+0],l=b[h+1],n=k*l-2;a[e+0]=2*(1+l*l);a[e+1]=a[e+2]=2*(n+k*l);a[e+3]=2*(1+k*k)}return new fa(c,a)};gc.lsq=function(b){var a;b=V(b);if(1>b.ndim)throw Error("brown_badscale.lsq(x): x.ndim must be at least 1.");if(2!==b.shape[b.ndim-1])throw Error("brown_badscale.lsq(x): x.shape[-1] must be 2.");var c=na()(a=b.shape).call(a);a=new ("float32"===b.dtype?Float32Array:Float64Array)(b.data.length/
2*3);c[c.length-1]=3;b=b.data;for(var e=b.length,h=a.length;0<=(e-=2);){h-=3;var k=b[e+0],l=b[e+1];a[h+0]=k-1E6;a[h+1]=l-2E-6;a[h+2]=k*l-2}return new fa(c,a)};gc.lsq_jac=function(b){var a,c;b=V(b);if(1>b.ndim)throw Error("brown_badscale.lsq_jac(x): x.ndim must be at least 1.");if(2!==b.shape[b.ndim-1])throw Error("brown_badscale.lsq_jac(x): x.shape[-1] must be 2.");var e=Int32Array.of.apply(Int32Array,Wa()(a=Za()(na()(c=b.shape).call(c,0,-1))).call(a,[3,2]));a=new ("float32"===b.dtype?Float32Array:
Float64Array)(3*b.data.length);b=b.data;c=b.length;for(var h=a.length;0<=(c-=2);){h-=6;var k=b[c+0],l=b[c+1];a[h+0]=1;a[h+1]=0;a[h+2]=0;a[h+3]=1;a[h+4]=l;a[h+5]=k}return new fa(e,a)};ab()(gc);var hc=function(b){var a;b=V(b);if(1>b.ndim)throw Error("freudenstein_roth(x): x.ndim must be at least 1.");if(2!==b.shape[b.ndim-1])throw Error("freudenstein_roth(x): x.shape[-1] must be 2.");var c=na()(a=b.shape).call(a,0,-1);a=new ("float32"===b.dtype?Float32Array:Float64Array)(b.data.length/2);b=b.data;for(var e=
b.length,h=a.length;0<h--;){e-=2;var k=b[e+0],l=b[e+1],n=-13+k+((5-l)*l-2)*l;k=-29+k+((1+l)*l-14)*l;a[h]=n*n+k*k}return new fa(c,a)};hc.nIn=hc.nOut=2;hc.roots=[[5,4]];hc.minima_global=[[5,4]];hc.minima=[[5,4],[(53-Math.sqrt(352))/3,(2-Math.sqrt(22))/3]];hc.grad=function(b){b=V(b);if(1>b.ndim)throw Error("freudenstein_roth.grad(x): x.ndim must be at least 1.");if(2!==b.shape[b.ndim-1])throw Error("freudenstein_roth.grad(x): x.shape[-1] must be 2.");var a=b.shape,c=new ("float32"===b.dtype?Float32Array:
Float64Array)(b.data.length);b=b.data;for(var e=b.length;0<=(e-=2);){var h=b[e+0],k=b[e+1];c[e+0]=-84+4*h+(-32+12*k)*k;c[e+1]=864-(32-24*k)*h+(24+(-240+(8+(-40+12*k)*k)*k)*k)*k}return new fa(a,c)};hc.hess=function(b){var a;b=V(b);if(1>b.ndim)throw Error("freudenstein_roth.hess(x): x.ndim must be at least 1.");if(2!==b.shape[b.ndim-1])throw Error("freudenstein_roth.hess(x): x.shape[-1] must be 2.");var c=Int32Array.of.apply(Int32Array,Wa()(a=Za()(b.shape)).call(a,[2]));a=new ("float32"===b.dtype?Float32Array:
Float64Array)(2*b.data.length);b=b.data;for(var e=a.length,h=b.length;0<=(h-=2);){e-=4;var k=b[h+0],l=b[h+1],n=-13+k+((5-l)*l-2)*l;k=-29+k+((1+l)*l-14)*l;var m=(10-3*l)*l-2,p=(2+3*l)*l-14;a[e+0]=4;a[e+1]=a[e+2]=-32+24*l;a[e+3]=n*(20-12*l)+2*m*m+k*(4+12*l)+2*p*p}return new fa(c,a)};hc.lsq=function(b){var a;b=V(b);if(1>b.ndim)throw Error("freudenstein_roth.lsq(x): x.ndim must be at least 1.");if(2!==b.shape[b.ndim-1])throw Error("freudenstein_roth.lsq(x): x.shape[-1] must be 2.");var c=na()(a=b.shape).call(a);
a=new ("float32"===b.dtype?Float32Array:Float64Array)(b.data.length);b=b.data;for(var e=b.length;0<=(e-=2);){var h=b[e+0],k=b[e+1];a[e+0]=-13+h+((5-k)*k-2)*k;a[e+1]=-29+h+((1+k)*k-14)*k}return new fa(c,a)};hc.lsq_jac=function(b){var a;b=V(b);if(1>b.ndim)throw Error("freudenstein_roth.lsq_jac(x): x.ndim must be at least 1.");if(2>b.shape[b.ndim-1])throw Error("freudenstein_roth.lsq_jac(x): x.shape[-1] must be 2.");var c=2*(b.shape[b.ndim-1]-1),e=Int32Array.of.apply(Int32Array,Wa()(a=Za()(b.shape)).call(a,
[2]));a=new ("float32"===b.dtype?Float32Array:Float64Array)(b.data.length*c);b=b.data;c=b.length;for(var h=a.length;0<=(h-=4);){c-=2;var k=b[c+1];a[h+0]=1;a[h+1]=(10-3*k)*k-2;a[h+2]=1;a[h+3]=(2+3*k)*k-14}return new fa(e,a)};ab()(hc);var yd=function(b,a){return Math.atan2(b*(0>a||Pc()(a,-0)?-1:1),Math.abs(a))},ic=function(b){var a;b=V(b);if(1>b.ndim)throw Error("helical_valley(x): x.ndim must be at least 1.");if(3!==b.shape[b.ndim-1])throw Error("helical_valley(x): x.shape[-1] must be 3.");var c=na()(a=
b.shape).call(a,0,-1);a=new ("float32"===b.dtype?Float32Array:Float64Array)(b.data.length/3);b=b.data;for(var e=b.length,h=a.length;0<h--;){e-=3;var k=b[e+0],l=b[e+1],n=b[e+2],m=10*n-50*(yd(l,k)/Math.PI+(0>k));k=10*Nb()(l,k)-10;a[h]=m*m+k*k+n*n}return new fa(c,a)};ic.nIn=ic.nOut=3;ic.minima=ic.minima_global=ic.roots=[[1,0,0]];ic.grad=function(b){b=V(b);if(1>b.ndim)throw Error("helical_valley.grad(x): x.ndim must be at least 1.");if(3!==b.shape[b.ndim-1])throw Error("helical_valley.grad(x): x.shape[-1] must be 3.");
var a=b.shape,c=new ("float32"===b.dtype?Float32Array:Float64Array)(b.data.length);b=b.data;for(var e=b.length;0<=(e-=3);){var h=b[e+0],k=b[e+1],l=b[e+2],n=10*l-50*(yd(k,h)/Math.PI+(0>h));c[e+0]=100*(h*(2-2/Nb()(k,h))+k*n/(Math.PI*(k*k+h*h)));c[e+1]=100*(k*(2-2/Nb()(k,h))-h*n/(Math.PI*(k*k+h*h)));c[e+2]=20*n+2*l}return new fa(a,c)};ic.hess=function(b){var a;b=V(b);if(1>b.ndim)throw Error("helical_valley.hess(x): x.ndim must be at least 1.");if(3!==b.shape[b.ndim-1])throw Error("helical_valley.hess(x): x.shape[-1] must be 2.");
var c=Int32Array.of.apply(Int32Array,Wa()(a=Za()(b.shape)).call(a,[3]));a=new ("float32"===b.dtype?Float32Array:Float64Array)(3*b.data.length);b=b.data;for(var e=a.length,h=b.length;0<=(h-=3);){e-=9;var k=b[h+0],l=b[h+1],n=10*b[h+2]-50*(yd(l,k)/Math.PI+(0>k)),m=k*k+l*l;a[e+0]=200*(1-l*l/Math.pow(m,1.5)+(25*l/Math.PI-k*n)*l/(Math.PI*m*m));a[e+1]=100/Math.PI*n/m+200*k*l/Math.pow(m,1.5)-(5E3*k/Math.PI+200*l*n)*l/(Math.PI*m*m);a[e+2]=1E3/Math.PI*l/m;a[e+3]=a[e+1];a[e+4]=200*(1-k*k/Math.pow(m,1.5)+(25*
k/Math.PI+l*n)*k/(Math.PI*m*m));a[e+5]=-1E3/Math.PI*k/m;a[e+6]=a[e+2];a[e+7]=a[e+5];a[e+8]=202}return new fa(c,a)};ic.lsq=function(b){var a;b=V(b);if(1>b.ndim)throw Error("helical_valley.lsq(x): x.ndim must be at least 1.");if(3!==b.shape[b.ndim-1])throw Error("helical_valley.lsq(x): x.shape[-1] must be 3.");var c=na()(a=b.shape).call(a);a=new ("float32"===b.dtype?Float32Array:Float64Array)(b.data.length);b=b.data;for(var e=b.length;0<=(e-=3);){var h=b[e+0],k=b[e+1],l=b[e+2];a[e+0]=10*l-50*(yd(k,
h)/Math.PI+(0>h));a[e+1]=10*Nb()(k,h)-10;a[e+2]=l}return new fa(c,a)};ic.lsq_jac=function(b){var a;b=V(b);if(1>b.ndim)throw Error("helical_valley.lsq_jac(x): x.ndim must be at least 1.");if(3!==b.shape[b.ndim-1])throw Error("helical_valley.lsq_jac(x): x.shape[-1] must be 3.");var c=Int32Array.of.apply(Int32Array,Wa()(a=Za()(b.shape)).call(a,[3]));a=new ("float32"===b.dtype?Float32Array:Float64Array)(3*b.data.length);b=b.data;for(var e=b.length,h=a.length;0<=(e-=3);){h-=9;var k=b[e+0],l=b[e+1];a[h+
0]=50/Math.PI*l/(l*l+k*k);a[h+1]=-50/Math.PI*k/(l*l+k*k);a[h+2]=10;a[h+3]=10*k/Nb()(l,k);a[h+4]=10*l/Nb()(l,k);a[h+5]=0;a[h+6]=0;a[h+7]=0;a[h+8]=1}return new fa(c,a)};ab()(ic);var oh=function(b){function a(e){sb()(this,a);var h=c.call(this);if(0!==e%1)throw Error("new JennrichSampson(m): m not a valid integer.");if(!(1<e))throw Error("new JennrichSampson(m): m must be greater than 1.");var k=function m(n){var p;n=V(n);if(1>n.ndim)throw Error("".concat(m.name,"(x): x.ndim must be at least 1."));if(2!==
n.shape[n.ndim-1])throw Error("".concat(m.name,"(x): x.shape[-1] must be 2."));var t=na()(p=n.shape).call(p,0,-1);p=new ("float32"===n.dtype?Float32Array:Float64Array)(n.data.length/2);n=n.data;for(var v=m.nOut,u=n.length,x=p.length;0<x--;){u-=2;for(var w=n[u+0],y=n[u+1],z=0,B=v;0<B--;){var E=4+2*B-Math.exp((B+1)*w)-Math.exp((B+1)*y);z+=E*E}p[x]=z}return new fa(t,p)};10===e&&(k.minima_global=k.minima=[[.25782521321500884,.25782521321500884]]);k.roots=[];k.nOut=e;yc()(k,"name",{value:"jennrich_sampson".concat(e,
"d"),writable:!1});Ic()(k,a.prototype);return Vb()(h,ab()(k))}Yb()(a,b);var c=Ig(a);Ab()(a,[{key:"nIn",get:function(){return 2}},{key:"grad",value:function(e){e=V(e);if(1>e.ndim)throw Error("".concat(this.name,".grad(x): x.ndim must be at least 1."));if(2!==e.shape[e.ndim-1])throw Error("".concat(this.name,".grad(x): x.shape[-1] must be 2."));var h=e.shape,k=new ("float32"===e.dtype?Float32Array:Float64Array)(e.data.length);e=e.data;for(var l=this.nOut,n=e.length;0<=n;){n-=2;for(var m=e[n+0],p=e[n+
1],t=l;0<t--;){var v=4+2*t-Math.exp((t+1)*m)-Math.exp((t+1)*p);k[n+0]-=2*v*(t+1)*Math.exp((t+1)*m);k[n+1]-=2*v*(t+1)*Math.exp((t+1)*p)}}return new fa(h,k)}},{key:"hess",value:function(e){var h;e=V(e);if(1>e.ndim)throw Error("".concat(this.name,".hess(x): x.ndim must be at least 1."));if(2!==e.shape[e.ndim-1])throw Error("".concat(this.name,".hess(x): x.shape[-1] must be 2."));var k=Int32Array.of.apply(Int32Array,Wa()(h=Za()(e.shape)).call(h,[2]));h=new ("float32"===e.dtype?Float32Array:Float64Array)(2*
e.data.length);e=e.data;for(var l=this.nOut,n=h.length,m=e.length;0<=(m-=2);){n-=4;for(var p=e[m+0],t=e[m+1],v=l;0<v--;){var u=4+2*v-Math.exp((v+1)*p)-Math.exp((v+1)*t);h[n+0]+=2*(v+1)*(v+1)*(Math.exp((v+1)*p*2)-u*Math.exp((v+1)*p));h[n+3]+=2*(v+1)*(v+1)*(Math.exp((v+1)*t*2)-u*Math.exp((v+1)*t));h[n+1]+=2*(v+1)*(v+1)*Math.exp((v+1)*(p+t))}h[n+2]=h[n+1]}return new fa(k,h)}},{key:"lsq",value:function(e){var h;e=V(e);if(1>e.ndim)throw Error("".concat(this.name,".lsq(x): x.ndim must be at least 1."));
if(2!==e.shape[e.ndim-1])throw Error("".concat(this.name,".lsq(x): x.shape[-1] must be 2."));var k=this.nOut,l=na()(h=e.shape).call(h);h=new ("float32"===e.dtype?Float32Array:Float64Array)(e.data.length/2*k);l[l.length-1]=k;e=e.data;for(var n=e.length,m=h.length;0<=(m-=k);){n-=2;for(var p=e[n+0],t=e[n+1],v=k;0<v--;)h[m+v]=4+2*v-Math.exp((v+1)*p)-Math.exp((v+1)*t)}return new fa(l,h)}},{key:"lsq_jac",value:function(e){var h,k;e=V(e);var l=this.nOut;if(1>e.ndim)throw Error("".concat(this.name,".lsq_jac(x): x.ndim must be at least 1."));
if(2!==e.shape[e.ndim-1])throw Error("".concat(this.name,".lsq_jac(x): x.shape[-1] must be 2."));var n=Int32Array.of.apply(Int32Array,Wa()(h=Za()(na()(k=e.shape).call(k,0,-1))).call(h,[l,2]));h=new ("float32"===e.dtype?Float32Array:Float64Array)(e.data.length*l);e=e.data;k=e.length;for(var m=h.length;0<=(m-=2*l);){k-=2;for(var p=e[k+0],t=e[k+1],v=l;0<v--;)h[m+2*v+0]=-(v+1)*Math.exp((v+1)*p),h[m+2*v+1]=-(v+1)*Math.exp((v+1)*t)}return new fa(n,h)}}]);return a}(Hc()(Function)),Pi=d(189),Qi=d.n(Pi),cc=
function(b){var a;b=V(b);if(1>b.ndim)throw Error("powell_badscale(x): x.ndim must be at least 1.");if(2!==b.shape[b.ndim-1])throw Error("powell_badscale(x): x.shape[-1] must be 2.");var c=na()(a=b.shape).call(a,0,-1);a=new ("float32"===b.dtype?Float32Array:Float64Array)(b.data.length/2);b=b.data;for(var e=b.length,h=a.length;0<h--;){e-=2;var k=b[e+0],l=b[e+1],n=1E4*k*l-1;k=Math.exp(-k)+Math.exp(-l)-1.0001;a[h]=n*n+k*k}return new fa(c,a)};cc.nIn=cc.nOut=2;cc.minima_global=cc.roots=[[1.0981593296998175E-5,
9.106146739866524],[9.106146739866524,1.0981593296998175E-5]];cc.minima=function(){var b,a=Vd(function(c){return 1E4*(1E4*c*c-1)*c+Math.exp(-c)*(1E-4-Qi()(-c)-Math.exp(-c))},-.02,-5E-4);return Wa()(b=[]).call(b,Za()(cc.minima_global),[[a,a]])}();cc.grad=function(b){b=V(b);if(1>b.ndim)throw Error("powell_badscale.grad(x): x.ndim must be at least 1.");if(2!==b.shape[b.ndim-1])throw Error("powell_badscale.grad(x): x.shape[-1] must be 2.");var a=b.shape,c=new ("float32"===b.dtype?Float32Array:Float64Array)(b.data.length);
b=b.data;for(var e=b.length;0<=(e-=2);){var h=b[e+0],k=b[e+1],l=1E4*h*k-1,n=Math.exp(-h)+Math.exp(-k)-1.0001;c[e+0]=2*(1E4*l*k-n*Math.exp(-h));c[e+1]=2*(1E4*l*h-n*Math.exp(-k))}return new fa(a,c)};cc.hess=function(b){var a;b=V(b);if(1>b.ndim)throw Error("powell_badscale.hess(x): x.ndim must be at least 1.");if(2!==b.shape[b.ndim-1])throw Error("powell_badscale.hess(x): x.shape[-1] must be 2.");var c=Int32Array.of.apply(Int32Array,Wa()(a=Za()(b.shape)).call(a,[2]));a=new ("float32"===b.dtype?Float32Array:
Float64Array)(2*b.data.length);b=b.data;for(var e=a.length,h=b.length;0<=(h-=2);){e-=4;var k=b[h+0],l=b[h+1],n=1E4*k*l-1,m=Math.exp(-k)+Math.exp(-l)-1.0001;a[e+0]=2*(1E8*l*l+m*Math.exp(-k)+Math.exp(-2*k));a[e+1]=a[e+2]=2*(1E4*n+1E8*k*l+Math.exp(-k-l));a[e+3]=2*(1E8*k*k+m*Math.exp(-l)+Math.exp(-2*l))}return new fa(c,a)};cc.lsq=function(b){var a;b=V(b);if(1>b.ndim)throw Error("powell_badscale.lsq(x): x.ndim must be at least 1.");if(2!==b.shape[b.ndim-1])throw Error("powell_badscale.lsq(x): x.shape[-1] must be 2.");
var c=na()(a=b.shape).call(a);a=new ("float32"===b.dtype?Float32Array:Float64Array)(b.data.length);b=b.data;for(var e=b.length;0<=(e-=2);){var h=b[e+0],k=b[e+1];a[e+0]=1E4*h*k-1;a[e+1]=Math.exp(-h)+Math.exp(-k)-1.0001}return new fa(c,a)};cc.lsq_jac=function(b){var a;b=V(b);if(1>b.ndim)throw Error("powell_badscale.lsq_jac(x): x.ndim must be at least 1.");if(2!==b.shape[b.ndim-1])throw Error("powell_badscale.lsq_jac(x): x.shape[-1] must be 2.");var c=Int32Array.of.apply(Int32Array,Wa()(a=Za()(b.shape)).call(a,
[2]));a=new ("float32"===b.dtype?Float32Array:Float64Array)(2*b.data.length);b=b.data;for(var e=b.length,h=a.length;0<=(h-=4);){e-=2;var k=b[e+0],l=b[e+1];a[h+0]=1E4*l;a[h+1]=1E4*k;a[h+2]=-Math.exp(-k);a[h+3]=-Math.exp(-l)}return new fa(c,a)};ab()(cc);var of=function(){for(var b=function(e){return e+10*Math.PI*Math.sin(2*Math.PI*e)},a=[],c=1;32>c;c++){if(!(0>b(c-.25)))throw Error("Assertion failed.");if(!(0<b(c+.25)))throw Error("Assertion failed.");a.push(Vd(b,c-.25,c+.25))}ab()(a);return a}(),ph=
function(b){function a(e){sb()(this,a);var h=c.call(this);if(0!==e%1)throw Error("new Rastrigin(n): n not a valid integer.");if(!(0<e))throw Error("new Rastrigin(n): n must be positive.");var k=function m(n){var p,t;n=V(n);var v=m.nIn;if(1>n.ndim)throw Error("".concat(m.name,"(x): x.ndim must be at least 1."));if(n.shape[n.ndim-1]!==v)throw Error(Wa()(p="".concat(m.name,"(x): x.shape[-1] must be ")).call(p,v,"."));p=na()(t=n.shape).call(t,0,-1);t=new ("float32"===n.dtype?Float32Array:Float64Array)(n.data.length/
v);n=n.data;for(var u=n.length,x=t.length;0<x--;){u-=v;for(var w=v;0<w--;){var y=n[u+w];t[x]+=y*y+10*(1-Math.cos(2*Math.PI*y))}}return new fa(p,t)};k.nIn=e;k.roots=k.minima_global=[qb()({length:e},function(){return 0})];k.minima=Je()({},ee.a,Ga.a.mark(function m(){var p,t,v,u,x,w,y;return Ga.a.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,qb()({length:e},function(){return 0});case 2:t=[0],v=0;case 4:if(!(v<of.length)){z.next=20;break}x=of[v];p=t;t=Wa()(u=[-x]).call(u,Za()(p),
[+x]);w=qb()({length:e},function(){return t});y=0;case 10:if(!(y<e)){z.next=17;break}w[y]=[-x,+x];return z.delegateYield(Cc.apply(void 0,Za()(w)),"t0",13);case 13:w[y]=p;case 14:y++;z.next=10;break;case 17:v++;z.next=4;break;case 20:case "end":return z.stop()}},m)}));yc()(k,"name",{value:"rastrigin".concat(e,"d"),writable:!1});Ic()(k,a.prototype);return Vb()(h,ab()(k))}Yb()(a,b);var c=Kg(a);Ab()(a,[{key:"nOut",get:function(){return this.nIn}},{key:"grad",value:function(e){var h;e=V(e);var k=this.nIn;
if(1>e.ndim)throw Error("".concat(this.name,".grad(x): x.ndim must be at least 1."));if(e.shape[e.ndim-1]!==k)throw Error(Wa()(h="".concat(this.name,".grad(x): x.shape[-1] must be ")).call(h,k,"."));h=e.shape;var l=new ("float32"===e.dtype?Float32Array:Float64Array)(e.data.length);e=e.data;for(var n=e.length;0<=n;){n-=k;for(var m=k;0<m--;){var p=e[n+m];l[n+m]=2*p+20*Math.PI*Math.sin(2*Math.PI*p)}}return new fa(h,l)}},{key:"hess",value:function(e){var h,k;e=V(e);var l=this.nIn;if(1>e.ndim)throw Error("".concat(this.name,
".hess(x): x.ndim must be at least 1."));if(e.shape[e.ndim-1]!==l)throw Error(Wa()(h="".concat(this.name,".hess(x): x.shape[-1] must be ")).call(h,l,"."));h=Int32Array.of.apply(Int32Array,Wa()(k=Za()(e.shape)).call(k,[l]));k=new ("float32"===e.dtype?Float32Array:Float64Array)(e.data.length*l);e=e.data;for(var n=k.length,m=e.length;0<=(m-=l);){n-=l*l;for(var p=l;0<p--;)k[n+l*p+p]+=2+Math.PI*Math.PI*40*Math.cos(2*Math.PI*e[m+p])}return new fa(h,k)}},{key:"lsq",value:function(e){var h;e=V(e);var k=this.nIn;
if(1>e.ndim)throw Error("".concat(this.name,".lsq(x): x.ndim must be at least 1."));if(e.shape[e.ndim-1]!==k)throw Error(Wa()(h="".concat(this.name,".lsq(x): x.shape[-1] must be ")).call(h,k,"."));h=e.shape;var l=new ("float32"===e.dtype?Float32Array:Float64Array)(e.data.length);e=e.data;for(var n=e.length,m=l.length;0<=(m-=k);){n-=k;for(var p=k;0<p--;){var t=e[n+p];l[m+p]=Math.sqrt(t*t+10*(1-Math.cos(2*Math.PI*t)))}}return new fa(h,l)}},{key:"lsq_jac",value:function(e){var h,k;e=V(e);var l=this.nIn;
if(1>e.ndim)throw Error("".concat(this.name,".lsq_jac(x): x.ndim must be at least 1."));if(e.shape[e.ndim-1]!==l)throw Error(Wa()(h="".concat(this.name,".lsq_jac(x): x.shape[-1] must be ")).call(h,l,"."));h=Int32Array.of.apply(Int32Array,Wa()(k=Za()(e.shape)).call(k,[l]));k=new ("float32"===e.dtype?Float32Array:Float64Array)(e.data.length*l);e=e.data;for(var n=e.length,m=k.length;0<=(m-=l*l);){n-=l;for(var p=l;0<p--;){var t=e[n+p],v=Math.sqrt(t*t+10*(1-Math.cos(2*Math.PI*t)));0!==v&&(k[m+l*p+p]=(t+
10*Math.PI*Math.sin(2*Math.PI*t))/v)}}return new fa(h,k)}}]);return a}(Hc()(Function)),qh=function(b){function a(e){sb()(this,a);var h=c.call(this);if(0!==e%1)throw Error("new Rosenbrock(n): n not a valid integer.");if(!(1<e))throw Error("new Rosenbrock(n): n must be greater than 1.");var k=function m(n){var p,t;n=V(n);var v=m.nIn;if(1>n.ndim)throw Error("".concat(m.name,"(x): x.ndim must be at least 1."));if(n.shape[n.ndim-1]!==v)throw Error(Wa()(p="".concat(m.name,"(x): x.shape[-1] must be ")).call(p,
v,"."));p=na()(t=n.shape).call(t,0,-1);t=new ("float32"===n.dtype?Float32Array:Float64Array)(n.data.length/v);n=n.data;for(var u=n.length,x=t.length;0<x--;){u-=v;for(var w=v-1;0<w--;){var y=n[u+w],z=n[u+w+1]-y*y;y=1-y;t[x]+=100*z*z+y*y}}return new fa(p,t)};2==e?k.minima=[[1,1]]:3==e&&(k.minima=[[1,1,1]]);7>=e&&(k.roots=[qb()({length:e},function(){return 1})]);7>=e&&(k.minima_global=[qb()({length:e},function(){return 1})]);k.nIn=e;yc()(k,"name",{value:"rosenbrock".concat(e,"d"),writable:!1});Ic()(k,
a.prototype);return Vb()(h,ab()(k))}Yb()(a,b);var c=Mg(a);Ab()(a,[{key:"nOut",get:function(){return 2*this.nIn-2}},{key:"grad",value:function(e){var h;e=V(e);var k=this.nIn;if(1>e.ndim)throw Error("".concat(this.name,".grad(x): x.ndim must be at least 1."));if(e.shape[e.ndim-1]!==k)throw Error(Wa()(h="".concat(this.name,".grad(x): x.shape[-1] must be ")).call(h,k,"."));h=e.shape;var l=new ("float32"===e.dtype?Float32Array:Float64Array)(e.data.length);e=e.data;for(var n=e.length;0<=n;){n-=k;for(var m=
k;0<m--;){var p=e[n+m-1],t=e[n+m],v=e[n+m+1];m<k-1&&(l[n+m]=400*(t*t-v)*t-2*(1-t));0<m&&(l[n+m]+=200*(t-p*p))}}return new fa(h,l)}},{key:"hess",value:function(e){var h,k;e=V(e);var l=this.nIn;if(1>e.ndim)throw Error("".concat(this.name,".hess(x): x.ndim must be at least 1."));if(e.shape[e.ndim-1]!==l)throw Error(Wa()(h="".concat(this.name,".hess(x): x.shape[-1] must be ")).call(h,l,"."));h=Int32Array.of.apply(Int32Array,Wa()(k=Za()(e.shape)).call(k,[l]));k=new ("float32"===e.dtype?Float32Array:Float64Array)(e.data.length*
l);e=e.data;for(var n=k.length,m=e.length;0<=(m-=l);){n-=l*l;for(var p=l;0<p--;)if(0<p&&(k[n+l*p+p]=200,k[n+l*(p-1)+p]=k[n+l*p+(p-1)]=-400*e[m+p-1]),p<l-1){var t=e[m+p];k[n+l*p+p]-=400*e[m+p+1]-1200*t*t-2}}return new fa(h,k)}},{key:"lsq",value:function(e){var h,k;e=V(e);var l=this.nIn,n=this.nOut;if(1>e.ndim)throw Error("".concat(this.name,".lsq(x): x.ndim must be at least 1."));if(e.shape[e.ndim-1]!==l)throw Error(Wa()(h="".concat(this.name,".lsq(x): x.shape[-1] must be ")).call(h,l,"."));h=na()(k=
e.shape).call(k);k=new ("float32"===e.dtype?Float32Array:Float64Array)(e.data.length/l*n);h[h.length-1]=n;e=e.data;for(var m=e.length,p=k.length;0<=(p-=n);){m-=l;for(var t=l-1;0<t--;){var v=e[m+t],u=1-v;k[p+2*t+0]=10*(e[m+t+1]-v*v);k[p+2*t+1]=u}}return new fa(h,k)}},{key:"lsq_jac",value:function(e){var h,k,l;e=V(e);var n=this.nIn,m=this.nOut;if(1>e.ndim)throw Error("".concat(this.name,".lsq_jac(x): x.ndim must be at least 1."));if(e.shape[e.ndim-1]!==n)throw Error(Wa()(h="".concat(this.name,".lsq_jac(x): x.shape[-1] must be ")).call(h,
n,"."));h=Int32Array.of.apply(Int32Array,Wa()(k=Za()(na()(l=e.shape).call(l,0,-1))).call(k,[m,n]));k=new ("float32"===e.dtype?Float32Array:Float64Array)(e.data.length*m);e=e.data;l=e.length;for(var p=k.length;0<=(p-=m*n);){l-=n;for(var t=n-1;0<t--;){var v=t+1;k[p+2*n*t+t]+=-20*e[l+t];k[p+2*n*t+v]+=10;--k[p+n*(2*t+1)+t]}}return new fa(h,k)}}]);return a}(Hc()(Function)),hf=function(b){function a(){sb()(this,a);return c.apply(this,arguments)}Yb()(a,b);var c=Le(a);return a}(Hc()(Error)),Gc=function(b){function a(){sb()(this,
a);return c.apply(this,arguments)}Yb()(a,b);var c=Le(a);return a}(hf),Pg=Ga.a.mark(Me),Ri=function(b,a){if(0!==b.length%1)throw Error("Assertion failed.");if(0!==a.length%1)throw Error("Assertion failed.");if(b.length!==a.length)throw Error("Assertion failed.");for(var c=0,e=b.length;0<e--;)c+=b[e]*a[e];return c},Xe=function(){function b(a,c){sb()(this,b);if(0!==a%1)throw Error("Assertion failed.");if(0!==c%1)throw Error("Assertion failed.");if(!(0<a))throw Error("Assertion failed.");if(!(0<c))throw Error("Assertion failed.");
this.m=0;this.M=a|0;this.N=c|0;this._scale=1;this.dX=new Float64Array(a*c);this.dG=new Float64Array(a*c);this.dXdX=new Float64Array(a*a);this.dXdG=new Float64Array(a*a);this.dGdG=new Float64Array(a*a);this.D=new Float64Array(a);this._J=new Float64Array(a*a);this._J_invalid=!0;this.travels=new Float64Array(c);this.Bdx=new Float64Array(2*a);this.Bg=new Float64Array(2*a);this.Bei=new Float64Array(2*a);this.M_WAAW=new Float64Array(4*a*a);this.P=new Int32Array(2*a)}Ab()(b,[{key:"J",get:function(){var a=
this.m,c=this.M,e=this.dXdX,h=this.dXdG,k=this.scale,l=this._J;if(this._J_invalid){this._J_invalid=!1;for(var n=0;n<a;n++)for(var m=0;m<=n;m++)l[c*n+m]=k*e[c*n+m];for(e=0;e<a;e++)for(k=0;k<=e;k++)for(n=0;n<k;n++)l[c*e+k]+=h[c*e+n]/h[c*n+n]*h[c*k+n];me(a,c,l,0)}return l}},{key:"scale",get:function(){return this._scale},set:function(a){a*=1;if(isNaN(a))throw Error("Assertion failed.");if(!(0<a))throw Error("Assertion failed.");this._scale!==a&&(this._scale=a,this._J_invalid=!0)}},{key:"forget",value:function(a){var c=
this.m,e=this.M,h=this.N,k=this.dX,l=this.dXdX,n=this.dG,m=this.dXdG,p=this.dGdG,t=this.D;if(c>e)throw Error("Assertion failed.");if(0!==a%1)throw Error("Assertion failed.");if(!(0<a))throw Error("Assertion failed.");if(!(a<=c))throw Error("Assertion failed.");var v=0;for(k=[k,n];v<k.length;v++){n=k[v];for(var u=a;u<c;u++)for(var x=0;x<h;x++)n[h*(u-a)+x]=n[h*u+x]}h=0;for(l=[l,m,p];h<l.length;h++)for(m=l[h],p=a;p<c;p++)for(v=a;v<c;v++)m[e*(p-a)+(v-a)]=m[e*p+v];for(e=a;e<c;e++)t[e-a]=t[e];this.m=c-
a;this._J_invalid=!0}},{key:"update",value:function(a,c){var e=this.M,h=this.N,k=this.dX,l=this.dXdX,n=this.dG,m=this.dXdG,p=this.dGdG,t=this.D;if(h!==a.length)throw Error("Assertion failed.");if(h!==c.length)throw Error("Assertion failed.");this.m>=e&&this.forget(1);this.m++;var v=this.m,u=v-1;if(v>e)throw Error("Assertion failed.");for(var x=0;x<h;x++)k[h*u+x]=a[x];for(a=0;a<h;a++)n[h*u+a]=c[a];for(c=0;c<v;c++){for(x=a=0;x<h;x++)a+=k[h*u+x]*k[h*c+x];l[e*u+c]=l[e*c+u]=a}for(l=0;l<v;l++){for(c=m[e*
u+l]=0;c<h;c++)m[e*u+l]+=k[h*u+c]*n[h*l+c];for(c=m[e*l+u]=0;c<h;c++)m[e*l+u]+=k[h*l+c]*n[h*u+c]}t[u]=Math.sqrt(m[e*u+u]);for(k=0;k<v;k++){for(t=m=0;t<h;t++)m+=n[h*u+t]*n[h*k+t];p[e*u+k]=p[e*k+u]=m}this._J_invalid=!0}},{key:"_compute_Bv",value:function(a,c){var e=this.m,h=this.M,k=this.N,l=this.dG,n=this.dXdG,m=this.dX,p=this.J,t=this.D,v=this.scale;if(a.length!==2*h)throw Error("Assertion failed.");if(c.length!==k)throw Error("Assertion failed.");for(var u=2*e;u-- >e;)a[u]*=-1;le(e,h,1,p,0,a,e);for(p=
0;p<e;p++)a[p]/=t[p];for(t=1;t<e;t++)for(p=0;p<t;p++)a[p]+=n[h*t+p]*a[e+t]/n[h*p+p];for(h=k;0<h--;)for(n=e;0<n--;)c[h]+=m[k*n+h]*a[e+n]*v;for(m=k;0<m--;)for(v=e;0<v--;)c[m]+=l[k*v+m]*a[v]}},{key:"compute_Bv",value:function(a,c){var e=this.N,h=this.scale,k=this.Bg;if(a.length!==e)throw Error("Assertion failed.");for(this.compute_bv(a,k);0<e--;)c[e]=a[e]*h;this._compute_Bv(k,c)}},{key:"compute_bv",value:function(a,c){var e=this.m,h=this.M,k=this.N,l=this.dG,n=this.dXdG,m=this.dX,p=this.J,t=this.D,v=
this.scale;if(a.length!==k)throw Error("Assertion failed.");if(c.length!==2*h)throw Error("Assertion failed.");Ja()(c).call(c,0,0,2*e);for(var u=0;u<e;u++)for(var x=0;x<k;x++)c[u]+=l[k*u+x]*a[x];for(l=1;l<e;l++)for(u=0;u<l;u++)c[e+l]+=n[h*l+u]*c[u]/n[h*u+u];for(n=0;n<e;n++)c[n]/=t[n];for(t=0;t<e;t++)for(n=0;n<k;n++)c[e+t]+=m[k*t+n]*a[n]*v;od(e,h,1,p,0,c,e)}},{key:"compute_be",value:function(a,c){var e=this.m,h=this.M,k=this.N,l=this.dG,n=this.dXdG,m=this.dX,p=this.J,t=this.D,v=this.scale;if(0!==a%
1)throw Error("Assertion failed.");a|=0;if(!(0<=a))throw Error("Assertion failed.");if(!(a<k))throw Error("Assertion failed.");if(c.length!==2*h)throw Error("Assertion failed.");Ja()(c).call(c,0,0,2*e);for(var u=0;u<e;u++)c[u]+=l[k*u+a];for(l=1;l<e;l++)for(u=0;u<l;u++)c[e+l]+=n[h*l+u]*c[u]/n[h*u+u];for(n=0;n<e;n++)c[n]/=t[n];for(t=0;t<e;t++)c[e+t]+=m[k*t+a]*v;od(e,h,1,p,0,c,e)}},{key:"compute_ubbv",value:function(a,c,e){var h=this.m,k=this.M;c*=this.scale;if(isNaN(c))throw Error("Assertion failed.");
if(a.length!==2*k)throw Error("Assertion failed.");if(e.length!==2*k)throw Error("Assertion failed.");k=0;for(var l=2*h;l-- >h;)k-=a[l]*e[l];for(;0<h--;)k+=a[h]*e[h];return k+c}},{key:"compute_cauchyGeneralized",value:function(a,c,e,h){var k,l,n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:!0,m=this.m,p=this.N,t=this.Bg,v=this.Bdx,u=this.Bei,x=this.scale,w=this.travels;if(a.length!==p)throw Error("Assertion failed.");if(c.length!==p)throw Error("Assertion failed.");if(e.length!==2*p)throw Error("Assertion failed.");
if(h.length!==p)throw Error("Assertion failed.");if(!Hb()(k=Qc()(l=na()(h).call(h)).call(l,function(W,ba){return W-ba})).call(k,function(W,ba){return W===ba}))throw Error("Assertion failed.");for(k=p;0<k--;){if(!(c[k]>=e[2*k]))throw Error("Assertion failed.");if(!(c[k]<=e[2*k+1]))throw Error("Assertion failed.");}for(;0<p--;)if(0===a[p])w[p]=Infinity;else{k=e[2*p+(0>a[p])];w[p]=(c[p]-k)/a[p];if(!(0<=w[p]))throw Error("Assertion failed: "+w[p]);for(l=0;0>Ib()(a[p])*(c[p]-w[p]*a[p]-k);){if(2<++l)throw Error("Assertion failed.");
w[p]=Fc(w[p])}if(0>a[p]&&c[p]-w[p]*a[p]>k)throw Error("Assertion failed.");if(0<a[p]&&c[p]-w[p]*a[p]<k)throw Error("Assertion failed.");}k=p=0;this.compute_bv(a,t);Ja()(v).call(v,0,0,2*m);var y=Ri(a,a),z=this.compute_ubbv(t,y,t);l=0;var B=Me(h,function(W,ba){var ja=w[W],ma=w[ba];return ja<ma?-1:ja>ma?1:Math.abs(a[ba])-Math.abs(a[W])});B=$b(B);var E;try{a:for(B.s();!(E=B.n()).done;){var D=E.value;if(0===a[D]){var I=$b(h.subarray(k)),K;try{for(I.s();!(K=I.n()).done;){var Q=K.value;if(!(Number.MAX_VALUE<
w[Q]))throw Error("Assertion failed.");if(0!==a[Q])throw Error("Assertion failed.");}}catch(W){I.e(W)}finally{I.f()}break a}var P=e[2*D+(0>a[D])],M=w[D]-p;if(!(0<=M))throw Error("Assertion failed.");if(0===M){c[D]=P;p=w[D];++k;continue a}var N=Math.min(M,y/z);if(!(n||N>=M))break a;if(0<N){for(var R=2*m;0<R--;)v[R]-=N*t[R];p+=N}if(n&&!(N>=M))break a;p=w[D];this.compute_be(D,u);var S=this.compute_ubbv(u,-p*a[D],v),U=this.compute_ubbv(u,1,u),T=this.compute_ubbv(u,a[D],t);y-=a[D]*(a[D]+S)+M*z;z+=a[D]*
(a[D]*U-2*T);for(R=2*m;0<R--;)t[R]-=a[D]*u[R];l+=a[D]*a[D]*p*(p*x/2-1);c[D]=P;a[D]*=1-p*x;++k}}catch(W){B.e(W)}finally{B.f()}n=$b(h.subarray(k));var Y;try{for(n.s();!(Y=n.n()).done;){var aa=Y.value;l+=a[aa]*a[aa]*p*(p*x/2-1);c[aa]-=p*a[aa];a[aa]*=1-p*x;if(!(c[aa]>=e[2*aa]))throw Error("Assertion failed.");if(!(c[aa]<=e[2*aa+1]))throw Error("Assertion failed.");}}catch(W){n.e(W)}finally{n.f()}l+=.5*this.compute_ubbv(v,0,v);this._compute_Bv(v,a);return[k,l]}},{key:"compute_subspace_Hv",value:function(a,
c,e,h){var k,l,n=this.m,m=this.M,p=this.N,t=this.dX,v=this.dXdG,u=this.dG,x=this.dGdG,w=this.M_WAAW,y=this.Bei,z=this.scale;if(!(e instanceof Int32Array))throw Error("Assertion failed.");if(a.length!==p)throw Error("Assertion failed.");if(c.length!==p)throw Error("Assertion failed.");if(e.length!==p)throw Error("Assertion failed.");if(0!==h%1)throw Error("Assertion failed.");if(!(0<=h))throw Error("Assertion failed.");if(!(h<=p))throw Error("Assertion failed.");if(!Hb()(k=Qc()(l=na()(e).call(e)).call(l,
function(sa,qa){return sa-qa})).call(k,function(sa,qa){return sa===qa}))throw Error("Assertion failed.");k=e.subarray(h);for(l=0;l<n;l++){var B=0,E=$b(k),D;try{for(E.s();!(D=E.n()).done;){var I=D.value;B+=u[p*l+I]*a[I]}}catch(sa){E.e(sa)}finally{E.f()}y[l]=B/z}for(D=0;D<n;D++){I=0;l=$b(k);var K;try{for(l.s();!(K=l.n()).done;){var Q=K.value;I+=t[p*D+Q]*a[Q]}}catch(sa){l.e(sa)}finally{l.f()}y[n+D]=I}if(0<h){e=e.subarray(0,h);for(h=0;h<n;h++)for(K=0;K<=h;K++){Q=0;D=$b(e);var P;try{for(D.s();!(P=D.n()).done;){var M=
P.value;Q+=u[p*h+M]*u[p*K+M]}}catch(sa){D.e(sa)}finally{D.f()}w[2*n*h+K]=Q}for(P=0;P<n;P++)for(M=0;M<n;M++){h=0;K=$b(e);var N;try{for(K.s();!(N=K.n()).done;){var R=N.value;h+=t[p*P+R]*u[p*M+R]}}catch(sa){K.e(sa)}finally{K.f()}w[2*n*(n+P)+M]=h}for(N=0;N<n;N++)for(R=0;R<=N;R++){P=0;M=$b(e);var S;try{for(M.s();!(S=M.n()).done;){var U=S.value;P+=t[p*N+U]*t[p*R+U]}}catch(sa){M.e(sa)}finally{M.f()}w[2*n*(n+N)+(n+R)]=P*z}}else for(S=0;S<2*n;S++)for(U=0;U<=S;U++)w[2*n*S+U]=0;for(S=0;S<n;S++)for(U=0;U<=S;U++)w[2*
n*S+U]-=x[m*S+U],w[2*n*S+U]/=z;for(x=0;x<n;x++)w[2*n*x+x]-=v[m*x+x];for(x=0;x<n;x++)for(S=x;S<n;S++)w[2*n*(n+x)+S]-=v[m*x+S];0<n&&(m=this.Bdx,v=this.P,Od(2*n,2*n,w,0,v,0),Pd(2*n,2*n,1,w,0,v,0,y,0,m));Ja()(c).call(c,0,0,p);for(w=0;w<n;w++){m=$b(k);var T;try{for(m.s();!(T=m.n()).done;){var Y=T.value;c[Y]+=u[p*w+Y]*y[w]}}catch(sa){m.e(sa)}finally{m.f()}}u=$b(k);var aa;try{for(u.s();!(aa=u.n()).done;)c[aa.value]/=z}catch(sa){u.e(sa)}finally{u.f()}for(aa=0;aa<n;aa++){u=$b(k);var W;try{for(u.s();!(W=u.n()).done;){var ba=
W.value;c[ba]+=t[p*aa+ba]*y[n+aa]}}catch(sa){u.e(sa)}finally{u.f()}}n=$b(k);var ja;try{for(n.s();!(ja=n.n()).done;){var ma=ja.value;c[ma]+=a[ma]/z}}catch(sa){n.e(sa)}finally{n.f()}}},{key:"compute_Hv",value:function(a,c){var e=this.m,h=this.M,k=this.N,l=this.dX,n=this.dXdG,m=this.dG,p=this.dGdG,t=this.M_WAAW,v=this.Bei,u=this.scale;if(a.length!==k)throw Error("Assertion failed.");if(c.length!==k)throw Error("Assertion failed.");for(var x=0;x<e;x++){for(var w=0,y=0;y<k;y++)w+=m[k*x+y]*a[y];v[x]=w/
u}for(x=0;x<e;x++){for(y=w=0;y<k;y++)w+=l[k*x+y]*a[y];v[e+x]=w}for(x=0;x<2*e;x++)for(w=0;w<=x;w++)t[2*e*x+w]=0;for(x=0;x<e;x++)for(w=0;w<=x;w++)t[2*e*x+w]-=p[h*x+w],t[2*e*x+w]/=u;for(p=0;p<e;p++)t[2*e*p+p]-=n[h*p+p];for(p=0;p<e;p++)for(x=p;x<e;x++)t[2*e*(e+p)+x]-=n[h*p+x];0<e&&(h=this.Bdx,n=this.P,Od(2*e,2*e,t,0,n,0),Pd(2*e,2*e,1,t,0,n,0,v,0,h));Ja()(c).call(c,0,0,k);for(t=0;t<e;t++)for(h=0;h<k;h++)c[h]+=m[k*t+h]*v[t];for(m=0;m<k;m++)c[m]/=u;for(m=0;m<e;m++)for(t=0;t<k;t++)c[t]+=l[k*m+t]*v[e+m];for(e=
0;e<k;e++)c[e]+=a[e]/u}}]);return b}(),pf=function(b,a){if(0!==b.length%1)throw Error("Assertion failed.");if(0!==a.length%1)throw Error("Assertion failed.");if(b.length!==a.length)throw Error("Assertion failed.");for(var c=0,e=b.length;0<e--;)c+=b[e]*a[e];return c},Sg=function(){function b(a,c,e){var h,k,l=e.updateTol,n=e.historySize;e=e.scaleInit;sb()(this,b);if(!(a instanceof Function))throw Error("new TrustRegionSolverLBFGS(fg, x0, updateTol): fg must be Function.");e*=1;if(!(0<e))throw Error("TrustRegionSolverLBFGS(fg,x0,opt): opt.scaleInit must be greater than 0.");
if(!isFinite(e))throw Error("TrustRegionSolverLBFGS(fg,x0,opt): opt.scaleInit must be greater than 0.");this.fg=a;this.report_x=c=ia("float64",c);if(1!==c.ndim)throw Error("new TrustRegionSolverLBFGS(fg, x0, updateTol): x0.ndim must be 1.");a=a(new fa(c.shape,na()(h=c.data).call(h)));a=ea()(a,2);h=a[0];a=a[1];this.report_loss=h*=1;this.report_loss_grad=a=ia("float64",a);if(isNaN(h))throw Error("new TrustRegionSolverLBFGS(fg, x0, updateTol): fg must have signature float[N] => [float,float[N]].");if(1!==
a.ndim)throw Error("new TrustRegionSolverLBFGS(fg, x0, updateTol): fg must have signature float[N] => [float,float[N]].");var m=ea()(c.shape,1)[0];if(a.shape[0]!==m)throw Error("new TrustRegionSolverLBFGS(fg, x0, updateTol): fg must have signature float[N] => [float,float[N]].");this.M=n;this.N=m;this.scaleInit=e=1/e;this.lbfgs=new Xe(n,m);this.lbfgs.scale=e;this.D=new Float64Array(m);Ja()(k=this.D).call(k,Math.sqrt(e));this.X0=Float64Array.from(c);this.G0=Float64Array.from(a);this.last_X=Float64Array.from(c);
this.last_G=Float64Array.from(a);this.dg=new Float64Array(m);this.loss=h;this.bv=new Float64Array(2*n);this.newton_dX=new Float64Array(m);this.updateTol=l;this._report_state=1;jc()(this)}Ab()(b,[{key:"wiggle",value:function(){var a=this.lbfgs,c=a.m;if(0===c)throw new Gc("Too many unsuccessfull iterations.");if(!(0<c))throw Error("Assertion failed.");a.forget(a.m+1>>>1)}},{key:"report",value:function(){if(1!==this._report_state)throw Error("TrustRegionSolverLSQ::report: can only be called once after each makeConsideredMove() but not directly after considerMove(dX).");
this._report_state=2;var a=[this.report_x,this.report_loss,this.report_loss_grad];this.report_x=this.report_loss_grad=null;this.report_loss=NaN;return a}},{key:"considerMove",value:function(a){var c=this.N,e=this.D,h=this.updateTol,k=this.lbfgs,l=this.loss,n=this.bv,m=this.X0,p=this.G0,t=this.dg,v=this.last_X,u=this.last_G;this._report_state=3;if(c!==a.length)throw Error("Assertion failed.");for(var x=Int32Array.of(c),w=new Float64Array(c),y=c;0<y--;)w[y]=m[y]+a[y];y=this.fg(new fa(x,na()(w).call(w)));
y=ea()(y,2);var z=y[0];y=y[1];z*=1;y=ia("float64",y);if(isNaN(z))throw Error("Assertion failed.");if(1!==y.ndim)throw Error("Assertion failed.");if(y.shape[0]!==c)throw Error("Assertion failed.");this.report_x=new fa(x,w);this.report_loss=z;this.report_loss_grad=y;y=y.data;for(x=c;0<x--;)w[x]-=m[x];for(x=c;0<x--;)l+=p[x]*w[x];k.compute_bv(w,n);l+=.5*k.compute_ubbv(n,pf(w,w),n);for(p=c;0<p--;)t[p]=y[p]-u[p];for(p=c;0<p--;)w[p]=m[p]+a[p],w[p]-=v[p];p=Ya()(t).call(t,function(I,K){return Math.max(I,Math.abs(K))},
0);if(0<p){z=x=0;for(var B=c;0<B--;){var E=w[B]/p,D=t[B]/p;x+=D*D;z+=E*D}if(1<=x){if(!isFinite(z))throw Error("Assertion failed.");if(h*x<z){k.update(w,t);k.scale=x/z;for(h=c;0<h--;){k.compute_be(h,n);t=k.compute_ubbv(n,1,n);if(!(0<t))throw Error("Assertion failed: LBFGS model not positive definite.");e[h]=Math.max(e[h],Math.sqrt(t))}for(e=c;0<e--;)v[e]=m[e]+a[e];for(v=c;0<v--;)u[v]=y[v]}}}for(;0<c--;)w[c]=m[c]+a[c];return[l,this.report_loss]}},{key:"makeConsideredMove",value:function(){if(3!==this._report_state)throw Error("Assertion failed.");
this._report_state=1;this.loss=this.report_loss;for(var a=this.N,c=this.X0,e=this.G0,h=this.report_x.data,k=this.report_loss_grad.data,l=a;0<l--;)c[l]=h[l];for(;0<a--;)e[a]=k[a]}},{key:"scaledNorm",value:function(a){var c=this.N,e=this.D;if(a.length!==c)throw Error("Assertion failed.");for(var h=new Mb;0<c--;)h.include(e[c]*a[c]);return h.result}},{key:"cauchyTravel",value:function(){for(var a=this.lbfgs,c=this.G0,e=this.bv,h=0,k=this.N;0<k--;)h+=c[k]*c[k];a.compute_bv(c,e);a=a.compute_ubbv(e,pf(c,
c),e);if(isNaN(a))throw Error("Assertion failed: "+a);return 0===h?0:0===a?-Infinity:-h/a}},{key:"computeNewton",value:function(){var a=this.N,c=this.newton_dX;this.lbfgs.compute_Hv(this.G0,c);if(Wb()(c).call(c,isNaN))throw Error("Assertion failed.");for(;0<a--;)c[a]*=-1}}]);return b}(),qf=function(){function b(a,c){var e;sb()(this,b);if(!(a instanceof Function))throw Error("new TrustRegionSolverLSQ(fJ, x0): fJ must be Function.");this.fJ=a;this.report_x=c=ia("float64",c);if(1!==c.ndim)throw Error("new TrustRegionSolverLSQ(fJ, x0): x0.ndim must be 1.");
a=a(new fa(c.shape,na()(e=c.data).call(e)));a=ea()(a,2);e=a[0];a=a[1];this.report_f=e=ia("float64",e);this.report_J=a=ia("float64",a);if(1!==e.ndim)throw Error("new TrustRegionSolverLSQ(fJ, x0): fJ(x) returned [f,J] with f.ndim !== 1.");if(2!==a.ndim)throw Error("new TrustRegionSolverLSQ(fJ, x0): fJ(x) returned [f,J] with J.ndim !== 2.");var h=ea()(a.shape,2);a=h[0];h=h[1];if(e.shape[0]!==a)throw Error("new TrustRegionSolverLSQ(fJ, x0): fJ(x) returned [f,J] where J.shape[0] did not match f.shape[0].");
if(c.shape[0]!==h)throw Error("new TrustRegionSolverLSQ(fJ, x0): fJ(x) returned [f,J] where J.shape[1] did not match x0.shape[0].");this.loss=this.report_loss=NaN;this.report_loss_grad=null;this.M=a;this.N=h;c=Math.min(a,h);e=Math.max(a,h+1);this.D=new Float64Array(h);this.X0=new Float64Array(1*h);this.F0=new Float64Array(1*a);this.J0=new Float64Array(a*h);this.G0=new Float64Array(h);this.tmp=new Float64Array(2*h);this.TMP=new Float64Array(e*h);this.newton_P=new Int32Array(h);this.newton_Q=new Int32Array(h);
this.newton_R=new Float64Array(c*c);this.newton_V=new Float64Array(h*h);this.newton_UF=new Float64Array(1*a);this.newton_dX=new Float64Array(1*h);this.regularized_R0=new Float64Array(c*h);this.regularized_QF=new Float64Array(1*e);this.regularized_dX=new Float64Array(1*h);this.rank=-1;this._report_state=3;jc()(this);this._considerMove_computeLoss();this.makeConsideredMove()}Ab()(b,[{key:"wiggle",value:function(){throw new Gc("Too many unsuccessfull iterations.");}},{key:"_considerMove_computeLoss",
value:function(){for(var a=this.M,c=this.N,e=this.report_f.data,h=this.report_J.data,k=0,l=a;0<l--;){var n=e[l];k+=n*n/a}l=new Float64Array(c);for(n=a;0<n--;)for(var m=c;0<m--;)l[m]+=h[c*n+m]*e[n]/a*2;this.report_loss=k;this.report_loss_grad=new fa(Int32Array.of(c),l)}},{key:"scaledNorm",value:function(a){var c=this.N,e=this.D;if(a.length!==c)throw Error("Assertion failed.");for(var h=new Mb;0<c--;)h.include(e[c]*a[c]);return h.result}},{key:"cauchyTravel",value:function(){for(var a=this.M,c=this.N,
e=this.J0,h=this.G0,k=0,l=0,n=c;0<n--;)k+=h[n]*h[n];for(;0<a--;){n=0;for(var m=c;0<m--;)n+=e[c*a+m]*h[m];l+=n*n}return 0===k?0:0===l?-Infinity:-k/l}},{key:"report",value:function(){if(1!==this._report_state)throw Error("TrustRegionSolverLSQ::report: can only be called once after each makeConsideredMove() but not directly after considerMove(dX).");this._report_state=2;var a=[this.report_x,this.report_loss,this.report_loss_grad,this.report_f,this.report_J];this.report_x=this.report_f=this.report_J=
this.report_loss_grad=null;this.report_loss=NaN;return a}},{key:"considerMove",value:function(a){var c=this.M,e=this.N,h=this.X0,k=this.F0,l=this.J0;this._report_state=3;if(e!==a.length)throw Error("Assertion failed.");for(var n=Int32Array.of(e),m=new Float64Array(e),p=e;0<p--;)m[p]=h[p]+a[p];a=this.fJ(new fa(n,na()(m).call(m)));p=ea()(a,2);a=p[0];p=p[1];a=ia("float64",a);p=ia("float64",p);if(1!==a.ndim)throw Error("Assertion failed.");if(2!==p.ndim)throw Error("Assertion failed.");if(a.shape[0]!==
c)throw Error("Assertion failed.");if(p.shape[0]!==c)throw Error("Assertion failed.");if(p.shape[1]!==e)throw Error("Assertion failed.");this.report_x=new fa(n,m);this.report_f=a;this.report_J=p;this._considerMove_computeLoss();n=0;for(a=c;0<a--;){p=0;for(var t=e;0<t--;)p+=l[e*a+t]*(m[t]-h[t]);p+=k[a];n+=p*p/c}return[n,this.report_loss]}},{key:"makeConsideredMove",value:function(){if(3!==this._report_state)throw Error("Assertion failed.");this._report_state=1;this.rank=-1;this.loss=this.report_loss;
for(var a=this.M,c=this.N,e=this.D,h=this.tmp,k=this.X0,l=this.F0,n=this.J0,m=this.G0,p=this.report_f.data,t=this.report_J.data,v=this.report_x.data,u=c;0<u--;)k[u]=v[u];for(k=a;0<k--;)l[k]=p[k];for(p=a*c;0<p--;)n[p]=t[p];Ja()(m).call(m,0);for(t=a;0<t--;)for(p=c;0<p--;)m[p]+=n[c*t+p]*l[t];if(h.length!==2*c)throw Error("Assertion failed.");Ja()(h).call(h,0);for(l=0;l<a;l++)sc(h,n,c*l,0);for(a=0;a<c;a++)e[a]=Math.max(e[a],xc(h,a))}},{key:"computeNewton",value:function(){if(!(0<=this.rank)){for(var a=
this.M,c=this.N,e=this.D,h=this.J0,k=this.F0,l=this.tmp,n=this.TMP,m=this.newton_P,p=this.newton_Q,t=this.newton_V,v=this.newton_dX,u=this.newton_UF,x=Math.min(a,c),w=c;0<w--;)m[w]=w;for(w=a*c;0<w--;)n[w]=h[w];for(h=a;0<h--;)u[h]=k[h];ye(a,c,1,n,0,u,0,m,0,l);k=this.regularized_R0;for(h=x*c;0<h--;)k[h]=n[h];a=this.rank=Zc(a,c,n,0,l);if(a<c){for(k=c;0<k--;)if(h=e[m[k]],0!==h)for(w=a;0<w--;)n[c*w+k]/=h;for(k=c;0<k--;)p[k]=m[k];Ja()(t).call(t,0);De(a,c,n,0,t,0,p,0);for(m=a;0<m--;)l[m]=-u[m];m=this.newton_R;
for(u=a;0<u--;)for(p=a;0<p--;)m[x*u+p]=n[c*u+p];qc(a,x,1,m,0,l,0);Ja()(v).call(v,0);for(n=a;0<n--;)for(x=c;0<x--;)v[x]+=t[c*n+x]*l[n];for(l=c;0<l--;)c=e[l],0!==c&&(v[l]/=c)}else{for(e=c;0<e--;)l[e]=-u[e];qc(c,c,1,n,0,l,0);for(e=c;0<e--;)v[m[e]]=l[e]}}}},{key:"computeNewtonRegularized",value:function(a){this.computeNewton();var c=this.N,e=this.D,h=this.rank,k=this.tmp,l=this.TMP,n=this.newton_P,m=this.newton_UF,p=this.newton_R,t=this.newton_V,v=this.newton_dX,u=this.regularized_R0,x=this.regularized_dX,
w=this.regularized_QF,y=Math.min(this.M,c);if(0===a){for(var z=c;0<z--;)x[z]=v[z];if(h<c){l=this.scaledNorm(x);if(0===l)return[0,0];Ja()(k).call(k,0,0,h);for(n=h;0<n--;)for(w=c;0<w--;)k[n]+=t[c*n+w]*e[w]*x[w];Gd(h,y,1,p,0,k,0);c=0;for(e=h;0<e--;)x=k[e],c+=x*x;return[l,c/-l]}}if(!(0<=a))throw Error("TrustRegionSolverLSQ.prototype.computeMinRegularized(\u03bb): \u03bb must be non-negative.");for(p=h*c;0<p--;)l[p]=u[p];if(0!==a){for(p=h;0<p--;)w[p]=-m[p];Ja()(l).call(l,0,h*c,(c+1)*c);Ja()(w).call(w,
0,h,c+1);p=Math.sqrt(a);for(t=c;0<t--;){y=e[n[t]];y=0===y?1:y*p;if(!(0<y))throw Error("TrustRegionSolverLSQ.prototype.computeMinRegularized(\u03bb): \u03bb too small (caused underflow).");if(h<=t)l[c*t+t]=y;else for(l[c*c+t]=y,w[c]=0,y=t;y<c;y++)a=c*y+y,m=c*c+y,u=l[m],0!==u&&(u=ib(l[a],u),z=ea()(u,3),u=z[0],v=z[1],z=z[2],l[m]=0,0!==v&&(l[a]=z,Ta(l,c-1-y,a+1,m+1,u,v),Ta(w,1,y,c,u,v)))}for(h=c;0<h--;)k[h]=w[h];qc(c,c,1,l,0,k,0);for(h=c;0<h--;)x[n[h]]=k[h]}else if(h!==c)throw Error("Assertion failed.");
h=this.scaledNorm(x);if(0===h)return[0,0];for(w=c;0<w--;)p=n[w],k[w]=x[p]*e[p]*e[p];Gd(c,c,1,l,0,k,0);for(e=0;0<c--;)x=k[c],e+=x*x;return[h,e/-h]}}]);return b}(),Wd=function(){function b(a,c,e){var h,k;sb()(this,b);if(!(a instanceof Function))throw Error("Assertion failed.");c=ia("float64",c);e=ia("float64",e);if(1!==c.ndim)throw Error("Assertion failed.");if(1!==e.ndim&&2!==e.ndim)throw Error("Assertion failed.");var l=ea()(e.shape,2),n=l[0];l=l[1];l=void 0===l?1:l;var m=ea()(c.shape,1)[0],p=a(new fa(c.shape,
na()(h=c.data).call(h)),new fa(e.shape,na()(k=e.data).call(k)));p=ea()(p,3);h=p[0];k=p[1];var t=p[2];h=ia("float64",h);k=ia("float64",k);t=ia("float64",t);if(1!==h.ndim&&2!==h.ndim)throw Error("Assertion failed.");if(k.ndim!==h.ndim+1)throw Error("Assertion failed.");if(t.ndim!==h.ndim+e.ndim-1)throw Error("Assertion failed.");var v=ea()(h.shape,2);p=v[1];p=void 0===p?1:p;if(n!==v[0])throw Error("Assertion failed.");if(k.shape[0]!==n)throw Error("Assertion failed.");if(t.shape[0]!==n)throw Error("Assertion failed.");
if(2===h.ndim){if(k.shape[1]!==p)throw Error("Assertion failed.");if(t.shape[1]!==p)throw Error("Assertion failed.");}if(2===e.ndim&&t.shape[h.ndim]!==l)throw Error("Assertion failed.");if(k.shape[h.ndim]!==m)throw Error("Assertion failed.");v=n*l+n*p;var u=n*l+m,x=Math.min(l,p),w=Math.min(n*l+m+1,n*p),y=new Float64Array(n*l),z=new Float64Array(n*p*l),B=new Float64Array(n*p*m),E=new Float64Array(u),D=new Float64Array(u),I=new Float64Array(v),K=new Float64Array(u),Q=new Float64Array(x*(x+3)>>>1),P=
p<=l?z:new Float64Array(n*l*l+l),M=p<=l?B:new Float64Array(w*m),N=p<=l?I.subarray(n*l):new Float64Array(w),R=new Float64Array(n*l),S=new Float64Array(n*x*l),U=new Float64Array(w*m),T=new Int32Array(m),Y=new Float64Array(u),aa=new Float64Array(n*l);x=new Float64Array(n*x*l);var W=new Float64Array(Math.max(w,m+1)*m),ba=new Int32Array(m),ja=new Float64Array(u);w=new Float64Array(Math.max(n*l+w,u+1));var ma=new Float64Array(2*m),sa=na()(y).call(y);t=t.data;k=k.data;Ja()(sa).call(sa,1);Pb()(this,{MX:n,
NX:l,NY:p,NP:m,M:v,N:u,loss:0,rank:-1,_report_state:2,fgg:a,report_p:c,report_dx:e,report_loss:NaN,report_dloss_dp:null,report_dloss_ddx:null,report_dy:h,p_shape:c.shape,x_shape:e.shape,y_shape:h.shape,QF:w,J11:y,J21:z,J22:B,tmp:Q,prepared_QF:N,prepared_J21:P,prepared_J22:M,prepared:!1,newton_R11:R,newton_R21:S,newton_R22:U,newton_P:T,newton_dX:Y,regularized_R11:aa,regularized_R21:x,regularized_R22:W,regularized_P:ba,regularized_dX:ja,_consider_J11:sa,_consider_J21:t,_consider_J22:k,D:E,norm:ma,X0:D,
F0:I,G0:K});jc()(this);this._considerMove_computeLoss();this.makeConsideredMove()}Ab()(b,[{key:"_considerMove_computeLoss",value:function(){var a=this.M,c=this.MX,e=this.NX,h=this.NY,k=this.NP,l=this.x_shape,n=this.p_shape,m=this._consider_J11,p=this._consider_J21,t=this._consider_J22;this._report_state=3;for(var v=new Float64Array(k),u=new Float64Array(c*e),x=this.report_dx.data,w=this.report_dy.data,y=c*h;0<y--;)for(var z=k;0<z--;)v[z]+=w[y]*t[k*y+z]/a*2;for(k=c;0<k--;)for(t=e;0<t--;)u[e*k+t]=m[e*
k+t]*x[e*k+t]/a*2;for(m=c;0<m--;)for(k=h;0<k--;)for(t=e;0<t--;)u[e*m+t]+=p[e*(h*m+k)+t]*w[h*m+k]/a*2;p=0;for(e*=c;0<e--;)m=x[e],p+=m*m/a;for(c*=h;0<c--;)h=w[c],p+=h*h/a;this.report_dloss_dp=new fa(n,v);this.report_dloss_ddx=new fa(l,u);this.report_loss=p}},{key:"considerMove",value:function(a){var c=this.M,e=this.MX,h=this.NX,k=this.NY,l=this.NP,n=this.x_shape,m=this.y_shape,p=this.p_shape,t=this._consider_J11,v=this._consider_J21,u=this._consider_J22,x=this.J11,w=this.J21,y=this.J22,z=this.F0,B=
this.X0,E=this.fgg;if(a.length!==this.N)throw Error("Assertion failed.");var D=new Float64Array(l),I=new Float64Array(e*h);this.report_p=new fa(p,D);this.report_dx=new fa(n,I);for(var K=l;0<K--;){var Q=e*h+K;D[K]=B[Q]+a[Q]}for(K=e*h;0<K--;)I[K]=B[K]+a[K];a=E(new fa(p,na()(D).call(D)),new fa(n,na()(I).call(I)));E=ea()(a,3);p=E[0];a=E[1];E=E[2];p=ia("float64",p);a=V("float64",a);E=V("float64",E);if(p.ndim!==m.length)throw Error("Assertion failed.");if(a.ndim!==m.length+1)throw Error("Assertion failed.");
if(E.ndim!==m.length+n.length-1)throw Error("Assertion failed.");if(p.shape[0]!==e)throw Error("Assertion failed.");if(a.shape[0]!==e)throw Error("Assertion failed.");if(E.shape[0]!==e)throw Error("Assertion failed.");if(a.shape[m.length]!==l)throw Error("Assertion failed.");if(2===n.length&&E.shape[m.length]!==h)throw Error("Assertion failed.");if(2===m.length){if(p.shape[1]!==k)throw Error("Assertion failed.");if(a.shape[1]!==k)throw Error("Assertion failed.");if(E.shape[1]!==k)throw Error("Assertion failed.");
}this.report_dy=p;E=E.data;a=a.data;for(n=e*k*h;0<n--;)v[n]=E[n];for(v=e*k*l;0<v--;)u[v]=a[v];Ja()(t).call(t,1);this._considerMove_computeLoss();t=0;for(u=e*h;0<u--;)v=z[u]+x[u]*(I[u]-B[u]),t+=v*v/c;for(x=e;0<x--;)for(u=k;0<u--;){v=z[e*h+k*x+u];for(n=h;0<n--;)v+=w[h*(k*x+u)+n]*(I[h*x+n]-B[h*x+n]);for(n=l;0<n--;)v+=y[l*(k*x+u)+n]*(D[n]-B[e*h+n]);t+=v*v/c}return[t,this.report_loss]}},{key:"makeConsideredMove",value:function(){if(3!==this._report_state)throw Error("Assertion failed.");this._report_state=
1;this.loss=this.report_loss;this.rank=-1;this.prepared=!1;for(var a=this.MX,c=this.NX,e=this.NY,h=this.NP,k=this._consider_J11,l=this.J11,n=this._consider_J21,m=this.J21,p=this._consider_J22,t=this.J22,v=this.D,u=this.X0,x=this.F0,w=this.G0,y=a*c;0<y--;)l[y]=k[y];for(k=a*e*c;0<k--;)m[k]=n[k];for(n=a*e*h;0<n--;)t[n]=p[n];k=this.report_p.data;n=this.report_dx.data;p=this.report_dy.data;for(y=h;0<y--;)u[a*c+y]=k[y];for(k=a*c;0<k--;)u[k]=n[k];for(n=a*e;0<n--;)x[a*c+n]=p[n];for(p=a*c;0<p--;)x[p]=u[p];
for(u=a*c;0<u--;)w[u]=l[u]*x[u];for(u=a;0<u--;)for(p=e;0<p--;)for(n=c;0<n--;)w[c*u+n]+=m[c*(e*u+p)+n]*x[a*c+e*u+p];Ja()(w).call(w,0,a*c,a*c+h);for(u=a*e;0<u--;)for(p=h;0<p--;)w[a*c+p]+=t[h*u+p]*x[a*c+u];x=new Mb;for(w=a;0<w--;)for(u=c;0<u--;){x.reset();x.include(l[c*w+u]);for(p=e;0<p--;)x.include(m[c*(e*w+p)+u]);p=c*w+u;v[p]=Math.max(v[p],x.result)}for(l=h;0<l--;){x.reset();for(m=a*e;0<m--;)x.include(t[h*m+l]);m=a*c+l;v[m]=Math.max(v[m],x.result)}}},{key:"cauchyTravel",value:function(){for(var a=
this.MX,c=this.NX,e=this.NY,h=this.NP,k=this.J11,l=this.J21,n=this.J22,m=this.G0,p=0,t=0,v=this.N;0<v--;)p+=m[v]*m[v];for(v=a;0<v--;)for(var u=e;0<u--;){for(var x=0,w=h;0<w--;)x+=n[h*(e*v+u)+w]*m[a*c+w];for(w=c;0<w--;)x+=l[c*(e*v+u)+w]*m[c*v+w];t+=x*x}for(a*=c;0<a--;)c=k[a]*m[a],t+=c*c;return 0===p?0:0===t?-Infinity:-p/t}},{key:"report",value:function(){if(1!==this._report_state)throw Error("TrustRegionSolverLSQ::report: can only be called once after each makeConsideredMove() but not directly after considerMove(dX).");
this._report_state=2;var a=[this.report_p,this.report_dx,this.report_loss,this.report_dloss_dp,this.report_dloss_ddx,this.report_dy];this.report_p=this.report_dx=this.report_dy=this.report_dloss_dp=this.report_dloss_ddx=null;this.report_loss=NaN;return a}},{key:"wiggle",value:function(){throw new Gc("Too many unsuccessfull iterations.");}},{key:"__DEBUG_J",value:function(a,c){if(0!==a%1)throw Error("Assertion failed.");if(0!==c%1)throw Error("Assertion failed.");a|=0;c|=0;if(!(0<=a))throw Error("Assertion failed.");
if(!(0<=c))throw Error("Assertion failed.");var e=this.N,h=this.MX,k=this.NX,l=this.NY,n=this.NP,m=this.J11,p=this.J21,t=this.J22;if(!(a<this.M))throw Error("Assertion failed.");if(!(c<e))throw Error("Assertion failed.");if(a<h*k)return a===c?m[a]:0;a-=h*k;return c<h*k?(e=a/l|0,e!==(c/k|0)?0:p[k*(l*e+a%l)+c%k]):t[n*a+(c-h*k)]}},{key:"scaledNorm",value:function(a){var c=this.N,e=this.D;if(a.length!==c)throw Error("Assertion failed.");for(var h=new Mb;0<c--;)h.include(e[c]*a[c]);return h.result}},{key:"__DEBUG_RVD",
get:function(){var a=this.M,c=this.N,e=this.MX,h=this.NX,k=this.NY,l=this.NP,n=this.newton_R11,m=this.newton_R21,p=this.newton_R22,t=this.newton_P,v=this.prepared_J21,u=this.prepared_J22;if(!(0<=this.rank))throw Error("Assertion failed.");var x=Math.min(h,k);k=this.rank-e*h;var w=new Float64Array(a*c),y=new Float64Array(c*c),z=new Float64Array(1*c);Ja()(z).call(z,1);for(var B=0;B<e*h;B++)y[c*B+B]=1;for(B=0;B<l;B++)y[c*(e*h+B)+(e*h+t[B])]=1;for(B=0;B<e*h;B++)w[c*B+B]=n[B];for(n=0;n<e;n++)for(B=0;B<
h;B++)for(var E=1+B;E<h;E++)for(var D=0;D<x;D++)w[c*(h*n+B)+(h*n+E)]+=m[h*(x*n+D)+B]*v[h*(x*n+D)+E];for(v=0;v<e;v++)for(n=0;n<h;n++)for(B=0;B<l;B++)for(E=0;E<x;E++)w[c*(h*v+n)+(h*e+B)]+=m[h*(x*v+E)+n]*u[l*(x*v+E)+t[B]];for(m=0;m<k;m++)for(u=0;u<k;u++)w[c*(e*h+m)+(e*h+u)]=p[l*m+u];if(k!==l){for(m=e*h+l;m-- >e*h;)z[m]=this.D[m]||1;for(m=l;0<m--;)if(u=this.D[e*h+t[m]],0!==u)for(x=e*h;0<x--;)w[c*x+(e*h+m)]/=u;for(t=k;0<t--;)for(m=l;m-- >k;)if(u=p[l*t+m],0!==u)for(x=Math.sqrt(1-u*u),v=e*h;0<v--;)n=c*v+
(e*h+t),B=c*v+(e*h+m),E=w[n],D=w[B],w[n]=D*u+x*E,w[B]=D*x-u*E;for(t=e*h;0<t--;)for(m=e*h+l;m-- >e*h+k;)w[c*t+m]=0;for(t=k;0<t--;)for(m=l;m-- >k;)u=p[l*t+m],0!==u&&Ta(y,c,c*(e*h+t),c*(e*h+m),Math.sqrt(1-u*u),u)}return[new fa(Int32Array.of(a,c),w),new fa(Int32Array.of(c,c),y),new fa(Int32Array.of(1,c),z)]}},{key:"_qr_decomp",value:function(a,c,e,h,k){var l=this.MX,n=this.NX,m=this.NY,p=this.NP,t=this.norm,v=this.tmp,u=this.prepared_J21,x=this.prepared_J22,w=Math.min(n,m),y=Math.min(l*m,l*n+p);if(!(h instanceof
Int32Array))throw Error("Assertion failed.");if(h.length!==p)throw Error("Assertion failed.");if(a.length!==l*n)throw Error("Assertion failed.");if(c.length!==l*w*n)throw Error("Assertion failed.");if(e.length!==(p+1)*p&&e.length!==Math.min(l*m,l*n+p+1)*p)throw Error("Assertion failed: "+Rc()({len:e.length,MX:l,NX:n,NP:p}));if(1===w)for(v=0;v<l;v++){m=1;for(var z=0;z<n;z++){var B=n*v+z,E=ib(a[B],u[B]*m),D=ea()(E,3);E=D[0];var I=D[1];D=D[2];if(0===D)throw Error("Assertion failed: Sparse part of J must not be singular.");
c[B]=m*I;0!==I&&(m*=E,a[B]=D,Ta(k,1,B,l*n+v,E,I))}for(z=0;z<p;z++)e[p*v+z]=m*x[p*v+z]}else for(m=0;m<l;m++){Ja()(v).call(v,0,w,w*(w+3)>>>1);for(z=w;0<z;z--)v[w-1+(z*(z+1)>>>1)]=1;for(z=0;z<n;z++){Ja()(v).call(v,0,0,w);I=a[n*m+z];for(B=0;B<w;B++){E=w+(B*(B+1)>>>1);D=0;for(var K=-1;K++<B;)D+=v[E+K]*u[n*(w*m+K)+z];0!==D&&(I=ib(I,D),I=ea()(I,3),D=I[0],K=I[1],I=I[2],0!==K&&(Ta(v,B+1,0,E,D,K),Ta(k,1,n*m+z,l*n+w*m+B,D,K)))}a[n*m+z]=I;for(B=0;B<w;B++)c[n*(w*m+B)+z]=v[B]}Ja()(e).call(e,0,p*w*m,p*w*(m+1));
for(z=0;z<w;z++)for(B=w+(z*(z+1)>>>1),E=0;E<=z;E++)for(I=0;I<p;I++)e[p*(w*m+z)+I]+=v[B+E]*x[p*(w*m+E)+I]}for(a=l*w*p;a<y*p;a++)e[a]=x[a];for(x=p;0<x--;)h[x]=x;ye(y,p,1,e,0,k,l*n,h,0,t);h=Zc(y,p,e,0,t);Ja()(e).call(e,0,p*h,p*Math.min(y,p));return h}},{key:"_qr_solve",value:function(a,c,e,h,k,l){var n=this.MX,m=this.NX,p=this.NP,t=this.prepared_J21,v=this.prepared_J22,u=this.D,x=this.tmp,w=this.norm,y=Math.min(m,this.NY);if(!(h instanceof Int32Array))throw Error("Assertion failed.");if(h.length!==p)throw Error("Assertion failed.");
if(a.length!==n*m)throw Error("Assertion failed.");if(c.length!==n*y*m)throw Error("Assertion failed.");if(!(e.length>=n*y*p))throw Error("Assertion failed.");if(0!==k%1)throw Error("Assertion failed.");if(!(0<=k))throw Error("Assertion failed.");if(!(p>=k))throw Error("Assertion failed.");k|=0;qc(k,p,1,e,0,l,n*m);if(k!=p)for(var z=0;z<k;z++)for(var B=k;B<p;B++){var E=e[p*z+B];0!==E&&Ta(l,1,n*m+B,n*m+z,Math.sqrt(1-E*E),E)}for(e=p;0<e--;)w[h[e]]=l[n*m+e];for(h=p;0<h--;)l[n*m+h]=w[h];if(k!==p)for(k=
p;0<k--;)w=u[n*m+k],0!==w&&(l[n*m+k]/=w);for(u=n;0<u--;)for(k=y;0<k--;){w=0;for(h=p;0<h--;)w+=v[p*(y*u+k)+h]*l[n*m+h];for(h=m;0<h--;)l[m*u+h]-=w*c[m*(y*u+k)+h]}for(;0<n--;)for(Ja()(x).call(x,0,0,y),p=m;0<p--;){v=m*n+p;for(u=y;0<u--;)l[v]-=c[m*(y*n+u)+p]*x[u];l[v]/=a[v];for(u=y;0<u--;)x[u]+=t[m*(y*n+u)+p]*l[v]}}},{key:"_rt_solve",value:function(a,c,e,h,k,l){var n=this.MX,m=this.NX,p=this.NP,t=this.prepared_J21,v=this.prepared_J22,u=this.D,x=this.tmp,w=this.norm,y=Math.min(m,this.NY);if(!(h instanceof
Int32Array))throw Error("Assertion failed.");if(h.length!==p)throw Error("Assertion failed.");if(a.length!==n*m)throw Error("Assertion failed.");if(c.length!==n*y*m)throw Error("Assertion failed.");if(!(e.length>=n*p))throw Error("Assertion failed.");if(!(l.length>=n*m+p))throw Error("Assertion failed.");if(0!==k%1)throw Error("Assertion failed.");if(!(0<=k))throw Error("Assertion failed.");if(!(p>=k))throw Error("Assertion failed.");k|=0;Ja()(w).call(w,0,0,p);for(var z=0;z<n;z++){Ja()(x).call(x,
0,0,y);for(var B=0;B<m;B++){for(var E=m*z+B,D=0;D<y;D++)l[E]-=t[m*(y*z+D)+B]*x[D];l[E]/=a[E];for(D=0;D<y;D++)x[D]+=c[m*(y*z+D)+B]*l[E]}for(B=0;B<y;B++)for(E=0;E<p;E++)w[E]+=x[B]*v[p*(y*z+B)+h[E]]}if(k<p){for(a=p;0<a--;)c=u[n*m+h[a]],0!==c&&(w[a]/=c);for(h=k;0<h--;)for(u=p;u-- >k;)a=e[p*h+u],0!==a&&Ta(w,1,h,u,Math.sqrt(1-a*a),a)}for(h=k;0<h--;)l[n*m+h]-=w[h];Gd(k,p,1,e,0,l,n*m)}},{key:"prepare",value:function(){var a=this.MX,c=this.NX,e=this.NY,h=this.NP,k=this.prepared_J21,l=this.prepared_J22,n=this.prepared_QF,
m=this.J21,p=this.J22,t=this.F0;this.prepared=this.prepared||c>=e;if(!this.prepared){this.prepared=!0;if(k.length!==a*c*c+c)throw Error("Assertion failed.");if(l.length!==Math.min(a*e,a*c+h+1)*h)throw Error("Assertion failed.");if(n.length!==Math.min(a*e,a*c+h+1))throw Error("Assertion failed.");for(var v=-1,u=0;u<a;u++){for(var x=c*c*u,w=h*c*u,y=c*u,z=0;z<c*c;z++)k[x+z]=m[c*e*u+z];for(z=0;z<c*h;z++)l[w+z]=p[h*e*u+z];for(z=0;z<c;z++)n[y+z]=t[a*c+e*u+z];for(z=1;z<c;z++)for(var B=0;B<z;B++){var E=x+
c*z+B,D=k[E];if(0!==D){var I=x+c*B+B;D=ib(k[I],D);var K=ea()(D,3);D=K[0];var Q=K[1];K=K[2];k[E]=0;0!==Q&&(k[I]=K,Ta(k,c-1-B,I+1,E+1,D,Q),Ta(l,h,w+B*h,w+z*h,D,Q),Ta(n,1,y+B,y+z,D,Q))}}for(z=c;z<e;z++){if(++v===h){E=B=h;I=l;D=a*c*h;Q=n;K=a*c;if(0!==B%1)throw Error("Assertion failed.");if(0!==E%1)throw Error("Assertion failed.");if(0!==D%1)throw Error("Assertion failed.");if(0!==K%1)throw Error("Assertion failed.");if(0!==I.length%1)throw Error("Assertion failed.");if(0!==Q.length%1)throw Error("Assertion failed.");
if(!(0<=B))throw Error("Assertion failed.");if(!(0<=E))throw Error("Assertion failed.");if(!(0<=D))throw Error("Assertion failed.");if(!(0<=K))throw Error("Assertion failed.");if(!(0<=I.length))throw Error("Assertion failed.");if(!(0<=Q.length))throw Error("Assertion failed.");if(!(B*E<=I.length-D))throw Error("Assertion failed.");if(!(1*B<=Q.length-K))throw Error("Assertion failed.");for(var P=1;P<B;P++)for(var M=0;M<E&&M<P;M++){var N=D+E*P+M,R=I[N];if(0!==R){var S=D+E*M+M;R=ib(I[S],R);var U=ea()(R,
3);R=U[0];var T=U[1];U=U[2];I[N]=0;0!==T&&(I[S]=U,Ta(I,E-1-M,S+1,N+1,R,T),Ta(Q,1,K+1*M,K+1*P,R,T))}}}v=Math.min(v,h);for(B=0;B<c;B++)k[x+c*c+B]=m[c*e*u+c*z+B];for(B=0;B<h;B++)l[(a*c+v)*h+B]=p[h*e*u+h*z+B];n[a*c+v]=t[a*c+e*u+z];for(B=0;B<c;B++)E=x+c*c+B,D=k[E],0!==D&&(I=x+c*B+B,D=ib(k[I],D),K=ea()(D,3),D=K[0],Q=K[1],K=K[2],k[E]=0,0!==Q&&(k[I]=K,Ta(k,c-1-B,I+1,E+1,D,Q),Ta(l,h,w+h*B,(a*c+v)*h,D,Q),Ta(n,1,y+B,a*c+v,D,Q)));if(!(v<=h))throw Error("Assertion failed.");if(v===h)for(B=0;B<h;B++)E=a*c*h+h*
v+B,D=l[E],0!==D&&(I=a*c*h+h*B+B,D=ib(l[I],D),K=ea()(D,3),D=K[0],Q=K[1],K=K[2],l[E]=0,0!==Q&&(l[I]=K,Ta(l,h-1-B,I+1,E+1,D,Q),Ta(n,1,a*c+B,a*c+v,D,Q)))}}}}},{key:"computeNewton",value:function(){var a=this.MX,c=this.NX,e=this.NY,h=this.NP,k=this.QF,l=this.J11,n=this.prepared_QF,m=this.newton_R11,p=this.newton_R21,t=this.newton_R22,v=this.newton_P,u=this.newton_dX,x=this.F0,w=this.D;if(!(0<=this.rank)){if(-1!==this.rank)throw Error("Assertion failed.");this.prepare();e=Math.min(a*e,a*c+h);for(var y=
a*c;0<y--;)m[y]=l[y];for(l=e;0<l--;)k[a*c+l]=n[l];for(n=a*c;0<n--;)k[n]=x[n];x=this._qr_decomp(m,p,t,v,k);this.rank=x+a*c;for(n=a*c+x;0<n--;)u[n]=-k[n];if(x!==h){Ja()(u).call(u,0,a*c+x,a*c+h);for(k=h;0<k--;)if(n=w[a*c+v[k]],0!==n)for(l=x;0<l--;)t[h*l+k]/=n;for(a=x;0<a--;)for(c=h*a+a,w=h;w-- >x;)if(k=h*a+w,n=t[k],0!==n){n=ib(t[c],n);e=ea()(n,3);n=e[0];l=e[1];e=e[2];if(0!==l){0>n&&(n*=-1,l*=-1,e*=-1);for(y=a;0<y--;){var z=t[h*y+a],B=t[h*y+w];t[h*y+a]=B*l+n*z;t[h*y+w]=B*n-l*z}t[c]=e}t[k]=l}}this._qr_solve(m,
p,t,v,x,u)}}},{key:"computeNewtonRegularized",value:function(a){a*=1;if(!(0<=a))throw Error("Assertion failed.");var c=this.N,e=this.MX,h=this.NX,k=this.NY,l=this.NP,n=this.regularized_R11,m=this.J11,p=this.regularized_R21,t=this.regularized_R22,v=this.regularized_P,u=this.regularized_dX,x=this.D,w=this.QF,y=this.F0,z=this.prepared_QF,B=Math.min(e*k,e*h+l);if(t.length!==Math.max(Math.min(e*k,e*h+l+1),l+1)*l)throw Error("Assertion failed.");if(w.length!==Math.max(Math.min(e*k,e*h+l+1),l+1)+e*h)throw Error("Assertion failed.");
if(0===a){this.computeNewton();t=this.newton_R11;v=this.newton_R21;a=this.newton_R22;B=this.newton_P;p=this.newton_dX;n=this.rank;for(y=c;0<y--;)u[y]=p[y];p=this.scaledNorm(u);if(0===p)return[0,0];y=n-e*h;if(n<c){for(c=l;0<c--;)z=e*h+B[c],w[e*h+c]=u[z]*x[z];for(c=y;0<c--;)for(z=l;z-- >y;)m=a[l*c+z],0!==m&&Ta(w,1,e*h+c,e*h+z,Math.sqrt(1-m*m),m)}else for(;0<l--;)c=e*h+B[l],w[e*h+l]=u[c]*x[c]*x[c];for(e*=h;0<e--;)w[e]=u[e]*x[e]*x[e];this._rt_solve(t,v,a,B,y,w);u=0;for(x=n;0<x--;)e=w[x],u+=e*e;return[p,
u/-p]}this.prepare();for(k=e*h;0<k--;)n[k]=m[k];for(m=B;0<m--;)w[e*h+m]=z[m];for(z=e*h;0<z--;)w[z]=y[z];a=Math.sqrt(a);for(y=e*h;0<y--;){z=x[y]*a;if(!(0<z))throw Error("Assertion failed.");z=ib(n[y],z);z=ea()(z,3);m=z[0];n[y]=z[2];w[y]*=m}y=this._qr_decomp(n,p,t,v,w);z=l*l;Ja()(t).call(t,0,B*l,(l+1)*l);for(B=l;0<B--;){m=x[e*h+v[B]];m=0===m?1:m*a;if(!(0<m))throw Error("Assertion failed.");if(y<=B)t[l*B+B]=m,w[e*h+B]=0;else for(t[z+B]=m,w[c]=0,m=B;m<l;m++){k=l*m+m;var E=z+m,D=ib(t[k],t[E]),I=ea()(D,
3);D=I[0];var K=I[1];I=I[2];t[E]=0;0!==K&&(t[k]=I,Ta(t,l-m-1,k+1,E+1,D,K),Ta(w,1,e*h+m,c,D,K))}}for(a=c;0<a--;)u[a]=-w[a];this._qr_solve(n,p,t,v,l,u);a=this.scaledNorm(u);if(0===a)return[0,0];for(B=l;0<B--;)y=e*h+v[B],w[e*h+B]=u[y]*x[y]*x[y];for(e*=h;0<e--;)w[e]=u[e]*x[e]*x[e];this._rt_solve(n,p,t,v,l,w);u=0;for(x=c;0<x--;)e=w[x],u+=e*e;return[a,u/-a]}}]);return b}(),Tg=Ga.a.mark(bd),Ug=Ga.a.mark(Pe),Qe=function(b,a,c){return bd(new qf(b,a),c)},rh=function(b,a,c,e){return bd(new Wd(b,a,c),e)},sh=
Oe(bd),Re=1.5-Math.sqrt(1.25),Te=function(){function b(a,c){sb()(this,b);this.dXdG=new Float64Array(a);this.dX=new Float64Array(a*c);this.dG=new Float64Array(a*c);this.tmp=new Float64Array(a);Pb()(this,{M:a,N:c});this.off=this.m=0;jc()(this)}Ab()(b,[{key:"update",value:function(a,c){var e=this.M,h=this.N,k=this.dG,l=this.dXdG,n=this.dX;if(a.length!==h)throw Error("Assertion failed.");if(c.length!==h)throw Error("Assertion failed.");for(var m=0,p=h;0<p--;)m+=a[p]*c[p];if(!(0<m))throw new Lb;this.m===
e?this.off=(this.off+1)%e:this.m++;e=(this.off+this.m-1)%e;l[e]=m;for(l=h;0<l--;)n[h*e+l]=a[l];for(a=h;0<a--;)k[h*e+a]=c[a]}},{key:"forget",value:function(a){if(0!==a%1)throw Error("Assertion failed.");if(!(0<=a))throw Error("Assertion failed.");if(!(a<=this.m))throw Error("Assertion failed.");this.off=(this.off+a)%this.M;this.m-=a}},{key:"compute_Hv_phase1",value:function(a){var c=this.M,e=this.N,h=this.dG,k=this.m,l=this.dXdG,n=this.dX,m=this.off,p=this.tmp;if(a.length!==e)throw Error("Assertion failed.");
for(;0<k--;){var t=m+k;t-=(t>=c)*c;for(var v=0,u=e;0<u--;)v+=n[e*t+u]*a[u];p[t]=v/=l[t];for(u=e;0<u--;)a[u]-=v*h[e*t+u]}}},{key:"compute_Hv_phase2",value:function(a){var c=this.M,e=this.N,h=this.dG,k=this.m,l=this.dXdG,n=this.dX,m=this.off,p=this.tmp;if(a.length!==e)throw Error("Assertion failed.");for(var t=0;t<k;t++){var v=m+t;v-=(v>=c)*c;for(var u=0,x=e;0<x--;)u+=h[e*v+x]*a[x];u/=l[v];for(x=e;0<x--;)a[x]+=(p[v]-u)*n[e*v+x]}}}]);return b}(),Xg=Ga.a.mark(Se),Yg=Ga.a.mark(Xd),Zg=Ga.a.mark(Ue),bh=
Ga.a.mark(We),ch=Ga.a.mark(ud),dh=Ga.a.mark(Ye),Ze=function(b,a,c){return ud(new qf(b,a),c)},th=function(b,a,c,e){return ud(new Wd(b,a,c),e)},uh=Oe(ud),gd=Float64Array.of(2,1,-1,-2),zd=Float64Array.of(-1,8,-8,1),vh=function(b){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=a.h_rel,e=void 0===c?void 0:c;a=a.h_abs;var h=void 0===a?void 0:a;return function(k){k=ia("float",k);var l="float32"===k.dtype?"float32":"float64",n=Ka[l],m=k.shape;k=k.data;var p=null!=e?e:Math.pow(A(l),1/3);
l=null!=h?h:Math.pow(A(l),1/3);var t=Math.max(Math.abs(k[0])*p,l);var v=new fa(m,n.from(k));v.data[0]+=t*gd[0];var u=b(v);if("number"===typeof u){v=m;var x=new Float64Array(k.length);x[0]=u*zd[0];var w=0,y=1;a:for(;;y=0){for(;y<gd.length;y++)u=new fa(m,n.from(k)),u.data[w]+=t*gd[y],u=b(u),x[w]+=u*zd[y];x[w]/=12*t;if(!(++w<k.length))break a;t=Math.max(Math.abs(k[w])*p,l)}}else{u=ia("float",u);w=u.shape;u=u.data;y=u.length;var z=k.length;v=Int32Array.of.apply(Int32Array,Wa()(x=Za()(w)).call(x,Za()(m)));
x=new Float64Array(u.length*k.length);for(var B=0;B<y;B++)x[z*B]=u[B]*zd[0];B=0;var E=1;a:for(;;E=0){for(;E<gd.length;E++){u=new fa(m,n.from(k));u.data[B]+=t*gd[E];u=ia("float",b(u));if(u.ndim!==w.length)throw Error("num_grad(f)(x): return shape of f must be consistent.");for(var D=w.length;0<D--;)if(u.shape[D]!==w[D])throw Error("num_grad(f)(x): return shape of f must be consistent.");u=u.data;for(D=0;D<y;D++)x[z*D+B]+=u[D]*zd[E]}for(u=0;u<y;u++)x[z*u+B]/=12*t;if(!(++B<z))break a;t=Math.max(Math.abs(k[B])*
p,l)}}return new fa(v,x)}},wh=function(b){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=a.h_rel,e=void 0===c?void 0:c;a=a.h_abs;var h=void 0===a?void 0:a;return function(k){k=ia(k);var l="float32"===k.dtype?"float32":"float64",n=Ka[l],m=k.shape;k=k.data;var p=new n(k.length),t=null!=e?e:Math.pow(A(l),1/3);l=null!=h?h:Math.pow(A(l),1/3);var v=b(new fa(m,na()(k).call(k)));Ja()(p).call(p,-1.5*v);for(v=k.length;0<v--;){for(var u=Math.max(Math.abs(k[v])*t,l),x=0,w=[[1*u,2],[2*u,-.5]];x<
w.length;x++){var y=ea()(w[x],2),z=y[0];y=y[1];var B=new fa(m,n.from(k));B.data[v]+=z;p[v]+=b(B)*y}p[v]/=u}return new fa(m,p)}},$e=function(b){return Ib()(b)},Si=d(75),cd=d.n(Si),Ti=function(b){function a(e){sb()(this,a);var h=c.call(this);h._seed=af(e);h._state=0;jc()(ed()(h));return h}Yb()(a,b);var c=gh(a);Ab()(a,[{key:"seed",get:function(){return this._seed}},{key:"uniform",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1,h=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:1;e*=1;if(!isFinite(e))throw Error("squirrel3.RNG::uniform(lo,hi): lo must be a valid number.");h*=1;if(!isFinite(h))throw Error("squirrel3.RNG::uniform(lo,hi): hi must be a valid number.");var k=this.seed;k=$d(this._state=this._state+1|0,k)/4294967296;return e*(1-k)+k*h}}],[{key:"name",get:function(){return"squirrel3.RNG"}}]);return a}(lf),Tc=ab()({RNG:Ti,noise_uniform1d:function(b){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1,c=2<arguments.length&&void 0!==arguments[2]?
arguments[2]:1;a*=1;if(!isFinite(a))throw Error("squirrel3.noise_uniform(seed,lo,hi): lo must be a valid number.");c*=1;if(!isFinite(c))throw Error("squirrel3.noise_uniform(seed,lo,hi): hi must be a valid number.");b=af(b);return function(e){e=$d(e,b)/4294967296;return a*(1-e)+e*c}},noise_uniform2d:function(b){var a=Tc.noise_uniform1d(b,1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1,2<arguments.length&&void 0!==arguments[2]?arguments[2]:1);return function(c,e){return a(c+cd()(e,198491317)|
0)}},noise_uniform3d:function(b){var a=Tc.noise_uniform1d(b,1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1,2<arguments.length&&void 0!==arguments[2]?arguments[2]:1);return function(c,e,h){return a(c+cd()(e,198491317)+cd()(h,6542989)|0)}},noise_int1d:function(b,a,c){void 0===c&&(c=a,a=0);if(0!==a%1)throw Error("squirrel3.noise_int1d(from,until): from must be a valid int.");if(0!==c%1)throw Error("squirrel3.noise_int1d(from,until): until must be a valid int.");if(!(a<c))throw Error("squirrel3.noise_int1d(from,until): from must be less than until.");
var e=Tc.noise_uniform1d(b,a,c);return function(h){return Math.floor(e(h))}},noise_int2d:function(b,a,c){void 0===c&&(c=a,a=0);if(0!==a%1)throw Error("squirrel3.noise_int2d(from,until): from must be a valid int.");if(0!==c%1)throw Error("squirrel3.noise_int2d(from,until): until must be a valid int.");if(!(a<c))throw Error("squirrel3.noise_int2d(from,until): from must be less than until.");var e=Tc.noise_uniform2d(b,a,c);return function(h,k){return Math.floor(e(h,k))}},noise_int3d:function(b,a,c){void 0===
c&&(c=a,a=0);if(0!==a%1)throw Error("squirrel3.noise_int3d(from,until): from must be a valid int.");if(0!==c%1)throw Error("squirrel3.noise_int3d(from,until): until must be a valid int.");if(!(a<c))throw Error("squirrel3.noise_int3d(from,until): from must be less than until.");var e=Tc.noise_uniform3d(b,a,c);return function(h,k,l){return Math.floor(e(h,k,l))}}}),rf,Ui=new fe.a(dc()(rf=[Array,Float32Array,Float64Array,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Uint8ClampedArray,
de]).call(rf,function(b){return b.prototype})),sf=function(b,a){var c=b.length;if(c!==a.length)throw Error("EUCLIDEAN_DISTANCE(x,y): x.length must equal y.length.");for(var e=new Mb;0<c--;)e.include(b[c]-a[c]);return e.result},tf=function k(a,c,e,h){sb()(this,k);Pb()(this,{axis:a,threshold:c,c0:e,c1:h});jc()(this)},xh=function(){function a(c){sb()(this,a);var e=new Jd("KDTree::constructor");c=Za()(c);var h=c[0].length;if(Wb()(c).call(c,function(k){return!Ui.has(Rb()(k))||k.length!==h}))throw Error("new KDTree(points): points must be iterable of (typed) arrays of same length (NDArrays are not yet supported).");
this.root=function p(l,n,m){if(!(0<=m-n))throw Error("Assertion failed#7");if(8>=m-n)return na()(c).call(c,n,m);for(var t,v=n+m>>>1,u=n,x=m;;){t=c[e["int"](u,x)][l];for(var w=u,y=u,z=u;z<x;z++){var B=c[z][l];if(B<=t){var E=y,D=c[z];c[z]=c[E];c[E]=D;B<t&&(B=w++,E=y,D=c[B],c[B]=c[E],c[E]=D);y++}}if(y<v)u=y;else if(w>v)x=w;else break}u=(l+1)%h;return new tf(l,t,p(u,n,v),p(u,v,m))}(0,0,c.length);jc()(this)}Ab()(a,[{key:"nearest_gen",value:Ga.a.mark(function h(e){var k,l,n,m;return Ga.a.wrap(function(p){for(;;)switch(p.prev=
p.next){case 0:k=ih(this._nearest_gen(e,e,this.root)),p.prev=1,k.s();case 3:if((l=k.n()).done){p.next=9;break}n=ea()(l.value,2);m=n[1];p.next=7;return m;case 7:p.next=3;break;case 9:p.next=14;break;case 11:p.prev=11,p.t0=p["catch"](1),k.e(p.t0);case 14:return p.prev=14,k.f(),p.finish(14);case 17:case "end":return p.stop()}},h,this,[[1,11,14,17]])})},{key:"_nearest_gen",value:Ga.a.mark(function n(h,k,l){var m,p,t,v,u,x,w,y,z,B,E,D,I,K,Q,P,M,N,R,S,U,T,Y;return Ga.a.wrap(function(aa){for(;;)switch(aa.prev=
aa.next){case 0:if(l instanceof tf){aa.next=6;break}m=dc()(l).call(l,function(W){return[sf(h,W),W]});Qc()(m).call(m,function(W,ba){W=ea()(W,1)[0];ba=ea()(ba,1)[0];return W-ba});return aa.delegateYield(m,"t0",4);case 4:aa.next=45;break;case 6:p=l.axis,t=l.threshold,v=l.c0,u=l.c1,x=k[p],k[p]=t,w=sf(h,k),k[p]=x,t<x&&(y=v,v=u,u=y),z=this._nearest_gen(h,k,v);case 13:D=z.next();B=D.value;I=D.done;E=void 0===I?!1:I;if(!(E||B[0]>=w)){aa.next=19;break}return aa.abrupt("break",23);case 19:return aa.next=21,
B;case 21:aa.next=13;break;case 23:K=na()(k).call(k),K[p]=t,Q=this._nearest_gen(h,K,u),P=Q.next(),M=P.value,N=P.done,R=void 0===N?!1:N;case 27:if(E&&R){aa.next=45;break}if(!(R||!E&&B[0]<=M[0])){aa.next=37;break}aa.next=31;return B;case 31:S=z.next();B=S.value;U=S.done;E=void 0===U?!1:U;aa.next=43;break;case 37:return aa.next=39,M;case 39:T=Q.next(),M=T.value,Y=T.done,R=void 0===Y?!1:Y;case 43:aa.next=27;break;case 45:case "end":return aa.stop()}},n,this)})}]);return a}()}])});}).call(this || window)
